(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{5211:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return r.default.createElement(o.Switch,null,r.default.createElement(o.Route,{exact:!0,path:i.default.REMOTE_INSTANCES_TERMINAL,component:h}),r.default.createElement(o.Route,{exact:!0,path:i.default.REMOTE_DATABASES_LOG_STREAM,component:g}),r.default.createElement(o.Route,{exact:!0,path:i.default.REMOTE_CLOUD_FORMATION_STACK,component:E}),r.default.createElement(o.Route,{exact:!0,path:i.default.REMOTE_CONTAINER_SERVICE_DEPLOYMENT_VERSION,component:y}),r.default.createElement(o.Route,{exact:!0,path:i.default.REMOTE_CONTAINER_LOG,component:v}),r.default.createElement(o.Route,{exact:!0,path:i.default.REMOTE_BUCKET_UPLOAD_EVENT_LOG,component:b}))};var r=a(n(0)),o=n(150),i=a(n(42)),s=a(n(874)),l=a(n(1199)),u=a(n(5984)),c=a(n(5986)),d=a(n(5994)),f=a(n(5996)),p=a(n(5997)),m=a(n(5999)),h=(0,l.default)(m.default,{awaitResources:s.default.TERMINAL,componentHandlesLoading:!0}),g=(0,l.default)(f.default,{awaitResources:s.default.DATABASE_LOGS}),E=(0,l.default)(p.default,{awaitResources:s.default.POST_CREATE_CLOUD_FORMATION_STACK,initialLoaderOnly:!0}),y=(0,l.default)(d.default,{awaitResources:s.default.CONTAINER_SERVICE_RESOURCES,initialLoaderOnly:!0}),v=(0,l.default)(c.default,{awaitResources:s.default.CONTAINER_SERVICE_RESOURCES,initialLoaderOnly:!0}),b=(0,l.default)(u.default,{awaitResources:s.default.BUCKET_UPLOAD_EVENT_LOG,initialLoaderOnly:!0})},5221:function(e,t){},5222:function(e,t){},5223:function(e,t){},5224:function(e,t){},5225:function(e,t){},5226:function(e,t){},5227:function(e,t){},5228:function(e,t){},5548:function(e,t){var n;function a(e){e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.returnValue=!1}(n=n||{}).ArrayBufferReader=function(e){var t=this;e.onblob=function(e){for(var n=window.atob(e),a=new ArrayBuffer(n.length),r=new Uint8Array(a),o=0;o<n.length;o++)r[o]=n.charCodeAt(o);t.ondata&&t.ondata(a)},e.onend=function(){t.onend&&t.onend()},this.ondata=null,this.onend=null},(n=n||{}).ArrayBufferWriter=function(e){var t=this;function a(t){for(var n="",a=0;a<t.byteLength;a++)n+=String.fromCharCode(t[a]);e.sendBlob(window.btoa(n))}e.onack=function(e){t.onack&&t.onack(e)},this.blobLength=n.ArrayBufferWriter.DEFAULT_BLOB_LENGTH,this.sendData=function(e){var n=new Uint8Array(e);if(n.length<=t.blobLength)a(n);else for(var r=0;r<n.length;r+=t.blobLength)a(n.subarray(r,r+t.blobLength))},this.sendEnd=function(){e.sendEnd()},this.onack=null},n.ArrayBufferWriter.DEFAULT_BLOB_LENGTH=6048,(n=n||{}).AudioContextFactory={singleton:null,getAudioContext:function(){var e=window.AudioContext||window.webkitAudioContext;if(e)try{return n.AudioContextFactory.singleton||(n.AudioContextFactory.singleton=new e),n.AudioContextFactory.singleton}catch(e){}return null}},(n=n||{}).AudioPlayer=function(){this.sync=function(){}},n.AudioPlayer.isSupportedType=function(e){return n.RawAudioPlayer.isSupportedType(e)},n.AudioPlayer.getSupportedTypes=function(){return n.RawAudioPlayer.getSupportedTypes()},n.AudioPlayer.getInstance=function(e,t){return n.RawAudioPlayer.isSupportedType(t)?new n.RawAudioPlayer(e,t):null},n.RawAudioPlayer=function(e,t){var a=n.RawAudioFormat.parse(t),r=n.AudioContextFactory.getAudioContext(),o=r.currentTime,i=new n.ArrayBufferReader(e),s=1===a.bytesPerSample?window.Int8Array:window.Int16Array,l=1===a.bytesPerSample?128:32768,u=[],c=function(){var e=function(e){if(e.length<=1)return e[0];var t=0;e.forEach((function(e){t+=e.length}));var n=0,a=new s(t);return e.forEach((function(e){a.set(e,n),n+=e.length})),a}(u);return e?(u=function(e){for(var t=Number.MAX_VALUE,n=e.length,r=Math.floor(e.length/a.channels),o=Math.floor(.02*a.rate),i=Math.max(a.channels*o,a.channels*(r-o));i<e.length;i+=a.channels){for(var l=0,u=0;u<a.channels;u++)l+=Math.abs(e[i+u]);l<=t&&(n=i+a.channels,t=l)}return n===e.length?[e]:[new s(e.buffer.slice(0,n*a.bytesPerSample)),new s(e.buffer.slice(n*a.bytesPerSample))]}(e),e=u.shift()):null};i.ondata=function(e){!function(e){u.push(new s(e))}(new s(e));var t=c();if(t){var n=r.currentTime;o<n&&(o=n);var i=r.createBufferSource();i.connect(r.destination),i.start||(i.start=i.noteOn),i.buffer=function(e){var t=e.length/a.channels,n=r.currentTime;o<n&&(o=n);for(var i=r.createBuffer(a.channels,t,a.rate),s=0;s<a.channels;s++)for(var u=i.getChannelData(s),c=s,d=0;d<t;d++)u[d]=e[c]/l,c+=a.channels;return i}(t),i.start(o),o+=t.length/a.channels/a.rate}},this.sync=function(){var e=r.currentTime;o=Math.min(o,e+.3)}},n.RawAudioPlayer.prototype=new n.AudioPlayer,n.RawAudioPlayer.isSupportedType=function(e){return!!n.AudioContextFactory.getAudioContext()&&null!==n.RawAudioFormat.parse(e)},n.RawAudioPlayer.getSupportedTypes=function(){return n.AudioContextFactory.getAudioContext()?["audio/L8","audio/L16"]:[]},(n=n||{}).AudioRecorder=function(){this.onclose=null,this.onerror=null},n.AudioRecorder.isSupportedType=function(e){return n.RawAudioRecorder.isSupportedType(e)},n.AudioRecorder.getSupportedTypes=function(){return n.RawAudioRecorder.getSupportedTypes()},n.AudioRecorder.getInstance=function(e,t){return n.RawAudioRecorder.isSupportedType(t)?new n.RawAudioRecorder(e,t):null},n.RawAudioRecorder=function(e,t){var a=this,r=n.RawAudioFormat.parse(t),o=n.AudioContextFactory.getAudioContext(),i=(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia).bind(navigator),s=new n.ArrayBufferWriter(e),l=1===r.bytesPerSample?window.Int8Array:window.Int16Array,u=1===r.bytesPerSample?128:32768,c=0,d=0,f=null,p=null,m=null,h=function(e){if(0===e)return 1;var t=Math.PI*e;return Math.sin(t)/t},g=function(e,t){for(var n,a,r=(e.length-1)*t,o=Math.floor(r)-3+1,i=Math.floor(r)+3,s=0,l=o;l<=i;l++)s+=(e[l]||0)*(-(a=3)<(n=r-l)&&n<a?h(n)*h(n/a):0);return s},E=function(){i({audio:!0},(function(e){(m=o.createScriptProcessor(2048,r.channels,r.channels)).connect(o.destination),m.onaudioprocess=function(e){s.sendData(function(e){var t=e.length;c+=t;var n=Math.round(c*r.rate/e.sampleRate)-d;d+=n;for(var a=new l(n*r.channels),o=0;o<r.channels;o++)for(var i=e.getChannelData(o),s=o,f=0;f<n;f++)a[s]=g(i,f/(n-1))*u,s+=r.channels;return a}(e.inputBuffer).buffer)},(p=o.createMediaStreamSource(e)).connect(m),f=e}),(function(){s.sendEnd(),a.onerror&&a.onerror()}))};s.onack=function(e){e.code!==n.Status.Code.SUCCESS||f?(!function(){if(p&&p.disconnect(),m&&m.disconnect(),f)for(var e=f.getTracks(),t=0;t<e.length;t++)e[t].stop();m=null,p=null,f=null,s.sendEnd()}(),s.onack=null,e.code===n.Status.Code.RESOURCE_CLOSED?a.onclose&&a.onclose():a.onerror&&a.onerror()):E()}},n.RawAudioRecorder.prototype=new n.AudioRecorder,n.RawAudioRecorder.isSupportedType=function(e){return!!n.AudioContextFactory.getAudioContext()&&null!==n.RawAudioFormat.parse(e)},n.RawAudioRecorder.getSupportedTypes=function(){return n.AudioContextFactory.getAudioContext()?["audio/L8","audio/L16"]:[]},(n=n||{}).BlobReader=function(e,t){var n,a=this,r=0;n=window.BlobBuilder?new BlobBuilder:window.WebKitBlobBuilder?new WebKitBlobBuilder:window.MozBlobBuilder?new MozBlobBuilder:new function(){var e=[];this.append=function(n){e.push(new Blob([n],{type:t}))},this.getBlob=function(){return new Blob(e,{type:t})}},e.onblob=function(t){for(var o=window.atob(t),i=new ArrayBuffer(o.length),s=new Uint8Array(i),l=0;l<o.length;l++)s[l]=o.charCodeAt(l);n.append(i),r+=i.byteLength,a.onprogress&&a.onprogress(i.byteLength),e.sendAck("OK",0)},e.onend=function(){a.onend&&a.onend()},this.getLength=function(){return r},this.getBlob=function(){return n.getBlob()},this.onprogress=null,this.onend=null},(n=n||{}).BlobWriter=function(e){var t=this,a=new n.ArrayBufferWriter(e);a.onack=function(e){t.onack&&t.onack(e)};this.sendBlob=function(e){var n=0,r=new FileReader,o=function(){if(n>=e.size)t.oncomplete&&t.oncomplete(e);else{var o=function(e,t,n){var a=(e.slice||e.webkitSlice||e.mozSlice).bind(e),r=n-t;if(r!==n){var o=a(t,r);if(o.size===r)return o}return a(t,n)}(e,n,n+a.blobLength);n+=a.blobLength,r.readAsArrayBuffer(o)}};r.onload=function(){a.sendData(r.result),a.onack=function(r){t.onack&&t.onack(r),r.isError()||(t.onprogress&&t.onprogress(e,n-a.blobLength),o())}},r.onerror=function(){t.onerror&&t.onerror(e,n,r.error)},o()},this.sendEnd=function(){a.sendEnd()},this.onack=null,this.onerror=null,this.onprogress=null,this.oncomplete=null},(n=n||{}).Client=function(e){var t=this,a=0,r=0,o=null,i={0:"butt",1:"round",2:"square"},s={0:"bevel",1:"miter",2:"round"},l=new n.Display,u={},c={},d={},f=[],p=[],m=[],h=new n.IntegerPool,g=[];function E(e){e!=a&&(a=e,t.onstatechange&&t.onstatechange(a))}function y(){return 3==a||2==a}this.exportState=function(e){var t={currentState:a,currentTimestamp:r,layers:{}},n={};for(var o in u)n[o]=u[o];l.flush((function(){for(var a in n){var r=parseInt(a),o=n[a],i=o.toCanvas(),s={width:o.width,height:o.height};o.width&&o.height&&(s.url=i.toDataURL("image/png")),r>0&&(s.x=o.x,s.y=o.y,s.z=o.z,s.alpha=o.alpha,s.matrix=o.matrix,s.parent=b(o.parent)),t.layers[a]=s}e(t)}))},this.importState=function(e,t){var o,i;for(o in a=e.currentState,r=e.currentTimestamp,u)(i=parseInt(o))>0&&l.dispose(u[o]);for(o in u={},e.layers){i=parseInt(o);var s=e.layers[o],c=v(i);if(l.resize(c,s.width,s.height),s.url&&(l.setChannelMask(c,n.Layer.SRC),l.draw(c,0,0,s.url)),i>0&&s.parent>=0){var d=v(s.parent);l.move(c,d,s.x,s.y,s.z),l.shade(c,s.alpha);var f=s.matrix;l.distort(c,f[0],f[1],f[2],f[3],f[4],f[5])}}l.flush(t)},this.getDisplay=function(){return l},this.sendSize=function(t,n){y()&&e.sendMessage("size",t,n)},this.sendKeyEvent=function(t,n){y()&&e.sendMessage("key",n,t)},this.sendMouseState=function(t){if(y()){l.moveCursor(Math.floor(t.x),Math.floor(t.y));var n=0;t.left&&(n|=1),t.middle&&(n|=2),t.right&&(n|=4),t.up&&(n|=8),t.down&&(n|=16),e.sendMessage("mouse",Math.floor(t.x),Math.floor(t.y),n)}},this.setClipboard=function(e){if(y()){for(var a=t.createClipboardStream("text/plain"),r=new n.StringWriter(a),o=0;o<e.length;o+=4096)r.sendText(e.substring(o,o+4096));r.sendEnd()}},this.createOutputStream=function(){var e=h.next();return g[e]=new n.OutputStream(t,e)},this.createAudioStream=function(n){var a=t.createOutputStream();return e.sendMessage("audio",a.index,n),a},this.createFileStream=function(n,a){var r=t.createOutputStream();return e.sendMessage("file",r.index,n,a),r},this.createPipeStream=function(n,a){var r=t.createOutputStream();return e.sendMessage("pipe",r.index,n,a),r},this.createClipboardStream=function(n){var a=t.createOutputStream();return e.sendMessage("clipboard",a.index,n),a},this.createObjectOutputStream=function(n,a,r){var o=t.createOutputStream();return e.sendMessage("put",n,o.index,a,r),o},this.requestObjectInputStream=function(t,n){y()&&e.sendMessage("get",t,n)},this.sendAck=function(t,n,a){y()&&e.sendMessage("ack",t,n,a)},this.sendBlob=function(t,n){y()&&e.sendMessage("blob",t,n)},this.endStream=function(t){y()&&(e.sendMessage("end",t),g[t]&&(h.free(t),delete g[t]))},this.onstatechange=null,this.onname=null,this.onerror=null,this.onaudio=null,this.onvideo=null,this.onclipboard=null,this.onfile=null,this.onfilesystem=null,this.onpipe=null,this.onsync=null;var v=function(e){var t=u[e];return t||(t=0===e?l.getDefaultLayer():e>0?l.createLayer():l.createBuffer(),u[e]=t),t},b=function(e){if(!e)return null;for(var t in u)if(e===u[t])return parseInt(t);return null};var T={"miter-limit":function(e,t){l.setMiterLimit(e,parseFloat(t))}},C={ack:function(e){var t=parseInt(e[0]),a=e[1],r=parseInt(e[2]),o=g[t];o&&(o.onack&&o.onack(new n.Status(r,a)),r>=256&&g[t]===o&&(h.free(t),delete g[t]))},arc:function(e){var t=v(parseInt(e[0])),n=parseInt(e[1]),a=parseInt(e[2]),r=parseInt(e[3]),o=parseFloat(e[4]),i=parseFloat(e[5]),s=parseInt(e[6]);l.arc(t,n,a,r,o,i,0!=s)},audio:function(e){var a=parseInt(e[0]),r=e[1],o=p[a]=new n.InputStream(t,a),i=null;t.onaudio&&(i=t.onaudio(o,r)),i||(i=n.AudioPlayer.getInstance(o,r)),i?(c[a]=i,t.sendAck(a,"OK",0)):t.sendAck(a,"BAD TYPE",783)},blob:function(e){var t=parseInt(e[0]),n=e[1],a=p[t];a&&a.onblob&&a.onblob(n)},body:function(e){var a=parseInt(e[0]),r=m[a],o=parseInt(e[1]),i=e[2],s=e[3];if(r&&r.onbody){var l=p[o]=new n.InputStream(t,o);r.onbody(l,i,s)}else t.sendAck(o,"Receipt of body unsupported",256)},cfill:function(e){var t=parseInt(e[0]),n=v(parseInt(e[1])),a=parseInt(e[2]),r=parseInt(e[3]),o=parseInt(e[4]),i=parseInt(e[5]);l.setChannelMask(n,t),l.fillColor(n,a,r,o,i)},clip:function(e){var t=v(parseInt(e[0]));l.clip(t)},clipboard:function(e){var a=parseInt(e[0]),r=e[1];if(t.onclipboard){var o=p[a]=new n.InputStream(t,a);t.onclipboard(o,r)}else t.sendAck(a,"Clipboard unsupported",256)},close:function(e){var t=v(parseInt(e[0]));l.close(t)},copy:function(e){var t=v(parseInt(e[0])),n=parseInt(e[1]),a=parseInt(e[2]),r=parseInt(e[3]),o=parseInt(e[4]),i=parseInt(e[5]),s=v(parseInt(e[6])),u=parseInt(e[7]),c=parseInt(e[8]);l.setChannelMask(s,i),l.copy(t,n,a,r,o,s,u,c)},cstroke:function(e){var t=parseInt(e[0]),n=v(parseInt(e[1])),a=i[parseInt(e[2])],r=s[parseInt(e[3])],o=parseInt(e[4]),u=parseInt(e[5]),c=parseInt(e[6]),d=parseInt(e[7]),f=parseInt(e[8]);l.setChannelMask(n,t),l.strokeColor(n,a,r,o,u,c,d,f)},cursor:function(e){var t=parseInt(e[0]),n=parseInt(e[1]),a=v(parseInt(e[2])),r=parseInt(e[3]),o=parseInt(e[4]),i=parseInt(e[5]),s=parseInt(e[6]);l.setCursor(t,n,a,r,o,i,s)},curve:function(e){var t=v(parseInt(e[0])),n=parseInt(e[1]),a=parseInt(e[2]),r=parseInt(e[3]),o=parseInt(e[4]),i=parseInt(e[5]),s=parseInt(e[6]);l.curveTo(t,n,a,r,o,i,s)},disconnect:function(e){t.disconnect()},dispose:function(e){var t=parseInt(e[0]);if(t>0){var n=v(t);l.dispose(n),delete u[t]}else t<0&&delete u[t]},distort:function(e){var t=parseInt(e[0]),n=parseFloat(e[1]),a=parseFloat(e[2]),r=parseFloat(e[3]),o=parseFloat(e[4]),i=parseFloat(e[5]),s=parseFloat(e[6]);if(t>=0){var u=v(t);l.distort(u,n,a,r,o,i,s)}},error:function(e){var a=e[0],r=parseInt(e[1]);t.onerror&&t.onerror(new n.Status(r,a)),t.disconnect()},end:function(e){var t=parseInt(e[0]),n=p[t];n&&(n.onend&&n.onend(),delete p[t])},file:function(e){var a=parseInt(e[0]),r=e[1],o=e[2];if(t.onfile){var i=p[a]=new n.InputStream(t,a);t.onfile(i,r,o)}else t.sendAck(a,"File transfer unsupported",256)},filesystem:function(e){var a=parseInt(e[0]),r=e[1];if(t.onfilesystem){var o=m[a]=new n.Object(t,a);t.onfilesystem(o,r)}},identity:function(e){var t=v(parseInt(e[0]));l.setTransform(t,1,0,0,1,0,0)},img:function(e){var a=parseInt(e[0]),r=parseInt(e[1]),o=v(parseInt(e[2])),i=e[3],s=parseInt(e[4]),u=parseInt(e[5]),c=p[a]=new n.InputStream(t,a),d=new n.DataURIReader(c,i);d.onend=function(){l.setChannelMask(o,r),l.draw(o,s,u,d.getURI())}},jpeg:function(e){var t=parseInt(e[0]),n=v(parseInt(e[1])),a=parseInt(e[2]),r=parseInt(e[3]),o=e[4];l.setChannelMask(n,t),l.draw(n,a,r,"data:image/jpeg;base64,"+o)},lfill:function(e){var t=parseInt(e[0]),n=v(parseInt(e[1])),a=v(parseInt(e[2]));l.setChannelMask(n,t),l.fillLayer(n,a)},line:function(e){var t=v(parseInt(e[0])),n=parseInt(e[1]),a=parseInt(e[2]);l.lineTo(t,n,a)},lstroke:function(e){var t=parseInt(e[0]),n=v(parseInt(e[1])),a=v(parseInt(e[2]));l.setChannelMask(n,t),l.strokeLayer(n,a)},mouse:function(e){var t=parseInt(e[0]),n=parseInt(e[1]);l.showCursor(!0),l.moveCursor(t,n)},move:function(e){var t=parseInt(e[0]),n=parseInt(e[1]),a=parseInt(e[2]),r=parseInt(e[3]),o=parseInt(e[4]);if(t>0&&n>=0){var i=v(t),s=v(n);l.move(i,s,a,r,o)}},name:function(e){t.onname&&t.onname(e[0])},nest:function(t){(function(t){var a=f[t];return null==a&&((a=f[t]=new n.Parser).oninstruction=e.oninstruction),a})(parseInt(t[0])).receive(t[1])},pipe:function(e){var a=parseInt(e[0]),r=e[1],o=e[2];if(t.onpipe){var i=p[a]=new n.InputStream(t,a);t.onpipe(i,r,o)}else t.sendAck(a,"Named pipes unsupported",256)},png:function(e){var t=parseInt(e[0]),n=v(parseInt(e[1])),a=parseInt(e[2]),r=parseInt(e[3]),o=e[4];l.setChannelMask(n,t),l.draw(n,a,r,"data:image/png;base64,"+o)},pop:function(e){var t=v(parseInt(e[0]));l.pop(t)},push:function(e){var t=v(parseInt(e[0]));l.push(t)},rect:function(e){var t=v(parseInt(e[0])),n=parseInt(e[1]),a=parseInt(e[2]),r=parseInt(e[3]),o=parseInt(e[4]);l.rect(t,n,a,r,o)},reset:function(e){var t=v(parseInt(e[0]));l.reset(t)},set:function(e){var t=v(parseInt(e[0])),n=e[1],a=e[2],r=T[n];r&&r(t,a)},shade:function(e){var t=parseInt(e[0]),n=parseInt(e[1]);if(t>=0){var a=v(t);l.shade(a,n)}},size:function(e){var t=parseInt(e[0]),n=v(t),a=parseInt(e[1]),r=parseInt(e[2]);l.resize(n,a,r)},start:function(e){var t=v(parseInt(e[0])),n=parseInt(e[1]),a=parseInt(e[2]);l.moveTo(t,n,a)},sync:function(n){var o=parseInt(n[0]);l.flush((function(){for(var t in c){var n=c[t];n&&n.sync()}o!==r&&(e.sendMessage("sync",o),r=o)})),2===a&&E(3),t.onsync&&t.onsync(o)},transfer:function(e){var t=v(parseInt(e[0])),a=parseInt(e[1]),r=parseInt(e[2]),o=parseInt(e[3]),i=parseInt(e[4]),s=parseInt(e[5]),u=v(parseInt(e[6])),c=parseInt(e[7]),d=parseInt(e[8]);3===s?l.put(t,a,r,o,i,u,c,d):5!==s&&l.transfer(t,a,r,o,i,u,c,d,n.Client.DefaultTransferFunction[s])},transform:function(e){var t=v(parseInt(e[0])),n=parseFloat(e[1]),a=parseFloat(e[2]),r=parseFloat(e[3]),o=parseFloat(e[4]),i=parseFloat(e[5]),s=parseFloat(e[6]);l.transform(t,n,a,r,o,i,s)},undefine:function(e){var t=parseInt(e[0]),n=m[t];n&&n.onundefine&&n.onundefine()},video:function(e){var a=parseInt(e[0]),r=v(parseInt(e[1])),o=e[2],i=p[a]=new n.InputStream(t,a),s=null;t.onvideo&&(s=t.onvideo(i,r,o)),s||(s=n.VideoPlayer.getInstance(i,r,o)),s?(d[a]=s,t.sendAck(a,"OK",0)):t.sendAck(a,"BAD TYPE",783)}};e.oninstruction=function(e,t){var n=C[e];n&&n(t)},this.disconnect=function(){5!=a&&4!=a&&(E(4),o&&window.clearInterval(o),e.sendMessage("disconnect"),e.disconnect(),E(5))},this.connect=function(t){E(1);try{e.connect(t)}catch(e){throw E(0),e}o=window.setInterval((function(){e.sendMessage("nop")}),5e3),E(2)}},n.Client.DefaultTransferFunction={0:function(e,t){t.red=t.green=t.blue=0},15:function(e,t){t.red=t.green=t.blue=255},3:function(e,t){t.red=e.red,t.green=e.green,t.blue=e.blue,t.alpha=e.alpha},5:function(e,t){},12:function(e,t){t.red=255&~e.red,t.green=255&~e.green,t.blue=255&~e.blue,t.alpha=e.alpha},10:function(e,t){t.red=255&~t.red,t.green=255&~t.green,t.blue=255&~t.blue},1:function(e,t){t.red=e.red&t.red,t.green=e.green&t.green,t.blue=e.blue&t.blue},14:function(e,t){t.red=255&~(e.red&t.red),t.green=255&~(e.green&t.green),t.blue=255&~(e.blue&t.blue)},7:function(e,t){t.red=e.red|t.red,t.green=e.green|t.green,t.blue=e.blue|t.blue},8:function(e,t){t.red=255&~(e.red|t.red),t.green=255&~(e.green|t.green),t.blue=255&~(e.blue|t.blue)},6:function(e,t){t.red=e.red^t.red,t.green=e.green^t.green,t.blue=e.blue^t.blue},9:function(e,t){t.red=255&~(e.red^t.red),t.green=255&~(e.green^t.green),t.blue=255&~(e.blue^t.blue)},4:function(e,t){t.red=~e.red&t.red&255,t.green=~e.green&t.green&255,t.blue=~e.blue&t.blue&255},13:function(e,t){t.red=255&(~e.red|t.red),t.green=255&(~e.green|t.green),t.blue=255&(~e.blue|t.blue)},2:function(e,t){t.red=e.red&~t.red&255,t.green=e.green&~t.green&255,t.blue=e.blue&~t.blue&255},11:function(e,t){t.red=255&(e.red|~t.red),t.green=255&(e.green|~t.green),t.blue=255&(e.blue|~t.blue)}},(n=n||{}).DataURIReader=function(e,t){var n=this,a="data:"+t+";base64,";e.onblob=function(e){a+=e},e.onend=function(){n.onend&&n.onend()},this.getURI=function(){return a},this.onend=null},(n=n||{}).Display=function(){var e=this,t=0,a=0,r=1,o=document.createElement("div");o.style.position="relative",o.style.width=t+"px",o.style.height=a+"px",o.style.transformOrigin=o.style.webkitTransformOrigin=o.style.MozTransformOrigin=o.style.OTransformOrigin=o.style.msTransformOrigin="0 0";var i=new n.Display.VisibleLayer(t,a),s=new n.Display.VisibleLayer(0,0);s.setChannelMask(n.Layer.SRC),o.appendChild(i.getElement()),o.appendChild(s.getElement());var l=document.createElement("div");l.style.position="relative",l.style.width=t*r+"px",l.style.height=a*r+"px",l.appendChild(o),this.cursorHotspotX=0,this.cursorHotspotY=0,this.cursorX=0,this.cursorY=0,this.onresize=null,this.oncursor=null;var u=[],c=[];function d(){for(var e=0;e<c.length;){var t=c[e];if(!t.isReady())break;t.flush(),e++}c.splice(0,e)}function f(e,t){this.isReady=function(){for(var e=0;e<t.length;e++)if(t[e].blocked)return!1;return!0},this.flush=function(){for(var n=0;n<t.length;n++)t[n].execute();e&&e()}}function p(e,t){var n=this;this.blocked=t,this.unblock=function(){n.blocked&&(n.blocked=!1,d())},this.execute=function(){e&&e()}}function m(e,t){var n=new p(e,t);return u.push(n),n}this.getElement=function(){return l},this.getWidth=function(){return t},this.getHeight=function(){return a},this.getDefaultLayer=function(){return i},this.getCursorLayer=function(){return s},this.createLayer=function(){var e=new n.Display.VisibleLayer(t,a);return e.move(i,0,0,0),e},this.createBuffer=function(){var e=new n.Layer(0,0);return e.autosize=1,e},this.flush=function(e){c.push(new f(e,u)),u=[],d()},this.setCursor=function(t,n,a,r,o,i,l){m((function(){e.cursorHotspotX=t,e.cursorHotspotY=n,s.resize(i,l),s.copy(a,r,o,i,l,0,0),e.moveCursor(e.cursorX,e.cursorY),e.oncursor&&e.oncursor(s.toCanvas(),t,n)}))},this.showCursor=function(e){var t=s.getElement(),n=t.parentNode;!1===e?n&&n.removeChild(t):n!==o&&o.appendChild(t)},this.moveCursor=function(t,n){s.translate(t-e.cursorHotspotX,n-e.cursorHotspotY),e.cursorX=t,e.cursorY=n},this.resize=function(n,s,u){m((function(){n.resize(s,u),n===i&&(t=s,a=u,o.style.width=t+"px",o.style.height=a+"px",l.style.width=t*r+"px",l.style.height=a*r+"px",e.onresize&&e.onresize(s,u))}))},this.drawImage=function(e,t,n,a){m((function(){e.drawImage(t,n,a)}))},this.drawBlob=function(e,t,n,a){var r=URL.createObjectURL(a),o=m((function(){i.width&&i.height&&e.drawImage(t,n,i),URL.revokeObjectURL(r)}),!0),i=new Image;i.onload=o.unblock,i.onerror=o.unblock,i.src=r},this.draw=function(e,t,n,a){var r=m((function(){o.width&&o.height&&e.drawImage(t,n,o)}),!0),o=new Image;o.onload=r.unblock,o.onerror=r.unblock,o.src=a},this.play=function(e,t,n,a){var r=document.createElement("video");r.type=t,r.src=a,r.addEventListener("play",(function(){!function t(){e.drawImage(0,0,r),r.ended||window.setTimeout(t,20)}()}),!1),m(r.play)},this.transfer=function(e,t,n,a,r,o,i,s,l){m((function(){o.transfer(e,t,n,a,r,i,s,l)}))},this.put=function(e,t,n,a,r,o,i,s){m((function(){o.put(e,t,n,a,r,i,s)}))},this.copy=function(e,t,n,a,r,o,i,s){m((function(){o.copy(e,t,n,a,r,i,s)}))},this.moveTo=function(e,t,n){m((function(){e.moveTo(t,n)}))},this.lineTo=function(e,t,n){m((function(){e.lineTo(t,n)}))},this.arc=function(e,t,n,a,r,o,i){m((function(){e.arc(t,n,a,r,o,i)}))},this.curveTo=function(e,t,n,a,r,o,i){m((function(){e.curveTo(t,n,a,r,o,i)}))},this.close=function(e){m((function(){e.close()}))},this.rect=function(e,t,n,a,r){m((function(){e.rect(t,n,a,r)}))},this.clip=function(e){m((function(){e.clip()}))},this.strokeColor=function(e,t,n,a,r,o,i,s){m((function(){e.strokeColor(t,n,a,r,o,i,s)}))},this.fillColor=function(e,t,n,a,r){m((function(){e.fillColor(t,n,a,r)}))},this.strokeLayer=function(e,t,n,a,r){m((function(){e.strokeLayer(t,n,a,r)}))},this.fillLayer=function(e,t){m((function(){e.fillLayer(t)}))},this.push=function(e){m((function(){e.push()}))},this.pop=function(e){m((function(){e.pop()}))},this.reset=function(e){m((function(){e.reset()}))},this.setTransform=function(e,t,n,a,r,o,i){m((function(){e.setTransform(t,n,a,r,o,i)}))},this.transform=function(e,t,n,a,r,o,i){m((function(){e.transform(t,n,a,r,o,i)}))},this.setChannelMask=function(e,t){m((function(){e.setChannelMask(t)}))},this.setMiterLimit=function(e,t){m((function(){e.setMiterLimit(t)}))},this.dispose=function(e){m((function(){e.dispose()}))},this.distort=function(e,t,n,a,r,o,i){m((function(){e.distort(t,n,a,r,o,i)}))},this.move=function(e,t,n,a,r){m((function(){e.move(t,n,a,r)}))},this.shade=function(e,t){m((function(){e.shade(t)}))},this.scale=function(e){o.style.transform=o.style.WebkitTransform=o.style.MozTransform=o.style.OTransform=o.style.msTransform="scale("+e+","+e+")",r=e,l.style.width=t*r+"px",l.style.height=a*r+"px"},this.getScale=function(){return r},this.flatten=function(){var e=document.createElement("canvas");e.width=i.width,e.height=i.height;var t=e.getContext("2d");return function e(n,a,r){if(n.width>0&&n.height>0){var o=t.globalAlpha;t.globalAlpha*=n.alpha/255,t.drawImage(n.getCanvas(),a,r);for(var i=function(e){var t=[];for(var n in e.children)t.push(e.children[n]);return t.sort((function(e,t){var n=e.z-t.z;if(0!==n)return n;var a=e.getElement(),r=t.getElement().compareDocumentPosition(a);return r&Node.DOCUMENT_POSITION_PRECEDING?-1:r&Node.DOCUMENT_POSITION_FOLLOWING?1:0})),t}(n),s=0;s<i.length;s++){var l=i[s];e(l,a+l.x,r+l.y)}t.globalAlpha=o}}(i,0,0),e}},n.Display.VisibleLayer=function(e,t){n.Layer.apply(this,[e,t]);var a=this;this.__unique_id=n.Display.VisibleLayer.__next_id++,this.alpha=255,this.x=0,this.y=0,this.z=0,this.matrix=[1,0,0,1,0,0],this.parent=null,this.children={};var r=a.getCanvas();r.style.position="absolute",r.style.left="0px",r.style.top="0px";var o=document.createElement("div");o.appendChild(r),o.style.width=e+"px",o.style.height=t+"px",o.style.position="absolute",o.style.left="0px",o.style.top="0px",o.style.overflow="hidden";var i=this.resize;this.resize=function(e,t){o.style.width=e+"px",o.style.height=t+"px",i(e,t)},this.getElement=function(){return o};var s="translate(0px, 0px)",l="matrix(1, 0, 0, 1, 0, 0)";this.translate=function(e,t){a.x=e,a.y=t,s="translate("+e+"px,"+t+"px)",o.style.transform=o.style.WebkitTransform=o.style.MozTransform=o.style.OTransform=o.style.msTransform=s+" "+l},this.move=function(e,t,n,r){a.parent!==e&&(a.parent&&delete a.parent.children[a.__unique_id],a.parent=e,e.children[a.__unique_id]=a,e.getElement().appendChild(o));a.translate(t,n),a.z=r,o.style.zIndex=r},this.shade=function(e){a.alpha=e,o.style.opacity=e/255},this.dispose=function(){a.parent&&(delete a.parent.children[a.__unique_id],a.parent=null),o.parentNode&&o.parentNode.removeChild(o)},this.distort=function(e,t,n,r,i,u){a.matrix=[e,t,n,r,i,u],l="matrix("+e+","+t+","+n+","+r+","+i+","+u+")",o.style.transform=o.style.WebkitTransform=o.style.MozTransform=o.style.OTransform=o.style.msTransform=s+" "+l}},n.Display.VisibleLayer.__next_id=0,(n=n||{}).InputStream=function(e,t){var n=this;this.index=t,this.onblob=null,this.onend=null,this.sendAck=function(t,a){e.sendAck(n.index,t,a)}},(n=n||{}).IntegerPool=function(){var e=this,t=[];this.next_int=0,this.next=function(){return t.length>0?t.shift():e.next_int++},this.free=function(e){t.push(e)}},(n=n||{}).JSONReader=function(e){var t=this,a=new n.StringReader(e),r="";this.getLength=function(){return r.length},this.getJSON=function(){return JSON.parse(r)},a.ontext=function(e){r+=e,t.onprogress&&t.onprogress(e.length)},a.onend=function(){t.onend&&t.onend()},this.onprogress=null,this.onend=null},(n=n||{}).Keyboard=function(e){var t=this;this.onkeydown=null,this.onkeyup=null;var a=function(){var e=this;this.timestamp=(new Date).getTime(),this.defaultPrevented=!1,this.keysym=null,this.reliable=!1,this.getAge=function(){return(new Date).getTime()-e.timestamp}},r=function(e,n,r,o){a.apply(this),this.keyCode=e,this.keyIdentifier=n,this.key=r,this.location=o,this.keysym=E(r,o)||v(e,o),this.keysym&&!g(this.keysym)&&(this.reliable=!0),!this.keysym&&b(e,n)&&(this.keysym=E(n,o,t.modifiers.shift));var i=!(t.modifiers.ctrl||navigator&&navigator.platform&&navigator.platform.match(/^mac/i));(!t.modifiers.alt&&t.modifiers.ctrl||i&&t.modifiers.alt||t.modifiers.meta||t.modifiers.hyper)&&(this.reliable=!0),f[e]=this.keysym};r.prototype=new a;var o=function(e){a.apply(this),this.charCode=e,this.keysym=y(e),this.reliable=!0};o.prototype=new a;var i=function(e,t,n,r){a.apply(this),this.keyCode=e,this.keyIdentifier=t,this.key=n,this.location=r,this.keysym=f[e]||v(e,r)||E(n,r),this.reliable=!0};i.prototype=new a;var s=[],l={8:[65288],9:[65289],12:[65291,65291,65291,65461],13:[65293],16:[65505,65505,65506],17:[65507,65507,65508],18:[65513,65513,65027],19:[65299],20:[65509],27:[65307],32:[32],33:[65365,65365,65365,65465],34:[65366,65366,65366,65459],35:[65367,65367,65367,65457],36:[65360,65360,65360,65463],37:[65361,65361,65361,65460],38:[65362,65362,65362,65464],39:[65363,65363,65363,65462],40:[65364,65364,65364,65458],45:[65379,65379,65379,65456],46:[65535,65535,65535,65454],91:[65515],92:[65383],93:null,96:[65456],97:[65457],98:[65458],99:[65459],100:[65460],101:[65461],102:[65462],103:[65463],104:[65464],105:[65465],106:[65450],107:[65451],109:[65453],110:[65454],111:[65455],112:[65470],113:[65471],114:[65472],115:[65473],116:[65474],117:[65475],118:[65476],119:[65477],120:[65478],121:[65479],122:[65480],123:[65481],144:[65407],145:[65300],225:[65027]},u={Again:[65382],AllCandidates:[65341],Alphanumeric:[65328],Alt:[65513,65513,65027],Attn:[64782],AltGraph:[65027],ArrowDown:[65364],ArrowLeft:[65361],ArrowRight:[65363],ArrowUp:[65362],Backspace:[65288],CapsLock:[65509],Cancel:[65385],Clear:[65291],Convert:[65313],Copy:[64789],Crsel:[64796],CrSel:[64796],CodeInput:[65335],Compose:[65312],Control:[65507,65507,65508],ContextMenu:[65383],DeadGrave:[65104],DeadAcute:[65105],DeadCircumflex:[65106],DeadTilde:[65107],DeadMacron:[65108],DeadBreve:[65109],DeadAboveDot:[65110],DeadUmlaut:[65111],DeadAboveRing:[65112],DeadDoubleacute:[65113],DeadCaron:[65114],DeadCedilla:[65115],DeadOgonek:[65116],DeadIota:[65117],DeadVoicedSound:[65118],DeadSemivoicedSound:[65119],Delete:[65535],Down:[65364],End:[65367],Enter:[65293],EraseEof:[64774],Escape:[65307],Execute:[65378],Exsel:[64797],ExSel:[64797],F1:[65470],F2:[65471],F3:[65472],F4:[65473],F5:[65474],F6:[65475],F7:[65476],F8:[65477],F9:[65478],F10:[65479],F11:[65480],F12:[65481],F13:[65482],F14:[65483],F15:[65484],F16:[65485],F17:[65486],F18:[65487],F19:[65488],F20:[65489],F21:[65490],F22:[65491],F23:[65492],F24:[65493],Find:[65384],GroupFirst:[65036],GroupLast:[65038],GroupNext:[65032],GroupPrevious:[65034],FullWidth:null,HalfWidth:null,HangulMode:[65329],Hankaku:[65321],HanjaMode:[65332],Help:[65386],Hiragana:[65317],HiraganaKatakana:[65319],Home:[65360],Hyper:[65517,65517,65518],Insert:[65379],JapaneseHiragana:[65317],JapaneseKatakana:[65318],JapaneseRomaji:[65316],JunjaMode:[65336],KanaMode:[65325],KanjiMode:[65313],Katakana:[65318],Left:[65361],Meta:[65511,65511,65512],ModeChange:[65406],NumLock:[65407],PageDown:[65366],PageUp:[65365],Pause:[65299],Play:[64790],PreviousCandidate:[65342],PrintScreen:[64797],Redo:[65382],Right:[65363],RomanCharacters:null,Scroll:[65300],Select:[65376],Separator:[65452],Shift:[65505,65505,65506],SingleCandidate:[65340],Super:[65515,65515,65516],Tab:[65289],Up:[65362],Undo:[65381],Win:[65515],Zenkaku:[65320],ZenkakuHankaku:[65322]},c={65027:!0,65505:!0,65506:!0,65507:!0,65508:!0,65511:!0,65512:!0,65513:!0,65514:!0,65515:!0,65516:!0};this.modifiers=new n.Keyboard.ModifierState,this.pressed={};var d={},f={},p=null,m=null,h=function(e,t){return e?e[t]||e[0]:null},g=function(e){return e>=0&&e<=255||16777216==(4294901760&e)};function E(e,t,n){if(!e)return null;var a,r=e.indexOf("U+");if(r>=0){var o=e.substring(r+2);a=String.fromCharCode(parseInt(o,16))}else{if(1!==e.length||3===t)return h(u[e],t);a=e}return!0===n?a=a.toUpperCase():!1===n&&(a=a.toLowerCase()),y(a.charCodeAt(0))}function y(e){return function(e){return e<=31||e>=127&&e<=159}(e)?65280|e:e>=0&&e<=255?e:e>=256&&e<=1114111?16777216|e:null}function v(e,t){return h(l[e],t)}var b=function(e,t){if(!t)return!1;var n=t.indexOf("U+");return-1===n||(e!==parseInt(t.substring(n+2),16)||(e>=65&&e<=90||e>=48&&e<=57))};this.press=function(e){if(null!==e){if(!t.pressed[e]&&(t.pressed[e]=!0,t.onkeydown)){var n=t.onkeydown(e);return d[e]=n,window.clearTimeout(p),window.clearInterval(m),c[e]||(p=window.setTimeout((function(){m=window.setInterval((function(){t.onkeyup(e),t.onkeydown(e)}),50)}),500)),n}return d[e]||!1}},this.release=function(e){t.pressed[e]&&(delete t.pressed[e],window.clearTimeout(p),window.clearInterval(m),null!==e&&t.onkeyup&&t.onkeyup(e))},this.reset=function(){for(var e in t.pressed)t.release(parseInt(e));s=[]};var T=function(e){var a=n.Keyboard.ModifierState.fromKeyboardEvent(e);t.modifiers.alt&&!1===a.alt&&(t.release(65513),t.release(65514),t.release(65027)),t.modifiers.shift&&!1===a.shift&&(t.release(65505),t.release(65506)),t.modifiers.ctrl&&!1===a.ctrl&&(t.release(65507),t.release(65508)),t.modifiers.meta&&!1===a.meta&&(t.release(65511),t.release(65512)),t.modifiers.hyper&&!1===a.hyper&&(t.release(65515),t.release(65516)),t.modifiers=a};function C(){var e,t=S();if(!t)return!1;do{e=t,t=S()}while(null!==t);return e.defaultPrevented}var S=function(){var e=s[0];if(!e)return null;if(!(e instanceof r))return e instanceof i?(n=e.keysym)?(t.release(n),e.defaultPrevented=!0,s.shift()):(t.reset(),e):s.shift();var n=null,a=[];if(e.reliable?(n=e.keysym,a=s.splice(0,1)):s[1]instanceof o?(n=s[1].keysym,a=s.splice(0,2)):s[1]&&(n=e.keysym,a=s.splice(0,1)),a.length>0){if(n){!function(e){t.modifiers.ctrl&&t.modifiers.alt&&(e>=65&&e<=90||e>=97&&e<=122||(e<=255||16777216==(4278190080&e))&&(t.release(65507),t.release(65508),t.release(65513),t.release(65514)))}(n);var l=!t.press(n);f[e.keyCode]=n,t.modifiers.meta&&65511!==n&&65512!==n&&t.release(n);for(var u=0;u<a.length;u++)a[u].defaultPrevented=l}return e}return null},O=function(e){return"location"in e?e.location:"keyLocation"in e?e.keyLocation:0},_=function(e){return window.event&&window.event.keyCode?window.event.keyCode:e.which};e.addEventListener("keydown",(function(e){if(t.onkeydown){var n=_(e);if(T(e),229!==n){var a=new r(n,e.keyIdentifier,e.key,O(e));s.push(a),C()&&e.preventDefault()}}}),!0),e.addEventListener("keypress",(function(e){if(t.onkeydown||t.onkeyup){var n=_(e);T(e);var a=new o(n);s.push(a),C()&&e.preventDefault()}}),!0),e.addEventListener("keyup",(function(e){if(t.onkeyup){e.preventDefault();var n=_(e);T(e);var a=new i(n,e.keyIdentifier,e.key,O(e));s.push(a),C()}}),!0)},n.Keyboard.ModifierState=function(){this.shift=!1,this.ctrl=!1,this.alt=!1,this.meta=!1,this.hyper=!1},n.Keyboard.ModifierState.fromKeyboardEvent=function(e){var t=new n.Keyboard.ModifierState;return t.shift=e.shiftKey,t.ctrl=e.ctrlKey,t.alt=e.altKey,t.meta=e.metaKey,e.getModifierState&&(t.hyper=e.getModifierState("OS")||e.getModifierState("Super")||e.getModifierState("Hyper")||e.getModifierState("Win")),t},(n=n||{}).Layer=function(e,t){var a=this,r=document.createElement("canvas"),o=r.getContext("2d");o.save();var i=!0,s=!0,l=0,u={1:"destination-in",2:"destination-out",4:"source-in",6:"source-atop",8:"source-out",9:"destination-atop",10:"xor",11:"destination-over",12:"copy",14:"source-over",15:"lighter"},c=function(e,t){e=e||0,t=t||0;var n=64*Math.ceil(e/64),s=64*Math.ceil(t/64);if(r.width!==n||r.height!==s){var u=null;if(!i&&0!==r.width&&0!==r.height)(u=document.createElement("canvas")).width=Math.min(a.width,e),u.height=Math.min(a.height,t),u.getContext("2d").drawImage(r,0,0,u.width,u.height,0,0,u.width,u.height);var c=o.globalCompositeOperation;r.width=n,r.height=s,u&&o.drawImage(u,0,0,u.width,u.height,0,0,u.width,u.height),o.globalCompositeOperation=c,l=0,o.save()}else a.reset();a.width=e,a.height=t};function d(e,t,n,r){var o,i,s=n+e,l=r+t;o=s>a.width?s:a.width,i=l>a.height?l:a.height,a.resize(o,i)}this.autosize=!1,this.width=e,this.height=t,this.getCanvas=function(){return r},this.toCanvas=function(){var e=document.createElement("canvas");return e.width=a.width,e.height=a.height,e.getContext("2d").drawImage(a.getCanvas(),0,0),e},this.resize=function(e,t){e===a.width&&t===a.height||c(e,t)},this.drawImage=function(e,t,n){a.autosize&&d(e,t,n.width,n.height),o.drawImage(n,e,t),i=!1},this.transfer=function(e,t,r,s,l,u,c,f){var p=e.getCanvas();if(!(t>=p.width||r>=p.height)&&(t+s>p.width&&(s=p.width-t),r+l>p.height&&(l=p.height-r),0!==s&&0!==l)){a.autosize&&d(u,c,s,l);for(var m=e.getCanvas().getContext("2d").getImageData(t,r,s,l),h=o.getImageData(u,c,s,l),g=0;g<s*l*4;g+=4){var E=new n.Layer.Pixel(m.data[g],m.data[g+1],m.data[g+2],m.data[g+3]),y=new n.Layer.Pixel(h.data[g],h.data[g+1],h.data[g+2],h.data[g+3]);f(E,y),h.data[g]=y.red,h.data[g+1]=y.green,h.data[g+2]=y.blue,h.data[g+3]=y.alpha}o.putImageData(h,u,c),i=!1}},this.put=function(e,t,n,r,s,l,u){var c=e.getCanvas();if(!(t>=c.width||n>=c.height)&&(t+r>c.width&&(r=c.width-t),n+s>c.height&&(s=c.height-n),0!==r&&0!==s)){a.autosize&&d(l,u,r,s);var f=e.getCanvas().getContext("2d").getImageData(t,n,r,s);o.putImageData(f,l,u),i=!1}},this.copy=function(e,t,n,r,s,l,u){var c=e.getCanvas();t>=c.width||n>=c.height||(t+r>c.width&&(r=c.width-t),n+s>c.height&&(s=c.height-n),0!==r&&0!==s&&(a.autosize&&d(l,u,r,s),o.drawImage(c,t,n,r,s,l,u,r,s),i=!1))},this.moveTo=function(e,t){s&&(o.beginPath(),s=!1),a.autosize&&d(e,t,0,0),o.moveTo(e,t)},this.lineTo=function(e,t){s&&(o.beginPath(),s=!1),a.autosize&&d(e,t,0,0),o.lineTo(e,t)},this.arc=function(e,t,n,r,i,l){s&&(o.beginPath(),s=!1),a.autosize&&d(e,t,0,0),o.arc(e,t,n,r,i,l)},this.curveTo=function(e,t,n,r,i,l){s&&(o.beginPath(),s=!1),a.autosize&&d(i,l,0,0),o.bezierCurveTo(e,t,n,r,i,l)},this.close=function(){o.closePath(),s=!0},this.rect=function(e,t,n,r){s&&(o.beginPath(),s=!1),a.autosize&&d(e,t,n,r),o.rect(e,t,n,r)},this.clip=function(){o.clip(),s=!0},this.strokeColor=function(e,t,n,a,r,l,u){o.lineCap=e,o.lineJoin=t,o.lineWidth=n,o.strokeStyle="rgba("+a+","+r+","+l+","+u/255+")",o.stroke(),i=!1,s=!0},this.fillColor=function(e,t,n,a){o.fillStyle="rgba("+e+","+t+","+n+","+a/255+")",o.fill(),i=!1,s=!0},this.strokeLayer=function(e,t,n,a){o.lineCap=e,o.lineJoin=t,o.lineWidth=n,o.strokeStyle=o.createPattern(a.getCanvas(),"repeat"),o.stroke(),i=!1,s=!0},this.fillLayer=function(e){o.fillStyle=o.createPattern(e.getCanvas(),"repeat"),o.fill(),i=!1,s=!0},this.push=function(){o.save(),l++},this.pop=function(){l>0&&(o.restore(),l--)},this.reset=function(){for(;l>0;)o.restore(),l--;o.restore(),o.save(),o.beginPath(),s=!1},this.setTransform=function(e,t,n,a,r,i){o.setTransform(e,t,n,a,r,i)},this.transform=function(e,t,n,a,r,i){o.transform(e,t,n,a,r,i)},this.setChannelMask=function(e){o.globalCompositeOperation=u[e]},this.setMiterLimit=function(e){o.miterLimit=e},c(e,t),r.style.zIndex=-1},n.Layer.ROUT=2,n.Layer.ATOP=6,n.Layer.XOR=10,n.Layer.ROVER=11,n.Layer.OVER=14,n.Layer.PLUS=15,n.Layer.RIN=1,n.Layer.IN=4,n.Layer.OUT=8,n.Layer.RATOP=9,n.Layer.SRC=12,n.Layer.Pixel=function(e,t,n,a){this.red=e,this.green=t,this.blue=n,this.alpha=a},(n=n||{}).eventListeners={onContextMenu:function(e){a(e)}},n.Mouse=function(e){var t=this;this.touchMouseThreshold=3,this.scrollThreshold=53,this.PIXELS_PER_LINE=18,this.PIXELS_PER_PAGE=16*this.PIXELS_PER_LINE,this.currentState=new n.Mouse.State(0,0,!1,!1,!1,!1,!1),this.onmousedown=null,this.onmouseup=null,this.onmousemove=null,this.onmouseout=null;var r=0,o=0;function i(){r=t.touchMouseThreshold}function s(e){var n=e.deltaY||-e.wheelDeltaY||-e.wheelDelta;if(n?1===e.deltaMode?n=e.deltaY*t.PIXELS_PER_LINE:2===e.deltaMode&&(n=e.deltaY*t.PIXELS_PER_PAGE):n=e.detail*t.PIXELS_PER_LINE,(o+=n)<=-t.scrollThreshold){do{t.onmousedown&&(t.currentState.up=!0,t.onmousedown(t.currentState)),t.onmouseup&&(t.currentState.up=!1,t.onmouseup(t.currentState)),o+=t.scrollThreshold}while(o<=-t.scrollThreshold);o=0}if(o>=t.scrollThreshold){do{t.onmousedown&&(t.currentState.down=!0,t.onmousedown(t.currentState)),t.onmouseup&&(t.currentState.down=!1,t.onmouseup(t.currentState)),o-=t.scrollThreshold}while(o>=t.scrollThreshold);o=0}a(e)}e.addEventListener("contextmenu",n.eventListeners.onContextMenu,!1),e.addEventListener("mousemove",(function(n){a(n),r?r--:(t.currentState.fromClientPosition(e,n.clientX,n.clientY),t.onmousemove&&t.onmousemove(t.currentState))}),!1),e.addEventListener("mousedown",(function(e){if(a(e),!r){switch(e.button){case 0:t.currentState.left=!0;break;case 1:t.currentState.middle=!0;break;case 2:t.currentState.right=!0}t.onmousedown&&t.onmousedown(t.currentState)}}),!1),e.addEventListener("mouseup",(function(e){if(a(e),!r){switch(e.button){case 0:t.currentState.left=!1;break;case 1:t.currentState.middle=!1;break;case 2:t.currentState.right=!1}t.onmouseup&&t.onmouseup(t.currentState)}}),!1),e.addEventListener("mouseout",(function(n){n||(n=window.event);for(var r=n.relatedTarget||n.toElement;r;){if(r===e)return;r=r.parentNode}a(n),(t.currentState.left||t.currentState.middle||t.currentState.right)&&(t.currentState.left=!1,t.currentState.middle=!1,t.currentState.right=!1,t.onmouseup&&t.onmouseup(t.currentState)),t.onmouseout&&t.onmouseout()}),!1),e.addEventListener("selectstart",(function(e){a(e)}),!1),e.addEventListener("touchmove",i,!1),e.addEventListener("touchstart",i,!1),e.addEventListener("touchend",i,!1),e.addEventListener("DOMMouseScroll",s,!1),e.addEventListener("mousewheel",s,!1),e.addEventListener("wheel",s,!1);var l=function(){var e=document.createElement("div");if(!("cursor"in e.style))return!1;try{e.style.cursor="url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEX///+nxBvIAAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==) 0 0, auto"}catch(e){return!1}return/\burl\([^()]*\)\s+0\s+0\b/.test(e.style.cursor||"")}();this.setCursor=function(t,n,a){if(l){var r=t.toDataURL("image/png");return e.style.cursor="url("+r+") "+n+" "+a+", auto",!0}return!1}},n.Mouse.State=function(e,t,n,a,r,o,i){var s=this;this.x=e,this.y=t,this.left=n,this.middle=a,this.right=r,this.up=o,this.down=i,this.fromClientPosition=function(e,t,n){s.x=t-e.offsetLeft,s.y=n-e.offsetTop;for(var a=e.offsetParent;a&&a!==document.body;)s.x-=a.offsetLeft-a.scrollLeft,s.y-=a.offsetTop-a.scrollTop,a=a.offsetParent;if(a){var r=document.body.scrollLeft||document.documentElement.scrollLeft,o=document.body.scrollTop||document.documentElement.scrollTop;s.x-=a.offsetLeft-r,s.y-=a.offsetTop-o}}},n.Mouse.Touchpad=function(e){var t=this;this.scrollThreshold=20*(window.devicePixelRatio||1),this.clickTimingThreshold=250,this.clickMoveThreshold=10*(window.devicePixelRatio||1),this.currentState=new n.Mouse.State(0,0,!1,!1,!1,!1,!1),this.onmousedown=null,this.onmouseup=null,this.onmousemove=null;var a=0,r=0,o=0,i=0,s=0,l={1:"left",2:"right",3:"middle"},u=!1,c=null;e.addEventListener("touchend",(function(e){if(e.preventDefault(),u&&0===e.touches.length){var n=(new Date).getTime(),r=l[a];t.currentState[r]&&(t.currentState[r]=!1,t.onmouseup&&t.onmouseup(t.currentState),c&&(window.clearTimeout(c),c=null)),n-i<=t.clickTimingThreshold&&s<t.clickMoveThreshold&&(t.currentState[r]=!0,t.onmousedown&&t.onmousedown(t.currentState),c=window.setTimeout((function(){t.currentState[r]=!1,t.onmouseup&&t.onmouseup(t.currentState),u=!1}),t.clickTimingThreshold)),c||(u=!1)}}),!1),e.addEventListener("touchstart",(function(e){if(e.preventDefault(),a=Math.min(e.touches.length,3),c&&(window.clearTimeout(c),c=null),!u){u=!0;var t=e.touches[0];r=t.clientX,o=t.clientY,i=(new Date).getTime(),s=0}}),!1),e.addEventListener("touchmove",(function(n){n.preventDefault();var l=n.touches[0],u=l.clientX-r,c=l.clientY-o;if(s+=Math.abs(u)+Math.abs(c),1===a){var d=1+s/((new Date).getTime()-i);t.currentState.x+=u*d,t.currentState.y+=c*d,t.currentState.x<0?t.currentState.x=0:t.currentState.x>=e.offsetWidth&&(t.currentState.x=e.offsetWidth-1),t.currentState.y<0?t.currentState.y=0:t.currentState.y>=e.offsetHeight&&(t.currentState.y=e.offsetHeight-1),t.onmousemove&&t.onmousemove(t.currentState),r=l.clientX,o=l.clientY}else if(2===a){var f;if(Math.abs(c)>=t.scrollThreshold)f=c>0?"down":"up",t.currentState[f]=!0,t.onmousedown&&t.onmousedown(t.currentState),t.currentState[f]=!1,t.onmouseup&&t.onmouseup(t.currentState),r=l.clientX,o=l.clientY}}),!1)},n.Mouse.Touchscreen=function(e){var t=this,a=!1,r=null,o=null,i=null,s=null;function l(e){t.currentState[e]||(t.currentState[e]=!0,t.onmousedown&&t.onmousedown(t.currentState))}function u(e){t.currentState[e]&&(t.currentState[e]=!1,t.onmouseup&&t.onmouseup(t.currentState))}function c(n,a){t.currentState.fromClientPosition(e,n,a),t.onmousemove&&t.onmousemove(t.currentState)}function d(e){var n=e.touches[0]||e.changedTouches[0],a=n.clientX-r,i=n.clientY-o;return Math.sqrt(a*a+i*i)>=t.clickMoveThreshold}function f(){window.clearTimeout(i),window.clearTimeout(s),a=!1}this.scrollThreshold=20*(window.devicePixelRatio||1),this.clickTimingThreshold=250,this.clickMoveThreshold=16*(window.devicePixelRatio||1),this.longPressThreshold=500,this.currentState=new n.Mouse.State(0,0,!1,!1,!1,!1,!1),this.onmousedown=null,this.onmouseup=null,this.onmousemove=null,e.addEventListener("touchend",(function(e){if(a)if(0===e.touches.length&&1===e.changedTouches.length){if(window.clearTimeout(s),u("left"),!d(e)&&(e.preventDefault(),!t.currentState.left)){var n=e.changedTouches[0];c(n.clientX,n.clientY),l("left"),i=window.setTimeout((function(){u("left"),f()}),t.clickTimingThreshold)}}else f()}),!1),e.addEventListener("touchstart",(function(e){1===e.touches.length?(e.preventDefault(),function(e){var t=e.touches[0];a=!0,r=t.clientX,o=t.clientY}(e),window.clearTimeout(i),s=window.setTimeout((function(){var t,n=e.touches[0];c(n.clientX,n.clientY),l(t="right"),u(t),f()}),t.longPressThreshold)):f()}),!1),e.addEventListener("touchmove",(function(e){if(a)if(d(e)&&window.clearTimeout(s),1===e.touches.length){if(t.currentState.left){e.preventDefault();var n=e.touches[0];c(n.clientX,n.clientY)}}else f()}),!1)},(n=(n=n||{})||{}).Object=function(e,t){var n=this,a={};this.index=t,this.onbody=function(e,t,n){var r=function(e){var t=a[e];if(!t)return null;var n=t.shift();return 0===t.length&&delete a[e],n}(n);r&&r(e,t)},this.onundefine=null,this.requestInputStream=function(t,r){r&&function(e,t){var n=a[e];n||(n=[],a[e]=n),n.push(t)}(t,r),e.requestObjectInputStream(n.index,t)},this.createOutputStream=function(t,a){return e.createObjectOutputStream(n.index,t,a)}},n.Object.ROOT_STREAM="/",n.Object.STREAM_INDEX_MIMETYPE="application/vnd.glyptodon.guacamole.stream-index+json",(n=n||{}).OnScreenKeyboard=function(e){var t=this,a={},r={},o=[],i=function(e,t){e.classList?e.classList.add(t):e.className+=" "+t},s=function(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(/([^ ]+)[ ]*/g,(function(e,n){return n===t?"":e}))},l=0,u=function(e,t,n,a){this.width=t,this.height=n,this.scale=function(r){e.style.width=t*r+"px",e.style.height=n*r+"px",a&&(e.style.lineHeight=n*r+"px",e.style.fontSize=r+"px")}},c=function(e){for(var t=0;t<e.length;t++){if(!(e[t]in a))return!1}return!0},d=function(e){var n=t.keys[e];if(!n)return null;for(var a=n.length-1;a>=0;a--){var r=n[a];if(c(r.requires))return r}return null},f=function(e,n){if(!r[e]){i(n,"guac-keyboard-pressed");var o=d(e);if(o.modifier){var l="guac-keyboard-modifier-"+g(o.modifier),u=a[o.modifier];u?(s(m,l),delete a[o.modifier],t.onkeyup&&t.onkeyup(u)):(i(m,l),a[o.modifier]=o.keysym,t.onkeydown&&t.onkeydown(o.keysym))}else t.onkeydown&&t.onkeydown(o.keysym);r[e]=!0}},p=function(e,n){if(r[e]){s(n,"guac-keyboard-pressed");var a=d(e);!a.modifier&&t.onkeyup&&t.onkeyup(a.keysym),r[e]=!1}},m=document.createElement("div");m.className="guac-keyboard",m.onselectstart=m.onmousemove=m.onmouseup=m.onmousedown=function(e){return l&&l--,e.stopPropagation(),!1},this.touchMouseThreshold=3,this.onkeydown=null,this.onkeyup=null,this.layout=new n.OnScreenKeyboard.Layout(e),this.getElement=function(){return m},this.resize=function(e){for(var n=Math.floor(10*e/t.layout.width)/10,a=0;a<o.length;a++){o[a].scale(n)}};var h=function(e,t){if(t instanceof Array){for(var a=[],r=0;r<t.length;r++)a.push(new n.OnScreenKeyboard.Key(t[r],e));return a}return"number"==typeof t?[new n.OnScreenKeyboard.Key({name:e,keysym:t})]:"string"==typeof t?[new n.OnScreenKeyboard.Key({name:e,title:t})]:[new n.OnScreenKeyboard.Key(t,e)]};this.keys=function(t){var n={};for(var a in e.keys)n[a]=h(a,t[a]);return n}(e.keys);var g=function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[^A-Za-z0-9]+/g,"-").toLowerCase()};!function e(n,a,r){var s,c=document.createElement("div");if(r&&i(c,"guac-keyboard-"+g(r)),a instanceof Array)for(i(c,"guac-keyboard-group"),s=0;s<a.length;s++)e(c,a[s]);else if(a instanceof Object){i(c,"guac-keyboard-group");var d=Object.keys(a).sort();for(s=0;s<d.length;s++){r=d[s];e(c,a[r],r)}}else if("number"==typeof a)i(c,"guac-keyboard-gap"),o.push(new u(c,a,a));else if("string"==typeof a){var m=a;1===m.length&&(m="0x"+m.charCodeAt(0).toString(16)),i(c,"guac-keyboard-key-container");var h=document.createElement("div");h.className="guac-keyboard-key guac-keyboard-key-"+g(m);var E=t.keys[a];if(E)for(s=0;s<E.length;s++){var y=E[s],v=document.createElement("div");v.className="guac-keyboard-cap",v.textContent=y.title;for(var b=0;b<y.requires.length;b++){var T=y.requires[b];i(v,"guac-keyboard-requires-"+g(T)),i(h,"guac-keyboard-uses-"+g(T))}h.appendChild(v)}c.appendChild(h),o.push(new u(c,t.layout.keyWidths[a]||1,1,!0));var C=function(e){e.preventDefault(),0===l&&p(a,h)};h.addEventListener("touchstart",(function(e){e.preventDefault(),l=t.touchMouseThreshold,f(a,h)}),!0),h.addEventListener("touchend",(function(e){e.preventDefault(),l=t.touchMouseThreshold,p(a,h)}),!0),h.addEventListener("mousedown",(function(e){e.preventDefault(),0===l&&f(a,h)}),!0),h.addEventListener("mouseup",C,!0),h.addEventListener("mouseout",C,!0)}n.appendChild(c)}(m,e.layout)},n.OnScreenKeyboard.Layout=function(e){this.language=e.language,this.type=e.type,this.keys=e.keys,this.layout=e.layout,this.width=e.width,this.keyWidths=e.keyWidths||{}},n.OnScreenKeyboard.Key=function(e,t){this.name=t||e.name,this.title=e.title||this.name,this.keysym=e.keysym||function(e){if(!e||1!==e.length)return null;var t=e.charCodeAt(0);return t>=0&&t<=255?t:t>=256&&t<=1114111?16777216|t:null}(this.title),this.modifier=e.modifier,this.requires=e.requires||[]},(n=n||{}).OutputStream=function(e,t){var n=this;this.index=t,this.onack=null,this.sendBlob=function(t){e.sendBlob(n.index,t)},this.sendEnd=function(){e.endStream(n.index)}},(n=n||{}).Parser=function(){var e=this,t="",n=[],a=-1,r=0;this.receive=function(o){for(r>4096&&a>=r&&(t=t.substring(r),a-=r,r=0),t+=o;a<t.length;){if(a>=r){var i=t.substring(r,a),s=t.substring(a,a+1);if(n.push(i),";"==s){var l=n.shift();null!=e.oninstruction&&e.oninstruction(l,n),n.length=0}else if(","!=s)throw new Error("Illegal terminator.");r=a+1}var u=t.indexOf(".",r);if(-1==u){r=t.length;break}var c=parseInt(t.substring(a+1,u));if(isNaN(c))throw new Error("Non-numeric character in element length.");a=(r=u+1)+c}},this.oninstruction=null},(n=n||{}).RawAudioFormat=function(e){this.bytesPerSample=e.bytesPerSample,this.channels=e.channels,this.rate=e.rate},n.RawAudioFormat.parse=function(e){var t,a=null,r=1;if("audio/L8;"===e.substring(0,9))e=e.substring(9),t=1;else{if("audio/L16;"!==e.substring(0,10))return null;e=e.substring(10),t=2}for(var o=e.split(","),i=0;i<o.length;i++){var s=o[i],l=s.indexOf("=");if(-1===l)return null;var u=s.substring(0,l),c=s.substring(l+1);switch(u){case"channels":r=parseInt(c);break;case"rate":a=parseInt(c);break;default:return null}}return null===a?null:new n.RawAudioFormat({bytesPerSample:t,channels:r,rate:a})},(n=n||{}).SessionRecording=function(e){var t=this,a=[],r=[],o=0,i=0,s=new n.SessionRecording._PlaybackTunnel,l=new n.Client(s),u=-1,c=null,d=null,f=null;l.connect(),l.getDisplay().showCursor(!1),e.oninstruction=function(e,s){var l=new n.SessionRecording._Frame.Instruction(e,s.slice());if(r.push(l),o+=l.getSize(),"sync"===e){var u=parseInt(s[0]),c=new n.SessionRecording._Frame(u,r);a.push(c),(1===a.length||o>=16384&&u-i>=5e3)&&(c.keyframe=!0,i=u,o=0),r=[],t.onprogress&&t.onprogress(t.getDuration())}};var p=function(e){return 0===a.length?0:e-a[0].timestamp},m=function e(t,n,r){if(t===n)return t;var o=Math.floor((t+n)/2),i=p(a[o].timestamp);return r<i&&o>t?e(t,o-1,r):r>i&&o<n?e(o+1,n,r):o},h=function(e){for(var t=a[e],n=0;n<t.instructions.length;n++){var r=t.instructions[n];s.receiveInstruction(r.opcode,r.args)}t.keyframe&&!t.clientState&&l.exportState((function(e){t.clientState=e}))},g=function(e){var n;for(n=e;n>=0;n--){var r=a[n];if(n===u)break;if(r.clientState){l.importState(r.clientState);break}}for(n++;n<=e;n++)h(n);u=e,t.onseek&&t.onseek(t.getPosition())},E=function e(){if(g(u+1),u+1<a.length){var n=a[u+1].timestamp-c+d,r=Math.max(n-(new Date).getTime(),0);f=window.setTimeout((function(){e()}),r)}else t.pause()};this.onprogress=null,this.onplay=null,this.onpause=null,this.onseek=null,this.connect=function(t){e.connect(t)},this.disconnect=function(){e.disconnect()},this.getDisplay=function(){return l.getDisplay()},this.isPlaying=function(){return!!c},this.getPosition=function(){return-1===u?0:p(a[u].timestamp)},this.getDuration=function(){return 0===a.length?0:p(a[a.length-1].timestamp)},this.play=function(){if(!t.isPlaying()&&u+1<a.length){t.onplay&&t.onplay();var e=a[u+1];c=e.timestamp,d=(new Date).getTime(),E()}},this.seek=function(e){if(0!==a.length){var n=t.isPlaying();t.pause(),g(m(0,a.length-1,e)),n&&t.play()}},this.pause=function(){t.isPlaying()&&(t.onpause&&t.onpause(),window.clearTimeout(f),c=null,d=null)}},n.SessionRecording._Frame=function(e,t){this.keyframe=!1,this.timestamp=e,this.instructions=t,this.clientState=null},n.SessionRecording._Frame.Instruction=function(e,t){var n=this;this.opcode=e,this.args=t,this.getSize=function(){for(var e=n.opcode.length,t=0;t<n.args.length;t++)e+=n.args[t].length;return e}},n.SessionRecording._PlaybackTunnel=function(){var e=this;this.connect=function(e){},this.sendMessage=function(e){},this.disconnect=function(){},this.receiveInstruction=function(t,n){e.oninstruction&&e.oninstruction(t,n)}},(n=n||{}).Status=function(e,t){var n=this;this.code=e,this.message=t,this.isError=function(){return n.code<0||n.code>255}},n.Status.Code={SUCCESS:0,UNSUPPORTED:256,SERVER_ERROR:512,SERVER_BUSY:513,UPSTREAM_TIMEOUT:514,UPSTREAM_ERROR:515,RESOURCE_NOT_FOUND:516,RESOURCE_CONFLICT:517,RESOURCE_CLOSED:518,UPSTREAM_NOT_FOUND:519,UPSTREAM_UNAVAILABLE:520,SESSION_CONFLICT:521,SESSION_TIMEOUT:522,SESSION_CLOSED:523,UPSTREAM_HOSTKEY_MISMATCH:767,CLIENT_BAD_REQUEST:768,CLIENT_UNAUTHORIZED:769,CLIENT_FORBIDDEN:771,CLIENT_TIMEOUT:776,CLIENT_OVERRUN:781,CLIENT_BAD_TYPE:783,CLIENT_TOO_MANY:797},(n=n||{}).StringReader=function(e){var t=this,a=new n.ArrayBufferReader(e),r=0,o=0;a.ondata=function(e){var n=function(e){for(var t="",n=new Uint8Array(e),a=0;a<n.length;a++){var i=n[a];0===r?127==(127|i)?t+=String.fromCharCode(i):223==(31|i)?(o=31&i,r=1):239==(15|i)?(o=15&i,r=2):247==(7|i)?(o=7&i,r=3):t+="�":191==(63|i)?(o=o<<6|63&i,0==--r&&(t+=String.fromCharCode(o))):(r=0,t+="�")}return t}(e);t.ontext&&t.ontext(n)},a.onend=function(){t.onend&&t.onend()},this.ontext=null,this.onend=null},(n=n||{}).StringWriter=function(e){var t=this,a=new n.ArrayBufferWriter(e),r=new Uint8Array(8192),o=0;function i(e){var t,n;if(e<=127)t=0,n=1;else if(e<=2047)t=192,n=2;else if(e<=65535)t=224,n=3;else{if(!(e<=2097151))return void i(65533);t=240,n=4}!function(e){if(o+e>=r.length){var t=new Uint8Array(2*(o+e));t.set(r),r=t}o+=e}(n);for(var a=o-1,s=1;s<n;s++)r[a--]=128|63&e,e>>=6;r[a]=t|e}a.onack=function(e){t.onack&&t.onack(e)},this.sendText=function(e){e.length&&a.sendData(function(e){for(var t=0;t<e.length;t++)i(e.charCodeAt(t));if(o>0){var n=r.subarray(0,o);return o=0,n}}(e))},this.sendEnd=function(){a.sendEnd()},this.onack=null},(n=n||{}).Tunnel=function(){this.connect=function(e){},this.disconnect=function(){},this.sendMessage=function(e){},this.state=n.Tunnel.State.CONNECTING,this.receiveTimeout=15e3,this.uuid=null,this.onerror=null,this.onstatechange=null,this.oninstruction=null},n.Tunnel.INTERNAL_DATA_OPCODE="",n.Tunnel.State={CONNECTING:0,OPEN:1,CLOSED:2},n.HTTPTunnel=function(e,t){var a=this,r=e+"?connect",o=e+"?read:",i=e+"?write:",s=1,l=!1,u="",c=!!t,d=null;function f(){window.clearTimeout(d),d=window.setTimeout((function(){p(new n.Status(n.Status.Code.UPSTREAM_TIMEOUT,"Server timeout."))}),a.receiveTimeout)}function p(e){a.state!==n.Tunnel.State.CLOSED&&(e.code!==n.Status.Code.SUCCESS&&a.onerror&&(a.state!==n.Tunnel.State.CONNECTING&&e.code===n.Status.Code.RESOURCE_NOT_FOUND||a.onerror(e)),a.state=n.Tunnel.State.CLOSED,l=!1,a.onstatechange&&a.onstatechange(a.state))}function m(){if(a.state===n.Tunnel.State.OPEN)if(u.length>0){l=!0;var e=new XMLHttpRequest;e.open("POST",i+a.uuid),e.withCredentials=c,e.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=UTF-8"),e.onreadystatechange=function(){4===e.readyState&&(200!==e.status?h(e):m())},e.send(u),u=""}else l=!1}function h(e){var t=parseInt(e.getResponseHeader("Guacamole-Status-Code")),a=e.getResponseHeader("Guacamole-Error-Message");p(new n.Status(t,a))}function g(e){var t=null,r=null,o=0,i=-1,l=0,u=new Array;function c(){if(a.state===n.Tunnel.State.OPEN){if(!(e.readyState<2)){var o;try{o=e.status}catch(e){o=200}if(r||200!==o||(r=y()),3===e.readyState||4===e.readyState){if(f(),1===s&&(3!==e.readyState||t?4===e.readyState&&t&&clearInterval(t):t=setInterval(c,30)),0===e.status)return void a.disconnect();if(200!==e.status)return void h(e);var d;try{d=e.responseText}catch(e){return}for(;i<d.length;){if(i>=l){var p=d.substring(l,i),m=d.substring(i,i+1);if(u.push(p),";"===m){var E=u.shift();a.oninstruction&&a.oninstruction(E,u),u.length=0}l=i+1}var v=d.indexOf(".",l);if(-1===v){l=d.length;break}var b=parseInt(d.substring(i+1,v));if(0===b){t&&clearInterval(t),e.onreadystatechange=null,e.abort(),r&&g(r);break}i=(l=v+1)+b}}}}else null!==t&&clearInterval(t)}e.onreadystatechange=1===s?function(){3===e.readyState&&++o>=2&&(s=0,e.onreadystatechange=c),c()}:c,c()}this.sendMessage=function(){if(a.state===n.Tunnel.State.OPEN&&0!==arguments.length){for(var e=r(arguments[0]),t=1;t<arguments.length;t++)e+=","+r(arguments[t]);u+=e+=";",l||m()}function r(e){var t=new String(e);return t.length+"."+t}};var E=0;function y(){var e=new XMLHttpRequest;return e.open("GET",o+a.uuid+":"+E++),e.withCredentials=c,e.send(null),e}this.connect=function(e){f();var t=new XMLHttpRequest;t.onreadystatechange=function(){4===t.readyState&&(200===t.status?(f(),a.uuid=t.responseText,a.state=n.Tunnel.State.OPEN,a.onstatechange&&a.onstatechange(a.state),g(y())):h(t))},t.open("POST",r,!0),t.withCredentials=c,t.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=UTF-8"),t.send(e)},this.disconnect=function(){p(new n.Status(n.Status.Code.SUCCESS,"Manually closed."))}},n.HTTPTunnel.prototype=new n.Tunnel,n.WebSocketTunnel=function(e){var t=this,a=null,r=null;if("ws:"!==e.substring(0,3)&&"wss:"!==e.substring(0,4)){var o={"http:":"ws:","https:":"wss:"}[window.location.protocol];if("/"===e.substring(0,1))e=o+"//"+window.location.host+e;else{var i=window.location.pathname.lastIndexOf("/"),s=window.location.pathname.substring(0,i+1);e=o+"//"+window.location.host+s+e}}function l(){window.clearTimeout(r),r=window.setTimeout((function(){u(new n.Status(n.Status.Code.UPSTREAM_TIMEOUT,"Server timeout."))}),t.receiveTimeout)}function u(e){t.state!==n.Tunnel.State.CLOSED&&(e.code!==n.Status.Code.SUCCESS&&t.onerror&&t.onerror(e),t.state=n.Tunnel.State.CLOSED,t.onstatechange&&t.onstatechange(t.state),a.close())}this.sendMessage=function(e){if(t.state===n.Tunnel.State.OPEN&&0!==arguments.length){for(var r=i(arguments[0]),o=1;o<arguments.length;o++)r+=","+i(arguments[o]);r+=";",a.send(r)}function i(e){var t=new String(e);return t.length+"."+t}},this.connect=function(r){l(),(a=new WebSocket(e+"?"+r,"guacamole")).onopen=function(e){l()},a.onclose=function(e){u(new n.Status(parseInt(e.reason),e.reason))},a.onerror=function(e){u(new n.Status(n.Status.Code.SERVER_ERROR,e.data))},a.onmessage=function(e){l();var a,r=e.data,o=0,i=[];do{var s=r.indexOf(".",o);if(-1!==s)a=(o=s+1)+parseInt(r.substring(a+1,s));else u(new n.Status(n.Status.Code.SERVER_ERROR,"Incomplete instruction."));var c=r.substring(o,a),d=r.substring(a,a+1);if(i.push(c),";"===d){var f=i.shift();t.state!==n.Tunnel.State.OPEN&&(f===n.Tunnel.INTERNAL_DATA_OPCODE&&(t.uuid=i[0]),t.state=n.Tunnel.State.OPEN,t.onstatechange&&t.onstatechange(t.state)),f!==n.Tunnel.INTERNAL_DATA_OPCODE&&t.oninstruction&&t.oninstruction(f,i),i.length=0}o=a+1}while(o<r.length)}},this.disconnect=function(){u(new n.Status(n.Status.Code.SUCCESS,"Manually closed."))}},n.WebSocketTunnel.prototype=new n.Tunnel,n.ChainedTunnel=function(e){for(var t,a=this,r=[],o=null,i=0;i<arguments.length;i++)r.push(arguments[i]);function s(e){a.disconnect=e.disconnect,a.sendMessage=e.sendMessage;var i=function(t){if(t&&t.code===n.Status.Code.UPSTREAM_TIMEOUT)return r=[],null;var a=r.shift();return a&&(e.onerror=null,e.oninstruction=null,e.onstatechange=null,s(a)),a};function l(){e.onstatechange=a.onstatechange,e.oninstruction=a.oninstruction,e.onerror=a.onerror,a.uuid=e.uuid,o=e}e.onstatechange=function(e){switch(e){case n.Tunnel.State.OPEN:l(),a.onstatechange&&a.onstatechange(e);break;case n.Tunnel.State.CLOSED:!i()&&a.onstatechange&&a.onstatechange(e)}},e.oninstruction=function(e,t){l(),a.oninstruction&&a.oninstruction(e,t)},e.onerror=function(e){!i(e)&&a.onerror&&a.onerror(e)},e.connect(t)}this.connect=function(e){t=e;var i=o||r.shift();i?s(i):a.onerror&&a.onerror(n.Status.Code.SERVER_ERROR,"No tunnels to try.")}},n.ChainedTunnel.prototype=new n.Tunnel,n.StaticHTTPTunnel=function(e,t){var a=this,r=null,o=function(e){e!==a.state&&(a.state=e,a.onstatechange&&a.onstatechange(e))};this.sendMessage=function(e){},this.connect=function(i){a.disconnect(),o(n.Tunnel.State.CONNECTING),(r=new XMLHttpRequest).open("GET",e),r.withCredentials=!!t,r.responseType="text",r.send(null);var s=0,l=new n.Parser;l.oninstruction=function(e,t){a.oninstruction&&a.oninstruction(e,t)},r.onreadystatechange=function(){if(3===r.readyState||4===r.readyState){o(n.Tunnel.State.OPEN);var e=r.responseText,t=e.length;s<t&&(l.receive(e.substring(s)),s=t)}4===r.readyState&&a.disconnect()},r.onerror=function(){a.onerror&&a.onerror(new n.Status(function(e){switch(e){case 400:return n.Status.Code.CLIENT_BAD_REQUEST;case 403:return n.Status.Code.CLIENT_FORBIDDEN;case 404:return n.Status.Code.RESOURCE_NOT_FOUND;case 429:return n.Status.Code.CLIENT_TOO_MANY;case 503:return n.Status.Code.SERVER_BUSY}return n.Status.Code.SERVER_ERROR}(r.status),r.statusText)),a.disconnect()}},this.disconnect=function(){r&&(r.abort(),r=null),o(n.Tunnel.State.CLOSED)}},n.StaticHTTPTunnel.prototype=new n.Tunnel,(n=n||{}).API_VERSION="0.9.13-incubating",(n=n||{}).VideoPlayer=function(){this.sync=function(){}},n.VideoPlayer.isSupportedType=function(e){return!1},n.VideoPlayer.getSupportedTypes=function(){return[]},n.VideoPlayer.getInstance=function(e,t,n){return null},e.exports=n},5622:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=(0,o.useCallback)((function(n){var a=(0,i.default)(t,n.data);a&&!t&&(0,s.default)("You must specify a data sanitizer to receive postMessage data"),a&&n.origin===window.location.origin&&null===l.exec((0,r.default)(n,"data.source",""))&&(0,i.default)(e,a)}),[e,t]);(0,o.useEffect)((function(){return window.addEventListener("message",n,!1),function(){window.removeEventListener("message",n,!1)}}),[n])};var r=a(n(36)),o=n(0),i=a(n(211)),s=a(n(188)),l=/(react).*/},5623:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.cloudFormationStackRecordShape=t.cloudFormationStackRecordCollection=void 0;var r=a(n(3)),o=n(681),i=n(22),s=n(69),l=n(59),u=n(252),c=t.cloudFormationStackRecordShape=r.default.shape({arn:r.default.string,createdAt:u.timestamp,location:s.locationDisplayShape,name:l.validResourceName,resourceType:r.default.oneOf([i.TYPE_CLOUD_FORMATION_STACK_RECORD]),sourceInfo:r.default.arrayOf(r.default.shape({arn:r.default.string,name:l.validResourceName,type:r.default.oneOf([i.TYPE_EXPORT_SNAPSHOT_RECORD])})),state:r.default.oneOf([o.STATUS_STARTED,o.STATUS_SUCCEEDED,o.STATUS_FAILED])});t.cloudFormationStackRecordCollection=r.default.arrayOf(c)},5624:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cancelEvent=function(e){return e.stopImmediatePropagation(),e.preventDefault(),!1},t.getElementDimensions=function(e){var t,n;if(e.clientWidth&&e.clientHeight)t=e.clientWidth,n=e.clientHeight;else{var a=e.getBoundingClientRect(),r=a.width,o=a.height;t=Math.round(r),n=Math.round(o)}return{width:t,height:n}},t.isClipboardKey=function(e){return r.CLIPBOARD_HOTKEYS.includes(e)},t.isCommandKey=function(e){return r.OSX_COMMAND_KEYS.includes(e)},t.isErrorDisplayable=function(e){return e.isError()&&!a.RECONNECT_ERROR_CODES.includes(e.code)},t.isWindowsProtocol=function(e){return e===a.PROTOCOL_RDP};var a=n(683),r=n(5760)},5702:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.bucketUploadEventDataShape=void 0;var r=a(n(3)),o=n(69),i=r.default.arrayOf(r.default.shape({Key:r.default.string,Size:r.default.number,status:r.default.string}));t.bucketUploadEventDataShape=r.default.shape({bucketName:r.default.string,complete:i,files:i,failed:i,failedTotal:r.default.number,isIndeterminate:r.default.bool,pendingTotal:r.default.number,percentComplete:r.default.number,region:o.regionName,successTotal:r.default.number,total:r.default.number,uploadComplete:r.default.bool,uploadEventId:r.default.string}),t.default={}},5703:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=m,t.getTaskRecords=t.getInactiveTaskRecords=t.getHydratedCloudFormationStackRecords=t.getCloudFormationStackRecordByName=t.getActiveTaskRecords=void 0;var r=a(n(50)),o=a(n(2)),i=n(64),s=n(681),l=n(22),u=n(2287),c=n(80),d=n(255);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e){return e.cloudFormationStackRecords||[]}t.getCloudFormationStackRecordByName=(0,i.createSelector)(m,c.extractRegionParam,(0,c.extractResourceNameParam)("cloudFormationStackRecordName"),c.findByLocationAndName);var h=function(e){return!!e},g=t.getHydratedCloudFormationStackRecords=(0,i.createSelector)(m,u.getExportSnapshotRecords,(function(e,t){return e.map((function(e){var n=e.sourceInfo.map((function(n){var a=n.name;return n.resourceType===l.TYPE_EXPORT_SNAPSHOT_RECORD?(0,c.findByLocationAndName)(t,e.location.regionName,a):null})).filter(h);return p(p({},e),{},{exportSnapshotRecords:n})}))})),E=t.getTaskRecords=(0,i.createSelector)(u.getExportSnapshotRecords,g,(function(e,t){return[].concat((0,r.default)(e),(0,r.default)(t)).sort(d.sortCreatedDescending)}));t.getActiveTaskRecords=(0,i.createSelector)(E,(function(e){return e.filter((function(e){return e.state===s.STATUS_STARTED}))})),t.getInactiveTaskRecords=(0,i.createSelector)(E,(function(e){return e.filter((function(e){return e.state!==s.STATUS_STARTED}))}))},5704:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.Description=k,t.Header=L,t.LearnMoreLink=x,t.LightsailConnectUnavailableIpv6Alert=U,t.firewallRulesMessages=t.default=t.TEST_IDS=void 0;var r=a(n(24)),o=a(n(34)),i=a(n(3)),s=a(n(0)),l=n(4),u=n(91),c=n(55),d=n(149),f=n(307),p=a(n(42)),m=a(n(475)),h=a(n(883)),g=n(208),E=n(2273),y=n(56),v=a(n(92)),b=n(868),T=a(n(110)),C=a(n(2212)),S=a(n(413)),O=n(570),_=a(n(1211)),w=a(n(131)),I=["platform"],R=t.TEST_IDS={ROOT:"clientNotAvailableAlert"},P=t.firewallRulesMessages=(0,l.defineMessages)({title:{id:"instances.titles.lightsailConnectDisabled",defaultMessage:"The {protocol} client is not available"},rulesDescription:{id:"instances.descriptions.lightsailConnectDisabledRules",defaultMessage:"To enable the browser {protocol} client, edit the {protocol} rule in your instance's IPv4 firewall to allow the Lightsail browser {protocol}."},manageProtocolRule:{id:"instances.labels.manageProtocolRule",defaultMessage:"Manage {protocol} rule"}}),M=(0,l.defineMessages)({browserClientUnsupported:{id:"instances.titles.browserClientUnsupported",defaultMessage:"Browser-based {protocol} is not supported"},lightsailConnectUnsupported:{id:"instances.descriptions.lightsailConnectUnsupported",defaultMessage:"The browser-based {protocol} client does not support public IPv6 at this time."},useExternalClient:{id:"instances.descriptions.useExternalClient",defaultMessage:"Use a third-party {protocol} client to connect to your instance."}}),A=(0,l.defineMessages)({thirdPartyClientRequired:{id:"instances.titles.thirdPartyClientRequired",defaultMessage:"Third-party {protocol} client required"},browserClientSupportsIpv4:{id:"instances.descriptions.browserClientSupportsIpv4",defaultMessage:"Lightsail's browser-based {protocol} client only supports IPv4 connections. Use a third-party client to connect over IPv6."}}),N=i.default.oneOf([d.PLATFORM_WINDOWS,d.PLATFORM_LINUX_UNIX]);function D(e){var t=e.platform;return s.default.createElement(O.LocalizedMessage,{message:f.PORT_LOC_MAP[t===d.PLATFORM_WINDOWS?f.PORT_RDP:f.PORT_SSH]})}function L(e){var t=e.platform;return(0,y.isEnabled)(c.PENDING_LOC)?s.default.createElement(O.LocalizedMessage,{message:A.thirdPartyClientRequired,values:{protocol:s.default.createElement(D,{platform:t})}}):s.default.createElement(O.LocalizedMessage,{message:M.browserClientUnsupported,values:{protocol:s.default.createElement(D,{platform:t})}})}function k(e){var t=e.platform;return(0,y.isEnabled)(c.PENDING_LOC)?s.default.createElement(O.LocalizedMessage,{message:A.browserClientSupportsIpv4,values:{protocol:s.default.createElement(D,{platform:t})}}):s.default.createElement(O.LocalizedMessage,{message:M.lightsailConnectUnsupported,values:{protocol:s.default.createElement(D,{platform:t})}})}function x(e){var t=e.platform,n=(0,o.default)(e,I);return(0,y.isEnabled)(c.PENDING_LOC)?s.default.createElement(w.default,(0,r.default)({cloudscape:!0,variant:"primary"},n,{slug:u.ARTICLE_CONNECTING_TO_YOUR_INSTANCES,message:m.default.learnMore})):s.default.createElement(w.default,(0,r.default)({cloudscape:!0,variant:"primary"},n,{slug:t===d.PLATFORM_WINDOWS?u.ARTICLE_UNDERSTANDING_RDP_CLIENT:u.ARTICLE_UNDERSTANDING_SSH_CLIENT,message:M.useExternalClient,messageValues:{protocol:s.default.createElement(D,{platform:t})}}))}function U(e){var t=e.platform,n=(0,h.default)(function(e){return(0,y.isEnabled)(c.PENDING_LOC)?u.ARTICLE_CONNECTING_TO_YOUR_INSTANCES:e===d.PLATFORM_WINDOWS?u.ARTICLE_UNDERSTANDING_RDP_CLIENT:u.ARTICLE_UNDERSTANDING_SSH_CLIENT}(t));return s.default.createElement(C.default,{type:"warning",header:s.default.createElement(L,{platform:t}),action:(0,y.isEnabled)(c.CLOUDSCAPE_INSTANCE_CONNECT)&&s.default.createElement(_.default,{href:n})},s.default.createElement(C.default.Body,null,s.default.createElement(k,{platform:t})),!(0,y.isEnabled)(c.CLOUDSCAPE_INSTANCE_CONNECT)&&s.default.createElement(C.default.Body,null,s.default.createElement(x,{platform:t})))}function j(e){var t=e.instance,n={protocol:s.default.createElement(D,{platform:t.platform})};return!(0,y.isEnabled)(c.IPV6_LS_CONNECT)&&(0,b.isIPv6OnlyInstance)(t)?s.default.createElement(U,{platform:t.platform}):(0,E.firewallRulesDoAllowConnect)(t)?null:s.default.createElement(C.default,{"data-testid":R.ROOT,type:"warning",action:(0,y.isEnabled)(c.CLOUDSCAPE_INSTANCE_CONNECT)&&s.default.createElement(S.default,{"data-analytics-type":"eventDetail","data-analytics":"manage-protocol-rule-button",message:P.manageProtocolRule,messageValues:{protocol:s.default.createElement(D,{platform:t.platform})},onClick:function(e){e.preventDefault(),(0,v.default)((0,T.default)(p.default.INSTANCE_NETWORKING,t))}}),header:s.default.createElement(O.LocalizedMessage,{message:P.title,values:n})},s.default.createElement(C.default.Body,{message:P.rulesDescription,messageValues:n}))}D.propTypes={platform:N},L.propTypes={platform:N},k.propTypes={platform:N},x.propTypes={platform:N},U.propTypes={platform:N},Object.assign(U,{Header:L,Description:k,LearnMoreLink:x}),j.propTypes={instance:g.instanceShape};t.default=j},5705:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=d,t.messages=void 0;var r=a(n(3)),o=a(n(0)),i=n(4),s=n(55),l=n(56),u=a(n(33)),c=t.messages=(0,i.defineMessages)({reconnect:{id:"ls.terminal.reconnect",defaultMessage:"Reconnect"}});function d(e){var t=e.disabled,n=e.reconnect;return o.default.createElement(u.default,{disabled:t,onClick:(0,l.isEnabled)(s.GUAC_REFRESH_BUTTON)?function(){return document.location.reload(!0)}:n,message:c.reconnect})}d.propTypes={disabled:r.default.bool,reconnect:r.default.func.isRequired},d.defaultProps={disabled:!1}},5752:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=(0,o.useHistory)();return(0,r.useCallback)((function(){e.push((0,s.default)(i.default.NOT_FOUND))}),[e])};var r=n(0),o=n(150),i=a(n(42)),s=a(n(572))},5753:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.default}});var r=a(n(5754))},5754:function(e,t,n){"use strict";var a=n(1),r=n(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=p;var o=a(n(3)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=r(e)&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(a,i,s):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(n(0)),s=n(4),l=n(253),u=n(347),c=n(11);function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}var f=(0,i.createContext)();function p(e){var t=e.children,n=e.size,a=n<l.VALUE_KILOBYTE;return i.default.createElement(f.Provider,{value:{size:n,sizeIsByteFormat:a}},i.default.createElement(c.Box,null,t))}p.propTypes={children:o.default.node.isRequired,size:o.default.number},p.defaultProps={size:0},p.Formatted=function(){var e=(0,i.useContext)(f).size;return i.default.createElement(c.Text,{size:"large",color:"important",marginBottom:"none"},i.default.createElement(s.FormattedNumber,{value:(0,u.getDisplayValueForBytes)(e),unit:(0,u.getDisplayUnitFromBytes)(e),style:"unit",maximumFractionDigits:1}))},p.Raw=function(){var e=(0,i.useContext)(f).size;return e<l.VALUE_KILOBYTE?null:i.default.createElement(c.Text,{size:"medium",color:"muted",marginBottom:"none"},i.default.createElement(s.FormattedNumber,{value:e,unit:"byte",style:"unit"}))}},5755:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.default}});var r=a(n(5756))},5756:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var r=a(n(0)),o=n(18),i=n(168),s=n(11),l=a(n(5757)),u=a(n(2301));function c(e){var t=e.deployment,n=t.containers,a=t.publicEndpoint;return r.default.createElement(s.Stack,{space:"standard"},r.default.createElement(s.DeprecatedHeading,{as:"h3",level:"6",color:"muted",message:o.containerServiceMessages.titles.containers}),r.default.createElement(s.Stack,{space:"small"},n.map((function(e){return r.default.createElement(l.default,{key:e.name,container:e,isPublicEndpoint:a&&a.containerName===e.name})}))),r.default.createElement(u.default,{publicEndpoint:a,containers:n}))}c.propTypes={deployment:i.containerServiceDeploymentShape.isRequired}},5757:function(e,t,n){"use strict";var a=n(1),r=n(9);Object.defineProperty(t,"__esModule",{value:!0}),t.EXPANDED_DETAILS_TEST_ID=void 0,t.default=X,t.messages=void 0;var o,i,s,l,u=a(n(27)),c=a(n(2)),d=a(n(24)),f=a(n(34)),p=a(n(128)),m=n(417),h=a(n(3)),g=K(n(0)),E=n(4),y=a(n(43)),v=n(99),b=K(n(42)),T=a(n(475)),C=a(n(873)),S=a(n(5758)),O=a(n(231)),_=n(168),w=n(420),I=a(n(110)),R=n(2249),P=n(148),M=n(11),A=n(39),N=a(n(1188)),D=a(n(268)),L=a(n(335)),k=a(n(2293)),x=a(n(313)),U=a(n(2300)),j=["disabled"];function F(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(F=function(e){return e?n:t})(e)}function K(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=r(e)&&"function"!=typeof e)return{default:e};var n=F(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(a,i,s):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}var B=t.messages=(0,E.defineMessages)({image:{id:"containerServices.ViewContainer.image",defaultMessage:"Image: {image}"},noDetails:{id:"containerServices.ViewContainer.noDetails",defaultMessage:"No launch command, environment variables, or open ports specified."}}),W=(0,M.styled)("div")(o||(o=(0,p.default)(["\n  ","\n"])),(function(e){return e.disabled&&{pointerEvents:"none"}}));function H(e){var t=e.disabled,n=(0,f.default)(e,j);return g.default.createElement(W,{disabled:t},g.default.createElement(D.default,(0,d.default)({},n,{"aria-disabled":t})))}H.propTypes={disabled:h.default.bool};var z=t.EXPANDED_DETAILS_TEST_ID="expandedDetails";function G(e){var t=e.container,n=(0,O.default)(),a=(0,I.default)(b.default.REMOTE_CONTAINER_LOG,n,(0,c.default)({},v.CONTAINER_SERVICE_PARAMS.CONTAINER_NAME,t.name)),r=(0,g.useCallback)((function(e){e.preventDefault(),(0,R.openPopupWindow)("".concat(b.BASE_PATH).concat(a))}),[a]);return g.default.createElement(L.default,{as:H,to:a,eventName:y.default.CONTAINER_LOG_OPEN,icon:g.default.createElement(M.Box,{paddingLeft:"gridHalf"},g.default.createElement(P.ActionOpen,{className:k.default.linkIcon})),disabled:(0,w.isContainerServicePending)(n),message:T.default.openLogLabel,onClick:r})}G.propTypes={container:_.containerShape.isRequired};var Y=(0,M.styled)("div")(i||(i=(0,p.default)(["\n  padding: "," ",";\n  border-radius: ",";\n  background: ",";\n  position: absolute;\n  top: 0;\n  left: -",";\n  transform: translateY(-50%);\n"])),(0,M.getDynamicThemePropPx)("space.gridQuarter"),(0,M.getDynamicThemePropPx)("space.gridHalf"),(0,M.getDynamicThemePropPx)("radii.small"),A.colorInfo,(0,M.getDynamicThemePropPx)("space.grid1"));function V(){return g.default.createElement(Y,null,g.default.createElement(M.Text,{color:"inverted",size:"medium",marginBottom:0,message:C.default.publicEndpoint}))}function X(e){var t=e.container,n=e.isPublicEndpoint,a=t.command,r=t.environment,o=t.name,i=t.image,c=t.ports,d=(0,S.default)(!1),f=(0,u.default)(d,2),h=f[0],E=f[1],y=a&&a.length>0||r&&r.length>0||c&&c.length>0,v=g.default.createElement(M.Text,{as:"span",size:"medium"},i),b=g.default.createElement(M.Box,{marginLeft:"small",display:"flex",flexDirection:"column",minWidth:"0px"},g.default.createElement(M.Text,{marginBottom:0,weight:"bold"},g.default.createElement(x.default,{text:o})),g.default.createElement(M.Text,{truncate:!0,size:"medium",color:"muted",marginBottom:0,title:i,message:B.image,messageValues:{image:v}}),!y&&g.default.createElement(M.Text,{marginTop:"small",size:"medium",message:B.noDetails}));return g.default.createElement(M.Card,{"data-value":o,variant:"dark",display:"flex",position:"relative"},n&&g.default.createElement(V,null),g.default.createElement(M.Grid,{gridTemplateColumns:"minmax(0, 1fr) min-content",alignItems:"start",width:"100%"},g.default.createElement(m.ClassNames,null,(function(e){var n=e.css;return g.default.createElement(N.default,{showIcon:y,isOpen:h,onClickToggle:E,headingClassName:n(s||(s=(0,p.default)(["\n                display: flex;\n                justify-content: 'flex-start';\n              "]))),iconSize:A.iconSizeSnapshot,title:b,className:n(l||(l=(0,p.default)(["\n                width: 100%;\n              "])))},y&&g.default.createElement(M.Box,{marginTop:"large",marginLeft:"calc(".concat(A.iconSizeSnapshot," + ").concat(A.spacingSmall,")"),display:"flex",flexDirection:"column","data-testid":z},g.default.createElement(U.default,{container:t})))})),g.default.createElement(G,{container:t})))}X.propTypes={container:_.containerShape.isRequired,isPublicEndpoint:h.default.bool}},5758:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,o.useState)(e),n=(0,r.default)(t,2),a=n[0],i=n[1],s=(0,o.useCallback)((function(){return i(!a)}),[a]);return[a,s]};var r=a(n(27)),o=n(0)},5759:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(2)),o=a(n(169)),i=a(n(3)),s=a(n(0)),l=a(n(1253)),u=n(11);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=u.DeprecatedButton.withComponent("a");function p(e){var t=e.disabled?(0,o.default)(e,"href"):e;return s.default.createElement(f,t)}f.defaultProps=d(d({},u.DeprecatedButton.defaultProps),{},{display:"inline-block"}),p.propTypes={disabled:i.default.bool};t.default=(0,l.default)(p)},5760:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OSX_COMMAND_KEYS=t.MIMETYPE_TEXT_PLAIN=t.KEYCODE_X=t.KEYCODE_WINDOWS=t.KEYCODE_V=t.KEYCODE_RIGHT_OPTION=t.KEYCODE_RIGHT_COMMAND=t.KEYCODE_LEFT_CTRL=t.KEYCODE_LEFT_COMMAND=t.KEYCODE_C=t.KEYCODE_ALT=t.DEFAULT_CLIPBOARD_DATA=t.CLIPBOARD_HOTKEYS=void 0;var a=t.MIMETYPE_TEXT_PLAIN="text/plain",r=t.KEYCODE_LEFT_COMMAND=65511,o=t.KEYCODE_RIGHT_COMMAND=65512,i=(t.KEYCODE_WINDOWS=65515,t.KEYCODE_LEFT_CTRL=65507,t.KEYCODE_RIGHT_OPTION=65027,t.KEYCODE_ALT=65513,t.KEYCODE_C=99),s=t.KEYCODE_X=120,l=t.KEYCODE_V=118;t.OSX_COMMAND_KEYS=[r,o],t.CLIPBOARD_HOTKEYS=[i,s,l],t.DEFAULT_CLIPBOARD_DATA={data:"",type:a}},5761:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.useAccessDetails=function(){var e=u();return(0,r.useSelector)((function(t){return(0,i.default)(t,{instanceArn:e&&e.arn})}))},t.useInstance=u,t.useTunnelUrl=function(){var e=(0,o.default)().region;return(0,l.getLightsailConnectEndpoint)(e)};var r=n(28),o=a(n(674)),i=a(n(916)),s=n(151),l=n(156);function u(){var e=(0,o.default)(),t=e.instanceName,n=e.region;return(0,r.useSelector)((function(e){return(0,s.getHydratedInstance)(e,{instanceName:t,regionName:n})}))}},5867:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.destinationInfo,n=e.location,a=(0,o.default)({region:n.regionName}),i=(0,o.default)({stackId:t.id});return"//".concat(n.regionName,".").concat(r.AWS_CLOUD_FORMATION_STACK,"?").concat(a,"#/stack/detail?").concat(i)};var r=n(152),o=a(n(686))},5868:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.KEY_REMAPPINGS=void 0;var r=a(n(50)),o=a(n(6)),i=a(n(5)),s=a(n(2)),l=a(n(487)),u=a(n(5548)),c=a(n(273)),d=n(5760),f=n(5624),p=t.KEY_REMAPPINGS=(0,s.default)({},d.KEYCODE_RIGHT_OPTION,d.KEYCODE_ALT);t.default=(0,o.default)((function e(t,n,a){var o=this;(0,i.default)(this,e),(0,s.default)(this,"isOsxKeyboard",!1),(0,s.default)(this,"isCommandKeyHeld",!1),(0,s.default)(this,"hotkeySent",!1),(0,s.default)(this,"initializeKeyboard",(function(){var e=new u.default.Keyboard(o.keyboardElement);return c.default.addEventListener("blur",o.releaseAllKeys),e.onkeydown=o.onKeyDown,e.onkeyup=o.onKeyUp,e})),(0,s.default)(this,"sendKeys",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.forEach((function(e){o.client.sendKeyEvent(1,e)})),(0,r.default)(e).reverse().forEach((function(e){o.client.sendKeyEvent(0,e)}))})),(0,s.default)(this,"sendCopyHotkey",(function(){o.sendKeys([d.KEYCODE_LEFT_CTRL,d.KEYCODE_C])})),(0,s.default)(this,"sendCutHotkey",(function(){o.sendKeys([d.KEYCODE_LEFT_CTRL,d.KEYCODE_X])})),(0,s.default)(this,"sendPasteHotkey",(function(){o.sendKeys([d.KEYCODE_LEFT_CTRL,d.KEYCODE_V])})),(0,s.default)(this,"onKeyEvent",(function(e,t){var n=(0,f.isCommandKey)(t);if(!o.isOsxKeyboard&&n&&(o.isOsxKeyboard=!0),o.isOsxKeyboard)if(e){if(n)return o.isCommandKeyHeld=!0,!0;if(o.isCommandKeyHeld)return!0}else{if(n)return o.isCommandKeyHeld=!1,!o.hotkeySent&&o.isWindows?(o.sendKeys([d.KEYCODE_WINDOWS]),!1):(o.hotkeySent=!1,!0);if(o.isCommandKeyHeld){if(o.hotkeySent=!0,o.isWindows||(o.isCommandKeyHeld=!1),(0,f.isClipboardKey)(t))return!0;if(o.isWindows)return o.sendKeys([d.KEYCODE_WINDOWS,t]),!1}}return o.client.sendKeyEvent(e,p[t]||t),!1})),(0,s.default)(this,"releaseAllKeys",(0,l.default)((function(){return o.keyboard.reset()}),100)),(0,s.default)(this,"onKeyDown",(function(e){return o.onKeyEvent(1,e)})),(0,s.default)(this,"onKeyUp",(function(e){return o.onKeyEvent(0,e)})),t&&n&&(this.keyboardElement=t,this.client=n,this.isWindows=a,this.keyboard=this.initializeKeyboard())}))},5984:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.default}});var r=a(n(5985))},5985:function(e,t,n){"use strict";var a=n(1),r=n(9);Object.defineProperty(t,"__esModule",{value:!0}),t.BucketUploadEventSummary=M,t.default=A,t.messages=void 0;var o=a(n(27)),i=a(n(2)),s=a(n(3)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=r(e)&&"function"!=typeof e)return{default:e};var n=O(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(a,i,s):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(n(0)),u=n(4),c=n(150),d=n(70),f=a(n(5752)),p=a(n(5622)),m=a(n(231)),h=a(n(2335)),g=n(5702),E=n(130),y=n(2249),v=n(148),b=n(11),T=n(39),C=a(n(267)),S=a(n(5753));function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(O=function(e){return e?n:t})(e)}function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var I=t.messages=(0,u.defineMessages)({title:{id:"buckets.bucketUploadEventLog.title",defaultMessage:"Upload log for {bucketName}"},timeSummarySingular:{id:"buckets.bucketUploadEventLog.timeSummarySingular",defaultMessage:"You attempted to upload 1 file on {date} — {time}"},timeSummaryPlural:{id:"buckets.bucketUploadEventLog.timeSummaryPlural",defaultMessage:"You attempted to upload {value} files on {date} — {time}"},details:{id:"buckets.bucketUploadEventLog.details",defaultMessage:"Details"},successSummarySingle:{id:"buckets.bucketUploadEventLog.successSummarySingle",defaultMessage:"1 file uploaded successfully."},successSummaryPlural:{id:"buckets.bucketUploadEventLog.successSummaryPlural",defaultMessage:"{value} file uploaded successfully."},failedSummarySingle:{id:"buckets.bucketUploadEventLog.failedSummarySingle",defaultMessage:"1 file failed to upload."},failedSummaryPlural:{id:"buckets.bucketUploadEventLog.failedSummaryPlural",defaultMessage:"{value} files failed to upload."}}),R=function(e,t){return w(w({},e),{},{values:t})};function P(e){var t=e.children;return l.default.createElement(b.Grid,{gridTemplateColumns:"max-content 1fr ".concat(2*T.columnStandardInt,"px"),alignItems:"center"},t)}function M(e){var t=e.bucket,n=e.uploadEventData,a=n.complete,r=n.failed,o=n.failedTotal,i=n.successTotal,s=n.total,c=n.uploadEventId,d=new Date(+c),f={date:l.default.createElement(u.FormattedDate,{value:d,year:"numeric",month:"long",day:"2-digit"}),time:l.default.createElement(u.FormattedTime,{value:d})};return l.default.createElement(b.Stack,{padding:"large"},l.default.createElement(b.DeprecatedHeading,{level:"1",message:I.title,messageValues:{bucketName:t.name}}),l.default.createElement(b.Text,{pluralizedMessage:{count:s,one:R(I.timeSummarySingular,f),other:R(I.timeSummaryPlural,f)}}),l.default.createElement(b.Separator,{border:"dashed.default"}),l.default.createElement(b.DeprecatedHeading,{message:I.details}),l.default.createElement(b.Stack,{space:"large"},l.default.createElement(b.Stack,{space:"small"},l.default.createElement(b.Text,null,l.default.createElement(b.Text.Strong,{color:"danger.default",pluralizedMessage:{count:o,one:I.failedSummarySingle,other:I.failedSummaryPlural}})),l.default.createElement(b.List,null,r.map((function(e){return l.default.createElement(b.List.Item,{key:e.Key,paddingLeft:"none"},l.default.createElement(P,null,l.default.createElement(v.StatusInactiveSmall,{size:T.iconSizeSnapshot}),l.default.createElement(P.Key,{Key:e.Key}),l.default.createElement(P.Size,{Size:e.Size})))})))),l.default.createElement(b.Stack,{space:"small"},l.default.createElement(b.Text,null,l.default.createElement(b.Text.Strong,{pluralizedMessage:{count:i,one:I.successSummarySingle,other:I.successSummaryPlural}})),l.default.createElement(b.List,null,a.map((function(e){return l.default.createElement(b.List.Item,{key:e.Key,paddingLeft:"none"},l.default.createElement(P,null,l.default.createElement(v.StatusActiveSmall,{size:T.iconSizeSnapshot}),l.default.createElement(P.Key,{Key:e.Key}),l.default.createElement(P.Size,{Size:e.Size})))}))))))}function A(e){var t=e.defaultTimeoutMS,n=(0,m.default)(),a=(0,c.useParams)().uploadEventId,r=(0,f.default)(),i=(0,h.default)(r,t),s=(0,o.default)(i,2),u=s[0],g=s[1],E=(0,l.useState)(null),v=(0,o.default)(E,2),b=v[0],T=v[1];(0,l.useEffect)((function(){u(),(0,y.dispatchMessageToParentWindow)({type:d.UPLOAD_EVENT_WINDOW_MESSAGE_TYPES.READY})}),[u]);var S=(0,l.useCallback)((function(e){var t=e.type,a=e.data;if(t===d.UPLOAD_EVENT_WINDOW_MESSAGE_TYPES.DATA)return n&&(null==a?void 0:a.bucketName)===n.name?a:void 0}),[n]),O=(0,l.useCallback)((function(e){e.uploadEventId===a&&(g(),T(e))}),[T,g,a]);return(0,p.default)(O,S),(0,l.useEffect)((function(){n||r()}),[n,r]),b?l.default.createElement(M,{bucket:n,uploadEventData:b}):l.default.createElement(C.default,null)}P.propTypes={children:s.default.node.isRequired},P.Key=function(e){var t=e.Key;return l.default.createElement(b.Text.Strong,null,t)},P.Key.propTypes={Key:s.default.string.isRequired},P.Size=function(e){var t=e.Size;return l.default.createElement(S.default,{size:t},l.default.createElement(S.default.Formatted,null),l.default.createElement(S.default.Raw,null))},P.Size.propTypes={Size:s.default.number.isRequired},M.propTypes={bucket:E.bucketShape,uploadEventData:g.bucketUploadEventDataShape},A.propTypes={defaultTimeoutMS:s.default.number},A.defaultProps={defaultTimeoutMS:5e3}},5986:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.default}});var r=a(n(5987))},5987:function(e,t,n){"use strict";var a=n(1),r=n(9);Object.defineProperty(t,"__esModule",{value:!0}),t.messages=t.default=void 0;var o,i,s,l=a(n(128)),u=n(417),c=a(n(3)),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=r(e)&&"function"!=typeof e)return{default:e};var n=b(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(a,i,s):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(n(0)),f=a(n(1190)),p=n(4),m=n(198),h=n(11),g=a(n(33)),E=a(n(267)),y=a(n(5988)),v=a(n(5992));function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}var T=t.messages=(0,p.defineMessages)({title:{id:"remote.ContainerLog.title",defaultMessage:"Logs for {containerName}"},loadingLogs:{id:"remote.ContainerLog.loadingLogs",defaultMessage:"Loading next page of logs…"},loadNextLogs:{id:"remote.ContainerLog.loadNextLogs",defaultMessage:"Load next page"},noLogs:{id:"remote.ContainerLog.noLogs",defaultMessage:"No logs available"}}),C=256,S=(0,h.styled)(h.Box)(o||(o=(0,l.default)(["\n  white-space: nowrap;\n"]))),O=(0,h.styled)(h.Box)(i||(i=(0,l.default)(["\n  overflow-y: auto;\n"])));function _(){var e=(0,d.useRef)(),t=(0,p.useIntl)(),n=(0,v.default)(),a=n.applyFilter,r=n.containerName,o=n.fetchLogs,i=n.hasMoreLogs,c=n.isLoading,b=n.logs,_=n.logEvents,w=n.isInitialized,I=n.onScroll,R=(0,d.useMemo)((function(){return function(e){return e&&e.clientHeight?e.clientHeight:C}(e.current)}),[]);return w?d.default.createElement(h.Box,null,d.default.createElement(f.default,{title:t.formatMessage(T.title,{containerName:r})}),d.default.createElement(u.Global,{styles:(0,u.css)(s||(s=(0,l.default)(["\n          html,\n          body {\n            background: black;\n            overflow: hidden;\n          }\n        "])))}),d.default.createElement(O,{"data-testid":"scroller",bg:"black",paddingX:"standard",paddingY:"large",marginBottom:R,onScroll:I,height:"calc(100vh - ".concat(R,"px)")},_.map((function(e){return d.default.createElement(S,{key:e.id,as:"pre",color:"text.inverted",fontFamily:"code",fontSize:"body3",marginY:1},d.default.createElement(h.Text.Span,{color:"text.muted"},"[",(0,m.formatDateTimeLogLine)(e.createdAt),"] "),e.message)})),(!b||c)&&d.default.createElement(h.Box,{as:"pre",color:"text.inverted",fontFamily:"code",paddingY:"large"},d.default.createElement(h.Text.Code,{message:T.loadingLogs})),!c&&i&&d.default.createElement(h.ButtonGroup,{align:"left",paddingTop:"large",marginY:"small",buttonGap:"standard"},d.default.createElement(g.default,{message:T.loadNextLogs,onClick:function(){return o()},eventName:"loadNexPageContainerLogs"})),!!b&&!c&&0===_.length&&d.default.createElement(h.Box,{as:"pre",color:"text.inverted",fontFamily:"code",paddingY:"large"},d.default.createElement(h.Text.Code,{message:T.noLogs}))),d.default.createElement(y.default,{applyFilter:a,containerName:r,ref:e})):d.default.createElement(E.default,null)}_.propTypes={children:c.default.node};t.default=_},5988:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.default}});var r=a(n(5989))},5989:function(e,t,n){"use strict";var a=n(1),r=n(9);Object.defineProperty(t,"__esModule",{value:!0}),t.messages=t.default=void 0;var o,i=a(n(27)),s=a(n(2)),l=a(n(3)),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=r(e)&&"function"!=typeof e)return{default:e};var n=_(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(a,i,s):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(n(0)),c=n(4),d=n(98),f=n(40),p=a(n(43)),m=n(99),h=n(18),g=n(78),E=n(148),y=n(11),v=a(n(33)),b=a(n(5990)),T=a(n(49)),C=a(n(335)),S=a(n(122)),O=a(n(584));function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(_=function(e){return e?n:t})(e)}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){(0,s.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var R=t.messages=(0,c.defineMessages)({title:{id:"logs.LogControlBar.title",defaultMessage:"Logs for {containerName}"},timeDateLabel:{id:"logs.LogControlBar.timeDateLabel",defaultMessage:"Display entries from"},filterLabel:{id:"logs.LogControlBar.filterLabel",defaultMessage:"Filter"},filterInputPlaceholder:{id:"logs.LogControlBar.filterInputPlaceholder",defaultMessage:"Example: [DEBUG]"},includeLabel:{id:"logs.LogControlBar.includeLabel",defaultMessage:"Include"},excludeLabel:{id:"logs.LogControlBar.excludeLabel",defaultMessage:"Exclude"},refreshButtonLabel:{id:"logs.LogControlBar.refreshButtonLabel",defaultMessage:"Refresh"},timeZoneNotificaton:{id:"logs.LogControlBar.timeZoneNotification",defaultMessage:"Log events are in Coordinated Universal Time (UTC). The time range you choose is in your local time zone."}}),P="filterPatternTextInput";function M(e){var t=e.setTextFilter,n=e.value,a=e.filterType,r=e.setFilterType,o=(0,c.useIntl)();return u.default.createElement(y.Box,null,u.default.createElement(y.Text,{as:"label",size:"small",display:"block",marginBottom:0,message:R.filterLabel,htmlFor:P}),u.default.createElement(y.DeprecatedInput,{id:P,onChange:function(e){return t(e.target.value)},placeholder:o.formatMessage(R.filterInputPlaceholder),value:n}),u.default.createElement(y.RadioGroup,{defaultValue:a,onChange:r,name:"filterType",FieldSet:u.default.Fragment},u.default.createElement(y.Grid,{columnWidth:"max-content"},u.default.createElement(y.RadioGroup.DeprecatedOption,{value:m.FILTER_PATTERN_TYPE_INCLUDE},u.default.createElement(T.default,{message:R.includeLabel})),u.default.createElement(y.RadioGroup.DeprecatedOption,{value:m.FILTER_PATTERN_TYPE_EXCLUDE},u.default.createElement(T.default,{message:R.excludeLabel})))))}M.propTypes={setTextFilter:l.default.func,setFilterType:l.default.func,value:l.default.string,filterType:l.default.oneOf([m.FILTER_PATTERN_TYPE_EXCLUDE,m.FILTER_PATTERN_TYPE_INCLUDE])};var A={textFilter:"",filterType:m.FILTER_PATTERN_TYPE_INCLUDE,time:null},N=(0,f.createAction)("SET_TEXT_FILTER"),D=(0,f.createAction)("SET_FILTER_TYPE"),L=(0,f.createAction)("SET_TIME"),k=(0,f.handleActions)((o={},(0,s.default)(o,N,(function(e,t){var n=t.payload;return I(I({},e),{},{textFilter:n})})),(0,s.default)(o,D,(function(e,t){var n=t.payload;return I(I({},e),{},{filterType:n})})),(0,s.default)(o,L,(function(e,t){var n=t.payload;return I(I({},e),{},{time:n})})),o),{});var x=(0,u.forwardRef)((function(e,t){var n=e.applyFilter,a=e.containerName,r=function(){var e=(0,u.useReducer)(k,A),t=(0,i.default)(e,2),n=t[0],a=t[1];return I({state:n},(0,u.useMemo)((function(){return(0,d.bindActionCreators)({setTextFilter:N,setFilterType:D,setTime:L},a)}),[a]))}(),o=r.state,s=r.setTextFilter,l=r.setFilterType,c=r.setTime,f=o.textFilter,m=o.filterType,T=o.time;return u.default.createElement(y.Grid,{bg:"white",alignItems:"start",justifyContent:"space-between",position:"fixed",bottom:0,left:0,width:"100%",paddingX:"large",paddingTop:"small",paddingBottom:"standard",ref:t},u.default.createElement(y.Box,{position:"relative"},u.default.createElement(y.DeprecatedHeading,{level:"1",message:R.title,messageValues:{containerName:a},marginBottom:"small"}),u.default.createElement(O.default,{message:R.timeZoneNotificaton,status:g.NOTICE_TYPE_INFO}),u.default.createElement(y.Grid,{columnWidth:"max-content"},u.default.createElement(y.Box,null,u.default.createElement(b.default,{disableClock:!0,onChange:c,value:T,message:R.timeDateLabel})),u.default.createElement(M,{setTextFilter:s,value:f,filterType:m,setFilterType:l}),u.default.createElement(y.Box,{marginTop:"standard",paddingTop:"gridHalf"},u.default.createElement(v.default,{message:h.controlLabelMessages.apply,onClick:function(){return n(o)}}))),u.default.createElement(S.default.ContainerServices.ContainerLogs,{size:"medium"})),u.default.createElement(C.default,{icon:u.default.createElement(y.Box,{paddingLeft:"small"},u.default.createElement(E.ActionReload,null)),message:R.refreshButtonLabel,eventName:p.default.CONTAINER_LOG_REFRESH,onClick:function(){return n(o)}}))}));x.propTypes={applyFilter:l.default.func,containerName:l.default.string},x.defaultProps={applyFilter:function(){}};t.default=x},5990:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.default}});var r=a(n(5991))},5991:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,i,s,l=a(n(24)),u=a(n(34)),c=a(n(128)),d=n(417),f=a(n(306)),p=a(n(5212)),m=a(n(3)),h=a(n(0)),g=n(28),E=n(310),y=n(422),v=n(148),b=n(11),T=n(39),C=n(864),S=["value","onChange"],O=(0,d.css)(r||(r=(0,c.default)(["\n  .react-datetimerange-picker__wrapper {\n    -webkit-font-smoothing: antialiased;\n    color: ",";\n    padding: ","px;\n    border-radius: ","px;\n    border-color: ",";\n    font-family: ",";\n    line-height: normal;\n  }\n\n  .react-datetimerange-picker__button {\n    padding-bottom: 0;\n    padding-top: 0;\n  }\n\n  .react-datetimerange-picker__calendar-button {\n    order: -1;\n  }\n\n  .react-datetimerange-picker__inputGroup__amPm {\n    -moz-appearance: menulist-button; // Fix grey buttons in FF\n  }\n"])),C.colors.text.strong,C.space.small-C.space.gridQuarter,C.radii.small,T.colorControlsLinesLight,C.fonts.primary),_=(0,f.default)(b.Box)(o||(o=(0,c.default)(["\n  appearance: none;\n  border: none;\n"]))),w=(0,f.default)(v.UiFormClear)(i||(i=(0,c.default)(["\n  .react-datetimerange-picker__button:enabled &,\n  .react-datetimerange-picker__button:enabled & {\n    fill: ",";\n  }\n\n  .react-datetimerange-picker__button:enabled:hover &,\n  .react-datetimerange-picker__button:enabled:focus & {\n    fill: ",";\n  }\n"])),C.colors.text.default,C.colors.text.strong),I=(0,f.default)(v.ActionDate)(s||(s=(0,c.default)(["\n  .react-datetimerange-picker__calendar-button & {\n    fill: ",";\n  }\n\n  .react-datetimerange-picker__button:enabled:hover &,\n  .react-datetimerange-picker__button:enabled:focus & {\n    fill: ",";\n  }\n"])),C.colors.action.default,C.colors.action.hover);function R(e){var t=e.value,n=e.onChange,a=(0,u.default)(e,S),r=(0,g.useSelector)(E.getIsoLocale);return h.default.createElement(_,null,h.default.createElement(b.Text,(0,l.default)({as:"legend",marginBottom:0,size:"small"},(0,y.pickLocalizationProps)(a))),h.default.createElement(d.Global,{styles:O}),h.default.createElement(p.default,{calendarIcon:h.default.createElement(I,null),clearIcon:t?h.default.createElement(w,null):null,disableClock:!0,onChange:n,value:t,locale:r}))}_.defaultProps={as:"fieldset"},R.propTypes={children:m.default.node,value:m.default.arrayOf(m.default.instanceOf(Date)),onChange:m.default.func};t.default=R},5992:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=(0,f.default)(),t=(0,s.useState)(!1),n=(0,o.default)(t,2),a=n[0],g=n[1],v=(0,l.useDispatch)(),b=(0,p.default)(),T=(0,d.default)()||{},C=T.containerName,S=T.region,O=(0,s.useRef)(new Set),_=(0,s.useState)({}),w=(0,o.default)(_,2),I=w[0],R=w[1];(0,s.useEffect)((function(){b||e()}),[b,C,e]);var P=(0,s.useMemo)((function(){var e;return e={region:S},(0,r.default)(e,c.CONTAINER_SERVICE_PARAMS.CONTAINER_SERVICE_NAME,(0,i.default)(b,"name")),(0,r.default)(e,c.CONTAINER_SERVICE_PARAMS.CONTAINER_NAME,C),e}),[b,S,C]),M=(0,l.useSelector)((function(e){return(0,m.getContainerLogs)(e,P)})),A=(0,s.useMemo)((function(){return(0,i.default)(M,"logEvents",[])}),[M]),N=(M||{}).nextPageToken,D=(0,s.useState)(!!M),L=(0,o.default)(D,2),k=L[0],x=L[1],U=(0,s.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!a&&!O.current.has(N)){g(!0),O.current.add(N);var t=E(E({},P),{},{paginate:!1,pageToken:N},e);v((0,u.getContainerLog)(t))}}),[a,v,P,N]);(0,s.useEffect)((function(){k||U()}),[k,U]),(0,s.useEffect)((function(){!k&&M&&x(!0)}),[k,x,M]),(0,s.useEffect)((function(){g(!1)}),[A,g,N]);var j=(0,s.useCallback)((function(e){var t=y(e.target);!a&&t&&void 0!==N&&U(I)}),[U,a,I,N]);return{applyFilter:(0,s.useCallback)((function(e){v((0,u.clearContainerLogs)()),O.current.clear();var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},n=e.textFilter,a=e.filterType,r=e.time,i=a===c.FILTER_PATTERN_TYPE_EXCLUDE?"-":"";n&&(t.filterPattern="".concat(i,'"').concat(n,'"'));if(r){var s=(0,o.default)(r,2),l=s[0],u=s[1];t.startTime=(0,h.dateToTimestamp)(l),t.endTime=(0,h.dateToTimestamp)(u)}return t}(e);R(t),U(E(E({},t),{},{pageToken:void 0}))}),[v,U]),containerName:C,fetchLogs:function(){return U(I)},containerService:b,hasMoreLogs:N&&!O.current.has(N),isLoading:a,logEvents:A,logs:M,isInitialized:k,onScroll:j}},t.isScrollYMax=y;var r=a(n(2)),o=a(n(27)),i=a(n(36)),s=n(0),l=n(28),u=n(256),c=n(99),d=a(n(674)),f=a(n(5752)),p=a(n(231)),m=n(5993),h=n(198);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e){return e.scrollHeight<e.scrollTop+3*e.clientHeight}},5993:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.getContainerLogs=t.getAllContainerLogs=void 0;var r=a(n(36)),o=n(64),i=n(99),s=n(80),l=t.getAllContainerLogs=function(e){return e.containerLogs||{}};t.getContainerLogs=(0,o.createSelector)(l,s.extractRegionParam,(0,s.extractParam)(i.CONTAINER_SERVICE_PARAMS.CONTAINER_SERVICE_NAME),(0,s.extractParam)(i.CONTAINER_SERVICE_PARAMS.CONTAINER_NAME),(function(e,t,n,a){return(0,r.default)(e,[t,n,a])}))},5994:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.default}});var r=a(n(5995))},5995:function(e,t,n){"use strict";var a=n(1),r=n(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(3)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=r(e)&&"function"!=typeof e)return{default:e};var n=C(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(a,i,s):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(n(0)),s=a(n(1190)),l=n(4),u=n(175),c=n(18),d=a(n(674)),f=n(421),p=a(n(5752)),m=a(n(231)),h=n(415),g=n(2249),E=n(11),y=a(n(267)),v=a(n(1252)),b=a(n(5755)),T=n(118);function C(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(C=function(e){return e?n:t})(e)}var S=(0,l.defineMessages)({title:{id:"containerServices.ContainerServiceDeploymentVersion.title",defaultMessage:"Version details"},versionSummary:{id:"containerServices.ContainerServiceDeploymentVersion.versionSummary",defaultMessage:"{serviceName}, Version {versionNumber}"},deployedOnSummary:{id:"containerServices.ContainerServiceDeploymentVersion.deployedOnSummary",defaultMessage:"Deployment created on: {deploymentCreatedAt}"}});function O(){var e=(0,l.useIntl)(),t=(0,m.default)(),n=(0,f.useContainerServiceActions)(t).showCreateDeploymentModal,a=function(){var e=(0,d.default)().deploymentVersion,t=(0,f.useDeploymentVersions)(),n=t.isLoading,a=t.deployments;return{isLoading:n,deploymentVersion:!n&&a.find((function(t){return t.version===parseInt(e,10)}))}}(),r=a.isLoading,o=a.deploymentVersion,C=(0,p.default)(),O=(0,i.useCallback)((function(){n({deployment:o,onContinue:function(){(0,g.dispatchMessageToParentWindow)({createFromDeploymentVersion:o.version})}})}),[o,n]);return(0,i.useEffect)((function(){r||o||C()}),[r,o,C]),i.default.createElement(i.default.Fragment,null,i.default.createElement(E.ContentBoundary,{size:"standard"},i.default.createElement(E.Box,{paddingY:"large",paddingX:"standard"},r&&i.default.createElement(y.default,null),o&&i.default.createElement(i.default.Fragment,null,i.default.createElement(s.default,{title:e.formatMessage(S.versionSummary,{versionNumber:o.version,serviceName:t.name})}),i.default.createElement(E.Stack,{space:"small"},i.default.createElement(E.DeprecatedHeading,{message:S.title,level:"1"}),i.default.createElement(E.Text,{message:S.versionSummary,messageValues:{versionNumber:o.version,serviceName:i.default.createElement("strong",null,t.name)}}),i.default.createElement(E.Text,{message:S.deployedOnSummary,messageValues:{deploymentCreatedAt:(0,h.formatDateMessage)(o.createdAt)},size:"medium"}),i.default.createElement(E.Text,null,i.default.createElement(T.EditButton,{disabled:!!t.nextDeployment,iconPlacement:u.ICON_LEFT,message:c.containerServiceMessages.deployments.modifyAndRedeploy,onClick:O})),i.default.createElement(E.Box,{paddingTop:"standard"},i.default.createElement(b.default,{deployment:o})))))),i.default.createElement(v.default,null))}O.propTypes={children:o.default.node};t.default=O},5996:function(e,t,n){"use strict";var a=n(1),r=n(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(27)),i=a(n(215)),s=a(n(137)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=r(e)&&"function"!=typeof e)return{default:e};var n=w(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(a,i,s):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(n(0)),u=n(4),c=n(28),d=n(489),f=a(n(43)),p=n(248),m=a(n(907)),h=n(577),g=n(1201),E=a(n(867)),y=n(11),v=n(39),b=a(n(267)),T=a(n(194)),C=a(n(682)),S=n(167),O=n(2291),_=a(n(5213));function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(w=function(e){return e?n:t})(e)}var I=(0,u.defineMessages)({noEvents:{id:"databaseLogScreen.noLogsAvailable",defaultMessage:"No data available at this time. Please try again later."}});t.default=function(e){var t=(0,c.useDispatch)(),n=(0,l.useState)(!1),a=(0,o.default)(n,2),r=a[0],u=a[1],w=(0,l.useRef)(null),R=(0,E.default)(e),P=(0,g.getSafeRegionNameFromRouterProps)(e),M=R.databaseName,A=R.logStreamName,N=(0,c.useSelector)((function(e){return(0,h.getHydratedDatabaseByName)(e,R)})),D=(0,c.useSelector)((function(e){return(0,h.aggregateLogStreamEventsForDatabase)(e,R)})),L=null==N?void 0:N.logStreams,k=(0,l.useCallback)((function(){return t((0,d.requestRelationalDatabaseLogStreams)({region:P,relationalDatabaseName:M}))}),[t,P,M]),x=(0,l.useCallback)((function(e,n){t((0,d.requestRelationalDatabaseLogEvents)({logStreamName:A,relationalDatabaseName:M,region:P,pageToken:e,paginate:!1,isPagingBackwards:n}))}),[A,M,t,P]);(0,s.default)(L)&&k();var U=L,j=(0,m.default)(U),F=(null==D?void 0:D.length)>0;(0,l.useEffect)((function(){j!==U&&(u(!1),F||x())}),[U,j,x,F]);var K=(0,m.default)(D);(0,l.useEffect)((function(){null!=K&&K.length||null==D||!D.length||w&&(w.current.scrollTop=w.current.scrollHeight)}),[D,K]);var B=null!==D&&0===D.length;return l.default.createElement("div",{className:_.default.DatabaseLogScreen},D?l.default.createElement("div",null,l.default.createElement("div",{className:_.default.LogScreenControlPanel},l.default.createElement("div",null,l.default.createElement(S.Headline1,{className:O.DisplayHeadline3},A,".log"),l.default.createElement(y.Text,{marginBottom:0,weight:"bold"},N.name))),l.default.createElement("div",{className:_.default.LogScreenView,ref:w},!r&&!function(e,t){return e&&e[t]&&0===e[t][0].resourceLogEvents.length}(L,A)&&!B&&l.default.createElement(C.default,{element:"div",iconName:p.ICON_ADD,className:_.default.loadMoreIcon,onClick:function(){var e=L[A][0].nextBackwardToken;x(e,!0),u(!0)},eventName:f.default.DATABASE_GET_PREV_LOGS,size:v.iconSizeLarge}),r&&l.default.createElement(T.default,{className:_.default.loadMoreIcon}),B&&l.default.createElement(S.Pre,{message:I.noEvents}),D.map((function(e){var t=e.message;return l.default.createElement(S.Pre,{className:_.default.LogEventMessage,key:(0,i.default)()},t)})),!r&&!function(e,t){return e&&e[t]&&0===e[t].slice(-1)[0].resourceLogEvents.length}(L,A)&&!B&&l.default.createElement(C.default,{element:"div",iconName:p.ICON_ADD,className:_.default.loadMoreIcon,onClick:function(){var e=L[A].slice(-1)[0].nextForwardToken;x(e),u(!0)},eventName:f.default.DATABASE_GET_NEXT_LOGS,size:v.iconSizeLarge}),r&&l.default.createElement(T.default,{className:_.default.loadMoreIcon,size:v.iconSizeLarge}))):l.default.createElement(b.default,null))}},5997:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(24)),o=a(n(0)),i=n(4),s=n(28),l=a(n(704)),u=n(381),c=n(91),d=n(55),f=n(681),p=a(n(42)),m=a(n(2320)),h=n(5623),g=n(5703),E=n(1187),y=a(n(5867)),v=n(56),b=a(n(867)),T=a(n(1236)),C=n(11),S=a(n(5759)),O=a(n(131)),_=a(n(176)),w=a(n(1251)),I=a(n(1252)),R=a(n(2281)),P=n(167),M=a(n(5214)),A=a(n(5998)),N=(0,i.defineMessages)({creatingResources:{id:"ec2Instances.postCreatePage.creatingResources",defaultMessage:"Your Amazon EC2 instance is being created!"},createdResources:{id:"ec2Instances.postCreatePage.createdResources",defaultMessage:"Your Amazon EC2 instance has been created."},cloudFormation:{id:"ec2Instances.postCreatePage.cloudFormation",defaultMessage:"Lightsail uses AWS CloudFormation to create your Amazon EC2 resources."},createTakesTime:{id:"ec2Instances.postCreatePage.createTakesTime",defaultMessage:"It may take some time for all of your resources to be created and linked together."},resourcesWillBeInEc2:{id:"ec2Instances.postCreatePage.resourcesWillBeInEc2",defaultMessage:"Your instance and volume resources will appear in the {ec2ConsoleLink} when this process is completed."},ec2ConsoleLink:{id:"ec2Instances.postCreatePage.resourcesWillBeInEc2.linkEc2Console",defaultMessage:"Amazon EC2 console"},checkStatus:{id:"ec2Instances.postCreatePage.checkStatus",defaultMessage:"To check the status of this process, {cloudFormationStackLink}."},cloudFormationStackLink:{id:"ec2Instances.postCreatePage.checkStatus.linkCloudFormationStack",defaultMessage:"view the stack in the AWS CloudFormation console"},learnMore:{id:"ec2Instances.postCreatePage.learnMore",defaultMessage:"Learn more about how your Amazon EC2 resources are created."},returnHome:{id:"ec2Instances.postCreatePage.returnToLightsail",defaultMessage:"Return to Lightsail"},goToEc2:{id:"ec2Instances.postCreatePage.goToEc2Console",defaultMessage:"Go to Amazon EC2"}}),D=(0,v.isEnabled)(d.AWS_Q);function L(e){var t=e.cloudFormationStackRecord,n=t.state===f.STATUS_STARTED;return o.default.createElement(o.default.Fragment,null,o.default.createElement(T.default,(0,r.default)({},D?{__disableRuntimeDrawers:!0}:{__disableRuntimeDrawers:!1},{toolsHide:!0,navigationHide:!0,footerSelector:u.FOOTER_SELECTOR,content:o.default.createElement("div",{className:M.default.PostCreateScreen},o.default.createElement(l.default,{src:m.default,className:M.default.primaryImage,"aria-hidden":"true"}),o.default.createElement(P.Headline1,{className:M.default.titleText,message:n?N.creatingResources:N.createdResources}),o.default.createElement(P.Body1,{bold:!0,className:M.default.centeredText,message:N.cloudFormation}),n&&o.default.createElement(P.Body1,{bold:!0,className:M.default.centeredText,message:N.createTakesTime}),o.default.createElement(P.Body1,{className:M.default.centeredText,message:N.resourcesWillBeInEc2,messageValues:{ec2ConsoleLink:o.default.createElement(_.default,{href:(0,E.getEc2ConsoleLink)(t,E.EC2_INSTANCES_VIEW),message:N.ec2ConsoleLink})}}),o.default.createElement(P.Body1,{className:M.default.centeredText,message:N.checkStatus,messageValues:{cloudFormationStackLink:o.default.createElement(_.default,{href:(0,y.default)(t),message:N.cloudFormationStackLink})}}),o.default.createElement(A.default,{cloudFormationStackRecord:t}),o.default.createElement(P.Body2,{className:M.default.centeredText},o.default.createElement(O.default,{slug:c.ARTICLE_EC2_RESOURCE_CREATION,message:N.learnMore})),o.default.createElement(C.ButtonGroup,{className:M.default.buttons,marginY:"small",buttonGap:"standard"},o.default.createElement(R.default,{to:p.default.EXPORTS,message:N.returnHome,size:"large"}),o.default.createElement(S.default,{href:(0,E.getEc2ConsoleLink)(t,E.EC2_INSTANCES_VIEW),message:N.goToEc2,size:"large"})))})),o.default.createElement(w.default,{id:u.FOOTER_SELECTOR_ID}),o.default.createElement(I.default,null))}L.propTypes={cloudFormationStackRecord:h.cloudFormationStackRecordShape};t.default=(0,s.connect)((function(e,t){var n=(0,b.default)(t);return{cloudFormationStackRecord:(0,g.getCloudFormationStackRecordByName)(e,n)}}))(L)},5998:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=g;var r=a(n(0)),o=n(4),i=n(78),s=n(5623),l=a(n(5867)),u=n(11),c=n(39),d=a(n(176)),f=a(n(1198)),p=n(213),m=a(n(5215)),h=(0,o.defineMessages)({labelName:{id:"ec2Instances.postCreatePage.stackName",defaultMessage:"Stack name:"},labelId:{id:"ec2Instances.postCreatePage.stackId",defaultMessage:"Stack ID:"},noticeDelete:{id:"ec2Instances.postCreatePage.noticeDelete",defaultMessage:"If you delete this AWS CloudFormation stack, the related Amazon EC2 resources that were created will also be deleted."}});function g(e){var t=e.cloudFormationStackRecord,n=t.name;return r.default.createElement(p.InfoBoxRow,{className:m.default.CloudFormationStackRecordOverviewItem},r.default.createElement(p.InfoBox,null,r.default.createElement(u.Text,{message:h.labelName,weight:"bold",marginBottom:0}),r.default.createElement(u.Text,{marginBottom:0},r.default.createElement(d.default,{href:(0,l.default)(t)},n)),r.default.createElement(p.InfoBoxFooter,null,r.default.createElement(f.default,{iconSize:c.iconSizeLarge,status:i.NOTICE_TYPE_WARNING},r.default.createElement(u.Text,{message:h.noticeDelete,size:"medium",weight:"bold",marginBottom:0})))))}g.propTypes={cloudFormationStackRecord:s.cloudFormationStackRecordShape}},5999:function(e,t,n){"use strict";var a=n(1),r=n(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return s.default.createElement(h.default,null,s.default.createElement(_,null))};var o=a(n(27)),i=a(n(5548)),s=S(n(0)),l=a(n(1190)),u=n(4),c=n(683),d=a(n(674)),f=n(216),p=a(n(2289)),m=a(n(6e3)),h=S(n(679)),g=a(n(6001)),E=a(n(6002)),y=a(n(5217)),v=a(n(6004)),b=a(n(6012)),T=n(5761);function C(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(C=function(e){return e?n:t})(e)}function S(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=r(e)&&"function"!=typeof e)return{default:e};var n=C(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(a,i,s):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}var O=(0,u.defineMessages)({pageTitle:{id:"ls.terminal.pageTitle",defaultMessage:"Terminal"}});function _(){var e=(0,u.useIntl)(),t=(0,d.default)(),n=t.instanceName,a=t.protocol,r=void 0===a?c.PROTOCOL_SSH:a,C=t.region,S=(0,T.useInstance)(),_=(0,T.useAccessDetails)(),w=(0,T.useTunnelUrl)(),I=(0,h.useNotificationsContext)().notifications;(0,g.default)(S);var R=(0,s.useState)(null),P=(0,o.default)(R,2),M=P[0],A=P[1],N=(0,s.useState)(0),D=(0,o.default)(N,2),L=D[0],k=D[1],x="".concat(n," – ").concat(e.formatMessage(O.pageTitle)," | Lightsail"),U="".concat(n,"/").concat(r);return S&&(0,f.recordCustomerReadyEvent)(),s.default.createElement("div",{className:y.default.TerminalScreen},s.default.createElement(l.default,{title:x}),s.default.createElement("div",{className:y.default.remoteViewer},s.default.createElement(m.default,{hasItems:!!I.length,flashbar:s.default.createElement(p.default,{items:I})}),S&&s.default.createElement(E.default,{connectionProtocol:r,isConnectionWindow:!0,instance:S}),s.default.createElement(v.default,{clientStatus:M,instancePasswordQuery:_&&_.instancePasswordQuery,instance:S,onStatusChange:function(e){return A(e)},protocol:r,region:C,token:U,tunnelUrl:w})),M&&!I.length&&s.default.createElement(b.default,{clientStatus:M,passwordAttempts:L,incrementPasswordAttempts:function(){return k(L+1)},reconnect:function(){return A(new i.default.Status(c.CLIENT_STATE_IDLE))}}))}},6e3:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return u}));var a=n(591),r=n.n(a),o=n(0),i=n.n(o),s=n(671),l=r()("div",{target:"e1auqlhx0"})("position:sticky;top:0;padding:",(function(e){return e.hasItems?"".concat(s.a," ").concat(s.d):0}),";");function u(e){var t=e.hasItems,n=void 0===t||t,a=e.flashbar;return i.a.createElement(l,{hasItems:n},a)}},6001:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=!(0,i.isEnabled)(o.IPV6_LS_CONNECT)&&(e&&(0,s.isIPv6OnlyInstance)(e)),n=(e||{}).platform;(0,c.useNoticeByCondition)({notice:{type:"error",id:"lightsailConnectUnsupportedIPv6",header:r.default.createElement(d.LightsailConnectUnavailableIpv6Alert.Header,{platform:n}),content:r.default.createElement(l.default,{size:"xs"},r.default.createElement(u.default,{margin:"n"},r.default.createElement(d.LightsailConnectUnavailableIpv6Alert.Description,{platform:n})),r.default.createElement(u.default,{margin:"n","data-testid":"lightsailConnectLearnMore"},r.default.createElement(d.LightsailConnectUnavailableIpv6Alert.LearnMoreLink,{color:"inverted",platform:n})))},shouldShowNotice:t})};var r=a(n(0)),o=n(55),i=n(56),s=n(868),l=a(n(567)),u=a(n(287)),c=n(2354),d=n(5704)},6002:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=R,t.messages=void 0;var r=a(n(2)),o=a(n(47)),i=a(n(3)),s=a(n(0)),l=n(4),u=n(210),c=n(91),d=a(n(6003)),f=n(683),p=n(149),m=a(n(42)),h=n(2277),g=n(208),E=a(n(110)),y=a(n(131)),v=a(n(268)),b=a(n(49)),T=n(167),C=a(n(5216));function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=t.messages=(0,l.defineMessages)({connectAccessibilityWarningParagraph1:{id:"ls.connectAccessibilityWarning.paragraph1",defaultMessage:"Our browser-based {connectionProtocol} client isn't compatible with most accessibility devices or software at this time. You can continue and try to connect using the browser, but your device or software might not work."},connectAccessibilityWarningParagraph2:{id:"ls.connectAccessibilityWarning.paragraph2",defaultMessage:"You can still use your own compatible {connectionProtocol} client with your device or software to connect to your instance. {furtherExplanation}"},furtherRDPExplanation:{id:"ls.connectAccessibilityWarning.furtherRDPExplanation",defaultMessage:"You'll have to use the default user name and retrieve your password to connect. {learnMore}"},furtherSSHExplanation:{id:"ls.connectAccessibilityWarning.furtherSSHExplanation",defaultMessage:"You can still use your own compatible SSH client with your device or software to connect to your instance. {learnMore}"},getRPDCredentialsLink:{id:"ls.connectAccessibilityWarning.getRPDCredentialsLink",defaultMessage:"Get default RDP credentials"},learnMoreSSH:{id:"ls.connectAccessibilityWarning.learnMoreSSH",defaultMessage:"Learn how to connect using your own SSH client"}}),w=u.ARIA_LIVE_VALUES.ASSERTIVE,I=u.ARIA_LIVE_VALUES.OFF;function R(e){var t,n=e.connectionProtocol,a=e.instance,i=e.isConnectionWindow,l=n===f.PROTOCOL_RDP,h=(0,E.default)(m.default.INSTANCE_CONNECT,a,{"#":p.INSTANCE_CREDENTIALS_SECTION_ID}),g=l?_.getRPDCredentialsLink:_.learnMoreSSH,S=s.default.createElement(v.default,{to:h,message:g}),R=l?s.default.createElement(b.default,{message:_.furtherRDPExplanation,values:{learnMore:S}}):S,P=i?s.default.createElement(y.default,{external:!1,slug:l?c.ARTICLE_WINDOWS_RDP:c.ARTICLE_SSH,message:d.default.connectionClient,messageValues:{protocol:n}}):R,M=O(O({},_.connectAccessibilityWarningParagraph1),{},{values:{connectionProtocol:n}}),A=O(O({},_.connectAccessibilityWarningParagraph2),{},{values:{connectionProtocol:n,furtherExplanation:P}}),N=(t={},(0,r.default)(t,u.attributes.ariaLive,i?w:I),(0,r.default)(t,"role",u.roles.alert),t);return s.default.createElement("div",N,s.default.createElement(T.Body2,{className:C.default.visuallyHidden,message:M}),s.default.createElement(T.Body2,{className:(0,o.default)((0,r.default)({},C.default.visuallyHidden,i)),message:A}))}R.propTypes={connectionProtocol:h.protocolType.isRequired,instance:g.instanceShape.isRequired,isConnectionWindow:i.default.bool}},6003:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(0,n(4).defineMessages)({connectionClient:{id:"ls.docsLinkText.connectionClient",defaultMessage:"Connect using your own {protocol} client"}});t.default=a},6004:function(e,t,n){"use strict";var a=n(1),r=n(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(5)),i=a(n(6)),s=a(n(44)),l=a(n(10)),u=a(n(14)),c=a(n(13)),d=a(n(2)),f=a(n(487)),p=a(n(273)),m=a(n(47)),h=a(n(1265)),g=a(n(3)),E=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=r(e)&&"function"!=typeof e)return{default:e};var n=N(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(a,i,s):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(n(0)),y=n(55),v=n(683),b=n(22),T=a(n(2277)),C=n(208),S=n(69),O=n(56),_=n(868),w=n(11),I=n(39),R=a(n(336)),P=a(n(6005)),M=a(n(6006)),A=a(n(5229));function N(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(N=function(e){return e?n:t})(e)}function D(e){var t=L();return function(){var n,a=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,u.default)(this,n)}}function L(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(L=function(){return!!e})()}(t.default=function(e){(0,l.default)(n,e);var t=D(n);function n(e){var a;return(0,o.default)(this,n),a=t.call(this,e),(0,d.default)((0,s.default)(a),"onClipboardChange",(function(e){a.setState({clipboardData:e})})),(0,d.default)((0,s.default)(a),"closeClipboard",(function(){a.state.showClipboard&&(a.toggleShowClipboard(),a.focusEventElement())})),(0,d.default)((0,s.default)(a),"toggleShowClipboard",(function(){a.setState((function(e){return{showClipboard:!e.showClipboard}}))})),(0,d.default)((0,s.default)(a),"registerDisplayRef",(function(e){a.displayElement=e})),(0,d.default)((0,s.default)(a),"registerEventRef",(function(e){a.eventElement=e})),(0,d.default)((0,s.default)(a),"registerKeyboardRef",(function(e){a.keyboardElement=e})),a.state={clipboardData:{data:""},showClipboard:!1},a.focusEventElement=(0,f.default)((function(){a.eventElement&&!a.state.showClipboard&&p.default.document.activeElement===p.default.document.body&&a.eventElement.focus()}),20),a}return(0,i.default)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.instancePasswordQuery,n=e.tunnelUrl,a=e.token,r=e.protocol,o=e.region,i=e.onStatusChange,s=void 0===i?function(){}:i;this.guacamoleInterface=new M.default({instancePasswordQuery:t,tunnelUrl:n,token:a,protocol:r,region:o,onClipboardChange:this.onClipboardChange,onStatusChange:s,eventElement:this.eventElement,displayElement:this.displayElement,keyboardElement:this.keyboardElement}),this.guacamoleInterface.connect()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.clientStatus,a=t.instancePasswordQuery,r=t.instance;a&&a.length&&e.instancePasswordQuery!==a&&this.guacamoleInterface.setPasswordQuery(a),e.clientStatus&&e.clientStatus.code!==v.CLIENT_STATE_IDLE&&n&&n.code===v.CLIENT_STATE_IDLE&&this.guacamoleInterface.reconnect(),r&&this.guacamoleInterface.setInstance(r)}},{key:"componentWillUnmount",value:function(){this.guacamoleInterface.disconnect()}},{key:"render",value:function(){var e=this.state,t=e.showClipboard,n=e.clipboardData,a=this.props,r=a.instance,o=a.protocol===v.PROTOCOL_RDP,i=!!this.guacamoleInterface;return E.default.createElement("div",{className:(0,m.default)(A.default.GuacamoleInterface,(0,d.default)({},A.default.hasOnScreenKeyboard,o))},E.default.createElement("div",{className:A.default.displayElement,ref:this.registerDisplayRef}),E.default.createElement(h.default,{active:!t,focusTrapOptions:{clickOutsideDeactivates:!0}},E.default.createElement("input",{"aria-hidden":"true",autoFocus:!0,className:A.default.eventElement,onBlur:this.focusEventElement,onChange:function(){},onClick:this.closeClipboard,ref:this.registerEventRef,spellCheck:"false",value:n.data})),o&&E.default.createElement("div",{className:A.default.keyboardContainer},E.default.createElement("div",{className:A.default.keyboardElement,ref:this.registerKeyboardRef})),E.default.createElement("footer",{className:A.default.footer},r&&r.blueprint&&E.default.createElement("div",null,E.default.createElement(R.default,{className:A.default.blueprintIcon,imagePath:r.blueprint.thumbnailUrl,resourceType:b.TYPE_INSTANCE,sizePx:I.iconSizeLarge}),E.default.createElement("div",{className:A.default.instanceInfo},E.default.createElement(w.Text,{size:"large",marginBottom:0},r.name),E.default.createElement(w.Text,{size:"medium",marginBottom:0},(0,O.isEnabled)(y.IPV6_LS_CONNECT)&&(0,_.isIPv6OnlyInstance)(r)?r.ipv6Address:r.publicIpAddress))),i&&E.default.createElement(P.default,{clipboardData:n,isOpen:t,toggleClipboard:this.toggleShowClipboard,sendClipboard:this.guacamoleInterface.clipboardProxy.onLocalClipboardChange})))}}]),n}(E.PureComponent)).propTypes={instance:C.instanceShape,instancePasswordQuery:g.default.string,tunnelUrl:g.default.string,protocol:T.default,region:S.regionName,token:g.default.string,onStatusChange:g.default.func,clientStatus:v.clientStatusShape}},6005:function(e,t,n){"use strict";var a=n(1),r=n(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(5)),i=a(n(6)),s=a(n(44)),l=a(n(10)),u=a(n(14)),c=a(n(13)),d=a(n(2)),f=a(n(487)),p=a(n(3)),m=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=r(e)&&"function"!=typeof e)return{default:e};var n=_(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(a,i,s):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(n(0)),h=n(4),g=a(n(2241));n(2323),n(5218);var E=n(683),y=n(248),v=n(885),b=n(39),T=a(n(337)),C=a(n(2372)),S=n(167),O=a(n(5219));function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(_=function(e){return e?n:t})(e)}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function I(e){var t=R();return function(){var n,a=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,u.default)(this,n)}}function R(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(R=function(){return!!e})()}var P=(0,h.defineMessages)({remoteClipboard:{id:"terminal.clipboardPopover.title",defaultMessage:"Remote clipboard"}}),M=t.default=function(e){(0,l.default)(n,e);var t=I(n);function n(e){var a;(0,o.default)(this,n),a=t.call(this,e),(0,d.default)((0,s.default)(a),"onFocus",(0,f.default)((function(){a.textInputRef.current&&a.textInputRef.current.select()}))),(0,d.default)((0,s.default)(a),"onBlur",(0,f.default)((function(){a.textInputRef.current&&a.textInputRef.current.focus()}))),(0,d.default)((0,s.default)(a),"onChange",(function(e){a.setState({value:e}),a.props.sendClipboard(e)}));var r=e.clipboardData;return a.state={hasNewClipboardData:!!r.data,value:r.data},a.textInputRef=m.default.createRef(),a}return(0,i.default)(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.clipboardData,n=t.data!==this.props.clipboardData.data,a={};n&&(a.value=t.data),this.setState(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){(0,d.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({hasNewClipboardData:n},a))}},{key:"componentDidUpdate",value:function(e){var t=e.clipboardData;this.textInputRef.current&&this.props.clipboardData!==t.data&&(this.textInputRef.current.scrollTop=0)}},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.toggleClipboard,a=this.state,r=a.hasNewClipboardData,o=a.value;return m.default.createElement("div",null,m.default.createElement(g.default,{attachment:"bottom right",targetAttachment:"bottom right"},m.default.createElement("div",{className:O.default.buttonContainer},m.default.createElement(C.default,{iconName:y.ICON_CLIPBOARD,size:b.iconSizeLarge,className:O.default.actionIcon,animation:r?"callout.bounce":null,runOnMount:!0,duration:800,onClick:n}),r&&m.default.createElement(C.default,{iconName:y.ICON_BADGE_ALERT,size:b.iconSizeLarge,className:O.default.buttonBadge,animation:"transition.expandIn",runOnMount:!0,duration:400})),t&&m.default.createElement("div",{className:O.default.ClipboardPopover},m.default.createElement(S.Headline4,{message:P.remoteClipboard,className:O.default.title}),m.default.createElement(T.default,{fullWidth:!0,type:v.TYPE_TEXT_AREA,autoFocus:!0,inputClassName:O.default.inputArea,rows:11,value:o,ref:this.textInputRef,onChangeText:this.onChange}))))}}]),n}(m.PureComponent);M.propTypes={clipboardData:E.clipboardDataShape,isOpen:p.default.bool,toggleClipboard:p.default.func.isRequired,sendClipboard:p.default.func}},6006:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(6)),o=a(n(5)),i=a(n(2)),s=a(n(487)),l=(a(n(273)),n(683)),u=a(n(211)),c=a(n(6007)),d=a(n(6008)),f=a(n(5868)),p=a(n(6009)),m=a(n(6010)),h=n(5624);t.default=(0,r.default)((function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=n.instancePasswordQuery,r=n.tunnelUrl,g=n.token,E=n.protocol,y=n.region,v=n.displayElement,b=n.eventElement,T=n.keyboardElement,C=n.onStatusChange,S=n.onClipboardChange;if((0,o.default)(this,e),(0,i.default)(this,"onStatusChange",(0,s.default)((function(e){e.code===l.CLIENT_STATE_CONNECTED&&t.clipboardProxy.sendClipboardData(),(0,u.default)(t.onClientStatusChange,e)}),100)),(0,i.default)(this,"onClipboardContentChange",(0,s.default)((function(e){(0,u.default)(t.onClipboardChange,e)}),100)),(0,i.default)(this,"setPasswordQuery",(function(e){t.clientProxy.setConnectionData({instancePasswordQuery:e})})),(0,i.default)(this,"connect",(function(){return t.clientProxy.connect()})),(0,i.default)(this,"reconnect",(function(){return t.clientProxy.connect()})),(0,i.default)(this,"disconnect",(function(){t.clientProxy.disconnect()})),r&&g&&E&&v&&b){this.onClientStatusChange=C,this.onClipboardChange=S;var O=(0,h.isWindowsProtocol)(E);this.clientProxy=new c.default({displayElement:v,tunnelUrl:r,region:y,token:g,instancePasswordQuery:a,onStatusChange:C,protocol:E}),this.client=this.clientProxy.client,this.setInstance=this.clientProxy.setInstance,this.keyboardProxy=new f.default(b,this.client,O),this.mouseProxy=new p.default(b,this.client,O),this.clipboardProxy=new d.default({element:b,client:this.client,keyboard:this.keyboardProxy,mouse:this.mouseProxy,onClipboardChange:this.onClipboardContentChange,isWindows:O}),this.onScreenKeyboardProxy=new m.default(T,this.client,O)}}))},6007:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.getConnectionData=t.default=t.STANDARD_OS_DPI=t.GUAC_PARAM_DEFAULTS=void 0,t.getConnectionDataQuery=M,t.getSignedConnectionData=function(e){return A.apply(this,arguments)};var r=a(n(7)),o=a(n(6)),i=a(n(5)),s=a(n(34)),l=a(n(35)),u=a(n(2)),c=a(n(487)),d=a(n(5548)),f=a(n(273)),p=n(5220),m=a(n(498)),h=n(381),g=n(73),E=n(683),y=a(n(211)),v=a(n(686)),b=a(n(71)),T=n(187),C=n(593),S=a(n(372)),O=n(5624),_=["tunnelUrl","region"];function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){(0,u.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var R=t.GUAC_PARAM_DEFAULTS={token:"x",GUAC_DATA_SOURCE:"parkside",GUAC_ID:"x",GUAC_TYPE:"c",GUAC_IMAGE:"image/png"},P=t.STANDARD_OS_DPI=96;function M(e){var t=e.instancePasswordQuery,n=e.token,a=e.width,r=e.height,o=e.dpi,i=I(I(I({},R),t?{GUAC_INSTANCE_PASSWORD:t}:{}),{},{GUAC_INSTANCE_TOKEN:n,GUAC_WIDTH:a,GUAC_HEIGHT:r,GUAC_DPI:o});return(0,v.default)(i)}function A(){return(A=(0,l.default)(r.default.mark((function e(t){var n,a,o,i,l,u,c;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.tunnelUrl,a=t.region,o=(0,s.default)(t,_),i=M(o),l=new URL(n),!(u=(0,C.getTangerineBoxCredentials)()).needsRefresh()){e.next=7;break}return e.next=7,u.getPromise();case 7:return c=(0,p.sign)({host:l.host,path:"".concat(l.pathname,"?").concat(i),region:a,service:h.SERVICE_ID,signQuery:!0},u),e.abrupt("return",c.path.split("?")[1]);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var N=t.getConnectionData=function(){return Promise.resolve(M.apply(void 0,arguments))};t.default=(0,o.default)((function e(t){var n=this,a=t.displayElement,o=t.instancePasswordQuery,s=void 0===o?null:o,p=t.protocol,h=t.tunnelUrl,v=t.region,C=t.token,_=t.onStatusChange;(0,i.default)(this,e),(0,u.default)(this,"status",null),(0,u.default)(this,"initializeDisplay",(function(){n.displayElement.appendChild(n.client.getDisplay().getElement()),f.default.addEventListener("resize",n.debouncedResize)})),(0,u.default)(this,"onResize",(function(){var e=(0,O.getElementDimensions)(n.displayElement),t=e.width,a=e.height;n.client.sendSize(t,a)})),(0,u.default)(this,"debouncedResize",(0,c.default)(this.onResize,200)),(0,u.default)(this,"initializeTunnel",(function(e){var t=new d.default.WebSocketTunnel(e);return t.onerror=n.setConnectionStatus,t.onstatechange=n.receiveTunnelStatusCode,t})),(0,u.default)(this,"initializeClient",(function(){var e=new d.default.Client(n.tunnel);return e.onerror=n.setConnectionStatus,e.onstatechange=n.receiveStatusCode,e})),(0,u.default)(this,"logStatus",(function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return b.default.log({key:e,value:a,detail:{code:t.code,isError:t.isError(),message:t.message,protocol:n.protocol}})})),(0,u.default)(this,"logTime",(function(e,t){return b.default.log({key:e,value:t})})),(0,u.default)(this,"logDisconnect",(function(e){var t=n.instance||{},a=t.arn,r=t.blueprintId,o=t.bundleId,i=t.isStaticIp,s=t.supportCode;b.default.log({key:g.METRIC_NAMES.GUAC_DISCONNECT,value:1,detail:{arn:a,blueprintId:r,bundleId:o,isStaticIp:i,connectionDuration:Date.now()-n.connectStartTime,lastSignInSessionId:m.default.load("last-sign-in-session"),protocol:n.protocol,tunnelUUID:n.tunnel.uuid,isStatusError:e,supportCode:s}})})),(0,u.default)(this,"receiveStatusCode",(function(e){n.setConnectionStatus(new d.default.Status(e))})),(0,u.default)(this,"receiveTunnelStatusCode",(function(e){e===E.TUNNEL_STATE_CONNECTING?n.setConnectionStatus(new d.default.Status(E.CLIENT_STATE_CONNECTING)):e===E.TUNNEL_STATE_OPEN&&(n.logTime(g.METRIC_NAMES.GUAC_CONNECTION_TIME,Date.now()-n.connectStartTime),(0,T.trackCustomEvent)({eventType:"connect",eventContext:g.METRIC_NAMES.GUAC_CONNECTION_TIME,eventValue:"".concat(e,"_").concat(n.protocol),eventDetail:Date.now()-n.connectStartTime}),n.setConnectionStatus(new d.default.Status(E.CLIENT_STATE_CONNECTED)))})),(0,u.default)(this,"setConnectionData",(function(e){n.connectionData=I(I({},n.connectionData),e)})),(0,u.default)(this,"setConnectionStatus",(function(e){n.status=e;var t=I({},e);512===e.code&&void 0===e.message&&(t.message="Error on socket.onerror in PsGuacCommonJS"),e.isError()?(512===e.code&&("Incomplete instruction."===e.message?n.logStatus(g.METRIC_NAMES.ON_TUNNEL_CLOSE,t):"No tunnels to try."===e.message?n.logStatus(g.METRIC_NAMES.ON_TUNNEL_ERROR,t):n.logStatus(g.METRIC_NAMES.SOCKET_ON_ERROR,t)),n.logStatus(g.METRIC_NAMES.GUAC_STATUS_ERROR,t),n.logStatus("".concat(g.METRIC_NAMES.GUAC_STATUS_ERROR,"_").concat(e.code),t),(0,T.trackCustomEvent)({eventType:"connect",eventContext:g.METRIC_NAMES.GUAC_STATUS_ERROR,eventDetail:t.message,eventValue:"".concat(e.code,"_").concat(n.protocol)}),n.logTime(g.METRIC_NAMES.GUAC_ERROR_TIME,Date.now()-n.connectStartTime),(0,T.trackCustomEvent)({eventType:"connect",eventContext:g.METRIC_NAMES.GUAC_ERROR_TIME,eventValue:Date.now()-n.connectStartTime,eventDetail:"".concat(e.code,"_").concat(n.protocol)}),n.client.disconnect(),n.logDisconnect(!0)):n.logStatus(g.METRIC_NAMES.GUAC_STATUS_ERROR,e,0),(0,y.default)(n.onStatusChange,e)})),(0,u.default)(this,"resetConnectionStatus",(function(){n.setConnectionStatus(new d.default.Status(E.CLIENT_STATE_IDLE))})),(0,u.default)(this,"connect",(0,l.default)(r.default.mark((function e(){var t,a,o,i;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.resetConnectionStatus(),t=(0,O.getElementDimensions)(n.displayElement),a=t.height,o=t.width,e.next=4,N(I(I({},n.connectionData),{},{height:a,width:o}));case 4:i=e.sent,n.connectStartTime=Date.now(),n.client.connect(i);case 7:case"end":return e.stop()}}),e)})))),(0,u.default)(this,"disconnect",(function(){n.client.disconnect(),n.logDisconnect(!1)})),(0,u.default)(this,"setInstance",(function(e){n.instance||(n.instance=e)})),a&&h&&C&&(this.displayElement=a,this.protocol=p,this.onStatusChange=_,this.connectStartTime=(0,S.default)(),this.tunnel=this.initializeTunnel(h),this.client=this.initializeClient(),this.initializeDisplay(),this.connectionData={region:v,token:C,tunnelUrl:h,instancePasswordQuery:s,dpi:!(0,O.isWindowsProtocol)(p)&&P})}))},6008:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CLIPBOARD_STATE_WAITING=t.CLIPBOARD_STATE_REMOTE_UPDATED=t.CLIPBOARD_STATE_IDLE=void 0,t.readBlobFromStream=E,t.readFromStream=y,t.readTextFromStream=g,t.writeBlobToStream=b,t.writeTextToStream=v,t.writeToStream=T;var r=a(n(7)),o=a(n(5)),i=a(n(6)),s=a(n(2)),l=a(n(35)),u=a(n(5548)),c=a(n(273)),d=n(683),f=a(n(211)),p=n(5760);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,s.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e){return new Promise((function(t){var n=new u.default.StringReader(e),a="";n.ontext=function(e){a+=e},n.onend=function(){t(a)}}))}function E(e,t){return new Promise((function(n){var a=new u.default.BlobReader(e,t);a.onend=function(){n(a.getBlob())}}))}function y(e,t){return/^text\//.exec(t)?g(e):E(e,t)}function v(e,t){return new Promise((function(n){var a=new u.default.StringWriter(t);a.sendText(e),a.sendEnd(),n()}))}function b(e,t){return new Promise((function(n){var a=new u.default.BlobWriter(t);a.oncomplete=function(){a.sendEnd(),n()},a.sendBlob(e)}))}function T(e,t){return"string"==typeof e?v(e,t):b(e,t)}function C(){return S.apply(this,arguments)}function S(){return(S=(0,l.default)(r.default.mark((function e(){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.permissions.query({name:"clipboard-write"});case 2:if("denied"!==e.sent.state){e.next=5;break}throw new Error("Clipboard permissions denied");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return _.apply(this,arguments)}function _(){return(_=(0,l.default)(r.default.mark((function e(){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.permissions.query({name:"clipboard-read"});case 2:if("granted"!==e.sent.state){e.next=12;break}return e.prev=4,e.next=7,navigator.clipboard.readText();case 7:return e.abrupt("return",e.sent);case 10:e.prev=10,e.t0=e.catch(4);case 12:throw new Error;case 13:case"end":return e.stop()}}),e,null,[[4,10]])})))).apply(this,arguments)}function w(e){return I.apply(this,arguments)}function I(){return(I=(0,l.default)(r.default.mark((function e(t){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.default.navigator.clipboard.writeText(t);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var R=t.CLIPBOARD_STATE_IDLE=0,P=t.CLIPBOARD_STATE_WAITING=1,M=t.CLIPBOARD_STATE_REMOTE_UPDATED=2;t.default=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=n.element,i=n.client,u=n.keyboard,c=n.mouse,m=n.onClipboardChange,g=n.isWindows;(0,o.default)(this,e),(0,s.default)(this,"clipboardData",p.DEFAULT_CLIPBOARD_DATA),(0,s.default)(this,"remoteClipboardState",R),(0,s.default)(this,"initializeClipboardEvents",(function(){t.clipboardElement.addEventListener("cut",t.onCut),t.clipboardElement.addEventListener("copy",t.onCopy),t.clipboardElement.addEventListener("paste",t.onPaste),t.client.onclipboard=t.onReceiveClipboard})),(0,s.default)(this,"setClipboard",(function(e){e.data!==t.clipboardData.data&&t.setClipboardElementValue(e.data),t.clipboardData=e,(0,f.default)(t.onClipboardChange,e),e.source===d.CLIPBOARD_SOURCE_LOCAL&&t.sendClipboardData()})),(0,s.default)(this,"onReceiveClipboard",(function(e,n){return y(e,n).then(function(){var e=(0,l.default)(r.default.mark((function e(a){var o;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isWindows||void 0!==t.asyncClipboardWriteAllowed){e.next=10;break}return e.prev=1,e.next=4,C();case 4:t.asyncClipboardWriteAllowed=!0,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),t.asyncClipboardWriteAllowed=!1;case 10:if(o=t.remoteClipboardState===P,t.onRemoteClipboardChange({data:a,type:n,remoteOnly:!o}),!o){e.next=16;break}t.remoteClipboardState=M,e.next=19;break;case 16:if(!t.isWindows||!t.asyncClipboardWriteAllowed){e.next=19;break}return e.next=19,w(a);case 19:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}())})),(0,s.default)(this,"setClipboardElementValue",(function(e){t.clipboardElement.value=e})),(0,s.default)(this,"sendClipboardData",(function(){var e=t.clipboardData,n=e.data,a=e.type,r=void 0===a?p.MIMETYPE_TEXT_PLAIN:a,o=t.client.createClipboardStream(r);return t.remoteClipboardState=P,T(n,o).then((function(){t.remoteClipboardState=M}))})),(0,s.default)(this,"onLocalClipboardChange",(function(e){t.setClipboard({data:e,type:p.MIMETYPE_TEXT_PLAIN,source:d.CLIPBOARD_SOURCE_LOCAL})})),(0,s.default)(this,"onRemoteClipboardChange",(function(e){var n=e.data,a=e.type,r=e.remoteOnly;t.setClipboard({data:n,type:a,remoteOnly:r,source:d.CLIPBOARD_SOURCE_REMOTE})})),(0,s.default)(this,"waitForRemoteClipboardUpdate",(function(){return new Promise((function(e,n){if(!t.isWindows)return t.remoteClipboardState=R,void e();var a=500,r=setInterval((function(){a-=1,t.remoteClipboardState===M?(t.remoteClipboardState=R,clearInterval(r),e()):(a<1||t.remoteClipboardState===R)&&(clearInterval(r),n())}),10)}))})),(0,s.default)(this,"readFromRemoteStream",(function(e){return t.remoteClipboardState=P,t.clipboardData.remoteOnly&&t.setClipboard(h(h({},t.clipboardData),{},{remoteOnly:!1})),t.waitForRemoteClipboardUpdate().then((function(){return t.writeLocalClipboard(e)})).catch((function(){}))})),(0,s.default)(this,"sendRemotePaste",(function(){t.isWindows&&t.keyboard?t.keyboard.sendPasteHotkey():t.mouse&&t.mouse.sendRightClick()})),(0,s.default)(this,"onPaste",(function(e){return t.readLocalClipboard(e).then(t.waitForRemoteClipboardUpdate).then(t.sendRemotePaste).catch((function(){}))})),(0,s.default)(this,"onCopy",(function(e){return t.isWindows&&t.keyboard&&t.keyboard.sendCopyHotkey(),t.readFromRemoteStream(e)})),(0,s.default)(this,"onCut",(function(e){return t.isWindows&&t.keyboard&&t.keyboard.sendCutHotkey(),t.readFromRemoteStream(e)})),a&&i&&(this.clipboardElement=a,this.client=i,this.keyboard=u,this.mouse=c,this.onClipboardChange=m,this.isWindows=g,this.initializeClipboardEvents())}var t,n;return(0,i.default)(e,[{key:"readLocalClipboard",value:(n=(0,l.default)(r.default.mark((function e(t){var n,a;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.executingCommand){e.next=3;break}return this.executingCommand=!1,e.abrupt("return");case 3:if(this.asyncClipboardReadAllowed){e.next=13;break}t.preventDefault(),e.prev=5,c.default.clipboardData?n=c.default.clipboardData.getData("Text"):t.clipboardData&&(n=t.clipboardData.getData(p.MIMETYPE_TEXT_PLAIN)),this.onLocalClipboardChange(n),e.next=13;break;case 10:return e.prev=10,e.t0=e.catch(5),e.abrupt("return");case 13:return e.prev=13,e.next=16,O();case 16:a=e.sent,this.asyncClipboardReadAllowed=!0,this.onLocalClipboardChange(a),e.next=24;break;case 21:e.prev=21,e.t1=e.catch(13),this.asyncClipboardReadAllowed=!1;case 24:case"end":return e.stop()}}),e,this,[[5,10],[13,21]])}))),function(e){return n.apply(this,arguments)})},{key:"writeLocalClipboard",value:(t=(0,l.default)(r.default.mark((function e(t){var n;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.executingCommand){e.next=3;break}return this.executingCommand=!1,e.abrupt("return");case 3:if(n=this.clipboardData.data,this.asyncClipboardWriteAllowed){e.next=14;break}e.prev=5,c.default.clipboardData?c.default.clipboardData.setData("Text",n):t.clipboardData&&t.clipboardData.setData(p.MIMETYPE_TEXT_PLAIN,n),t.preventDefault(),e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(5),this.legacyClipboardWrite(),e.abrupt("return");case 14:return e.prev=14,e.next=17,C();case 17:return this.asyncClipboardWriteAllowed=!0,e.next=20,w(n);case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(14),this.asyncClipboardWriteAllowed=!1;case 25:case"end":return e.stop()}}),e,this,[[5,10],[14,22]])}))),function(e){return t.apply(this,arguments)})},{key:"legacyClipboardWrite",value:function(){this.executingCommand=!0,this.clipboardElement.select();try{c.default.document.execCommand("copy")}catch(e){this.setClipboard(h(h({},this.clipboardData),{},{remoteOnly:!0}))}}}]),e}()},6009:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(6)),o=a(n(5)),i=a(n(2)),s=a(n(5548)),l=n(1260),u=n(5624);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=(0,r.default)((function e(t,n,a){var r=this;(0,o.default)(this,e),(0,i.default)(this,"initializeMouse",(function(){r.mouseElement.addEventListener("contextmenu",r.onContextMenu),r.preventSshRightClicks();var e=new s.default.Mouse(r.mouseElement);return e.onmousedown=r.onMouseEvent,e.onmouseup=r.onMouseEvent,e.onmousemove=r.onMouseEvent,r.enableSshContextMenu(),e})),(0,i.default)(this,"cancelRightClick",(function(e){return!(2===e.button&&!l.isIE)||(0,u.cancelEvent)(e)})),(0,i.default)(this,"preventSshRightClicks",(function(){r.isWindows||(r.mouseElement.addEventListener("mousedown",r.cancelRightClick),r.mouseElement.addEventListener("mouseup",r.cancelRightClick))})),(0,i.default)(this,"enableSshContextMenu",(function(){r.isWindows||r.mouseElement.removeEventListener("contextmenu",s.default.eventListeners.onContextMenu)})),(0,i.default)(this,"sendRightClick",(function(){r.client.sendMouseState(d(d({},r.mouse.currentState),{},{right:!0})),r.client.sendMouseState(r.mouse.currentState)})),(0,i.default)(this,"onMouseEvent",(function(e){r.client.sendMouseState(e)})),(0,i.default)(this,"onContextMenu",(function(e){return r.isWindows?(0,u.cancelEvent)(e):(e.target.select(),!0)})),t&&n&&(this.mouseElement=t,this.client=n,this.isWindows=a,this.mouse=this.initializeMouse())}))},6010:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(6)),o=a(n(5)),i=a(n(44)),s=a(n(10)),l=a(n(14)),u=a(n(13)),c=a(n(2)),d=a(n(487)),f=a(n(5548)),p=a(n(273)),m=a(n(5868)),h=a(n(6011)),g=n(5624);function E(e){var t=y();return function(){var n,a=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,l.default)(this,n)}}function y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(y=function(){return!!e})()}t.default=function(e){(0,s.default)(n,e);var t=E(n);function n(e,a,r){var s;return(0,o.default)(this,n),s=t.call(this,e,a,r),(0,c.default)((0,i.default)(s),"initializeOnScreenKeyboard",(function(){var e=new f.default.OnScreenKeyboard(h.default);return e.onkeydown=s.onKeyDown,e.onkeyup=s.onKeyUp,e.resize((0,g.getElementDimensions)(s.keyboardElement).width),s.keyboardElement.appendChild(e.getElement()),p.default.addEventListener("resize",s.debouncedResize),e})),(0,c.default)((0,i.default)(s),"onResize",(function(){var e=(0,g.getElementDimensions)(s.keyboardElement).width;s.onScreenKeyboard.resize(e)})),(0,c.default)((0,i.default)(s),"debouncedResize",(0,d.default)(s.onResize,200)),e&&a?(s.onScreenKeyboard=s.initializeOnScreenKeyboard(),s):(0,l.default)(s)}return(0,r.default)(n)}(m.default)},6011:function(e){e.exports=JSON.parse('{"language":"en_US","type":"qwerty","width":20,"keys":{"F1":65470,"F2":65471,"F3":65472,"F4":65473,"F5":65474,"F6":65475,"F7":65476,"F8":65477,"F9":65478,"F10":65479,"F11":65480,"F12":65481,"Del":65535,"Menu":[{"title":"Menu","keysym":65383}],"LCtrl":[{"title":"Ctrl","modifier":"control","keysym":65507}],"LAlt":[{"title":"Alt","modifier":"alt","keysym":65513}],"Super":[{"title":"Win","keysym":65515}]},"layout":[["Super","Menu",0.3,"LCtrl","LAlt","Del",0.3,"F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12"]],"keyWidths":{"Super":1.2,"Menu":1.2}}')},6012:function(e,t,n){"use strict";var a=n(1),r=n(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=N,t.statusCodeMessageMap=t.messages=void 0;var o,i=a(n(24)),s=a(n(2)),l=a(n(146)),u=a(n(5548)),c=a(n(3)),d=a(n(0)),f=n(4),p=n(28),m=n(179),h=n(683),g=a(n(674)),E=n(492),y=n(11),v=a(n(32)),b=n(5761),T=a(n(6013)),C=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=r(e)&&"function"!=typeof e)return{default:e};var n=_(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(a,i,s):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(n(6014)),S=a(n(6016)),O=a(n(5705));function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(_=function(e){return e?n:t})(e)}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){(0,s.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var R=t.messages=(0,f.defineMessages)({clientStateConnecting:{id:"ls.terminal.connecting",defaultMessage:"Connecting to your instance…"},clientStateDisconnected:{id:"ls.terminal.disconnected",defaultMessage:"You have been disconnected"},disconnectModalDescription:{id:"instance.description.disconnectModalDescription",defaultMessage:"To re-establish the connection, choose the reconnect button."}}),P=u.default.Status.Code,M=t.statusCodeMessageMap=(o={},(0,s.default)(o,h.CLIENT_STATE_WAITING,R.clientStateConnecting),(0,s.default)(o,h.CLIENT_STATE_CONNECTING,R.clientStateConnecting),(0,s.default)(o,h.CLIENT_STATE_DISCONNECTED,R.clientStateDisconnected),o);var A=function(e){var t=e.children;return d.default.createElement(v.default,{content:t,focusDialog:!0})};function N(e){var t=e.clientStatus,n=e.incrementPasswordAttempts,a=e.passwordAttempts,r=e.reconnect,o=(0,p.useDispatch)(),s=(0,g.default)(),l=s.protocol,u=void 0===l?h.PROTOCOL_SSH:l,c=s.region,f=(0,b.useInstance)(),v=t.code,_=t.isError;function w(){return _()?d.default.createElement(A,null,d.default.createElement(T.default,{code:v,reconnect:r})):null}if(!(0,p.useSelector)(E.getUserIsLoggedIn))return null;switch(v){case P.UPSTREAM_HOSTKEY_MISMATCH:var R=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).message;try{return JSON.parse(e)}catch(e){return{}}}(t);return(0,C.isValidHostKeyDirective)(R)?d.default.createElement(A,null,d.default.createElement(C.default,(0,i.default)({},t,R,{protocol:u,resetHostKeys:function(e){return o((0,m.deleteKnownHostKeys)(I(I({},e),{},{instanceName:f&&f.name,region:c})))},reconnect:r}))):w();case h.UPSTREAM_NLA_AUTHENTICATION_FAILURE:return d.default.createElement(A,null,d.default.createElement(S.default,{passwordAttempts:a,incrementPasswordAttempts:n,reconnect:r}));case h.CLIENT_STATE_WAITING:case h.CLIENT_STATE_CONNECTING:return d.default.createElement(A,null,d.default.createElement(y.Text,{marginBottom:0,message:M[v]}));case h.CLIENT_STATE_DISCONNECTED:return d.default.createElement(A,null,d.default.createElement(y.Text,{message:M[v]}),d.default.createElement(O.default,{reconnect:r}));default:return w()}}A.propTypes={children:c.default.node.isRequired},N.propTypes={clientStatus:h.clientStatusShape,incrementPasswordAttempts:c.default.func,passwordAttempts:c.default.number,reconnect:c.default.func},N.defaultProps={incrementPasswordAttempts:l.default,reconnect:l.default}},6013:function(e,t,n){"use strict";var a=n(1),r=n(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=H,t.statusCodeToMessageMap=t.messages=void 0;var o,i,s=a(n(2)),l=a(n(146)),u=a(n(5548)),c=a(n(3)),d=a(n(0)),f=n(4),p=n(91),m=n(55),h=n(683),g=n(903),E=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=r(e)&&"function"!=typeof e)return{default:e};var n=M(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(a,i,s):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(n(42)),y=a(n(674)),v=n(56),b=a(n(572)),T=a(n(305)),C=a(n(287)),S=a(n(413)),O=a(n(1183)),_=a(n(1184)),w=n(11),I=a(n(131)),R=a(n(49)),P=n(5705);function M(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(M=function(e){return e?n:t})(e)}function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){(0,s.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var D=u.default.Status.Code,L=t.messages=(0,f.defineMessages)({errorServerBusy:{id:"ls.terminal.clientErrorServerBusy",defaultMessage:"This connection has been closed because the server is busy. Wait a few minutes and try again."},errorUpstreamTimeout:{id:"ls.terminal.errorUpstreamTimeout",defaultMessage:"The remote server has closed the connection because your instance is taking too long to respond. Try again or contact customer support."},errorUpstreamError:{id:"ls.terminal.errorUpstreamError",defaultMessage:"Your instance encountered an error and has closed the connection. Try again or contact customer support."},errorUpstreamHostkeyMismatch:{id:"ls.terminal.errorUpstreamHostkeyMismatch",defaultMessage:"Your instance presented a host key or a host certificate that does not match our records. Please contact customer support."},errorResourceNotFound:{id:"ls.terminal.errorResourceNotFound",defaultMessage:"The requested connection doesn't exist. Try reconnecting from the home screen or instance connect page."},errorResourceConflict:{id:"ls.terminal.errorResourceConflict",defaultMessage:"This connection has been closed because it conflicts with another connection. Try again later."},errorClientUnauthorized:{id:"ls.terminal.errorClientUnauthorized",defaultMessage:"Log in failed. If this instance has just started up, try again in a minute or two."},errorClientTimeout:{id:"ls.terminal.errorClientTimeout",defaultMessage:"The remote server has closed the connection because your browser hasn't responded and appears to be disconnected. This is commonly caused by network problems, such as a weak wireless signal or very slow network speeds. Check your network and try again."},errorClientTooMany:{id:"ls.terminal.errorClientTooMany",defaultMessage:"The remote server is denying access to this connection because you have exhausted the limit for simultaneous connection use by an individual user. Close one or more connections and try again."},errorDefault:{id:"ls.terminal.clientErrorDefault",defaultMessage:"An error occurred and we were unable to connect or stay connected to your instance. If this instance has just started up, try again in a minute or two."},errorSessionConflict:{id:"instances.descriptions.errorSessionConflict",defaultMessage:"Another active RDP session has caused this session to disconnect. To continue to use this window with a new session, reconnect. Reconnecting will terminate any other active browser-based or third party RDP sessions. You can close the other sessions after they are terminated."},errorUpstreamNotFound:{id:"instances.descriptions.upstreamNotFound",defaultMessage:"If the instance has just started up, wait a few minutes and try again. If this continues, you can try to connect to your instance by using a third-party {protocol} client such as {thirdPartyClient}."},errorServerError:{id:"instances.descriptions.serverError",defaultMessage:"We are unable to establish a browser-based {protocol} connection to your instance. If this continues, you can try to connect to your instance using a third-party {protocol} client such as {thirdPartyClient}."},unableToConnectTitle:{id:"instances.titles.unableToConnect",defaultMessage:"Unable to connect"},failedToConnectTitle:{id:"instances.titles.failedToConnect",defaultMessage:"Failed to connect"},remoteDesktopClient:{id:"instances.titles.remoteDesktopClient",defaultMessage:"Remote Desktop Client"},learnMore:{id:"instances.descriptions.learnMore",defaultMessage:"<a>Learn more about connecting to your instance</a>."},puttyBrandName:{id:"instances.titles.putty",defaultMessage:"PuTTy"},contactAWSSupport:{id:"instances.descriptions.contactAWSSupport",defaultMessage:"Contact <a>AWS Support</a> if you continue to see this error."},connectionClosed:{id:"instances.titles.connectionClosed",defaultMessage:"Your connection has been closed"},clientUnAuthorizedError:{id:"instances.descriptions.clientUnauthorized",defaultMessage:"The SSH connection could not be established because of a mis-configured SSH key. Use a third-party SSH client such as {thirdPartyClient} to connect to your instance and update your SSH key."},clientTimeoutError:{id:"instances.descriptions.clientTimeout",defaultMessage:"This session has been idle for 30 minutes or more. Choose Reconnect to start the session again."},unableToLoadKeyTitle:{id:"instances.titles.unableToLoadKey",defaultMessage:"Unable to load key"},upstreamTimeoutError:{id:"instances.descriptions.upstreamTimeout",defaultMessage:"Verify that you have a stable internet connection, and check the CPU load on your instance; the server may be overloaded. Disable any browser plugins and extensions that might cause the connection to fail. For more information, see <docs>View Lightsail instance metrics</docs>, or visit the <a>Metrics</a> tab of your instance."}}),k=t.statusCodeToMessageMap=N(N(N(N(N(N((o={},(0,s.default)(o,D.SERVER_BUSY,L.errorServerBusy),(0,s.default)(o,D.UPSTREAM_TIMEOUT,L.errorUpstreamTimeout),(0,s.default)(o,D.UPSTREAM_ERROR,L.errorUpstreamError),(0,s.default)(o,D.RESOURCE_NOT_FOUND,L.errorResourceNotFound),(0,s.default)(o,D.RESOURCE_CONFLICT,L.errorResourceConflict),(0,s.default)(o,D.CLIENT_UNAUTHORIZED,L.errorClientUnauthorized),(0,s.default)(o,D.CLIENT_TIMEOUT,L.errorClientTimeout),(0,s.default)(o,D.CLIENT_TOO_MANY,L.errorClientTooMany),o),(0,v.isEnabled)(m.GUAC_ERROR_SESSION_CONFLICT_STRING)?(0,s.default)({},D.SESSION_CONFLICT,L.errorSessionConflict):{}),(0,v.isEnabled)(m.GUAC_ERROR_UPSTREAM_NOT_FOUND_STRING)?(0,s.default)({},D.UPSTREAM_NOT_FOUND,L.errorUpstreamNotFound):{}),(0,v.isEnabled)(m.GUAC_ERROR_SERVER_ERROR_STRING)?(0,s.default)({},D.SERVER_ERROR,L.errorServerError):{}),(0,v.isEnabled)(m.GUAC_ERROR_CLIENT_UNAUTHORIZED_STRING)?(0,s.default)({},D.CLIENT_UNAUTHORIZED,L.clientUnAuthorizedError):{}),(0,v.isEnabled)(m.GUAC_ERROR_CLIENT_TIMEOUT_STRING)?(0,s.default)({},D.CLIENT_TIMEOUT,L.clientTimeoutError):{}),(0,v.isEnabled)(m.GUAC_ERROR_UPSTREAM_TIMEOUT_STRING)?(0,s.default)({},D.UPSTREAM_TIMEOUT,L.upstreamTimeoutError):{}),x=(i={},(0,s.default)(i,h.SESSION_CONFLICT,(0,v.isEnabled)(m.GUAC_ERROR_SESSION_CONFLICT_STRING)),(0,s.default)(i,h.UPSTREAM_NOT_FOUND,(0,v.isEnabled)(m.GUAC_ERROR_UPSTREAM_NOT_FOUND_STRING)),(0,s.default)(i,h.SERVER_ERROR,(0,v.isEnabled)(m.GUAC_ERROR_SERVER_ERROR_STRING)),(0,s.default)(i,h.CLIENT_UNAUTHORIZED,(0,v.isEnabled)(m.GUAC_ERROR_CLIENT_UNAUTHORIZED_STRING)),(0,s.default)(i,h.UPSTREAM_TIMEOUT,(0,v.isEnabled)(m.GUAC_ERROR_UPSTREAM_TIMEOUT_STRING)),(0,s.default)(i,h.CLIENT_TIMEOUT,(0,v.isEnabled)(m.GUAC_ERROR_CLIENT_TIMEOUT_STRING)),i),U=[h.SESSION_CONFLICT,h.CLIENT_TIMEOUT],j=[h.SESSION_CONFLICT,h.SERVER_ERROR,h.UPSTREAM_NOT_FOUND,h.CLIENT_UNAUTHORIZED,h.UPSTREAM_TIMEOUT,h.CLIENT_TIMEOUT],F=[h.SERVER_ERROR,h.UPSTREAM_NOT_FOUND,h.UPSTREAM_TIMEOUT,h.CLIENT_UNAUTHORIZED],K=function(e){return F.includes(e)?x[e]:null},B=function(e){return j.includes(e)?x[e]:null},W=function(e){return U.includes(e)?x[e]:null};function H(e){var t,n=e.code,a=e.reconnect,r=(0,y.default)(),o=r.protocol,i=r.instanceName,l=r.region,u=k[n]||L.errorDefault,c=o===h.PROTOCOL_SSH?p.ARTICLE_HOW_TO_CONNECT_TO_YOUR_LINUX_INSTANCE:p.ARTICLE_HOW_TO_CONNECT_TO_YOUR_WINDOWS_INSTANCE,f=h.statusCodeNames[n],m=(t={},(0,s.default)(t,h.UPSTREAM_NOT_FOUND,"upstream-not-found"),(0,s.default)(t,h.SERVER_ERROR,"server-error"),(0,s.default)(t,h.SESSION_CONFLICT,"session-conflict"),(0,s.default)(t,h.CLIENT_UNAUTHORIZED,"client-unauthorized"),(0,s.default)(t,h.CLIENT_TIMEOUT,"client-timeout"),(0,s.default)(t,h.UPSTREAM_TIMEOUT,"upstream-timeout"),t),v="".concat(E.BASE_PATH).concat(E.default.INSTANCE_METRICS);return d.default.createElement("div",{"data-analytics":m[n],"data-analytics-type":"eventDetail"},f&&x[n]&&function(e){switch(h.statusCodeNames[e]){case h.statusCodeNames[h.SESSION_CONFLICT]:return d.default.createElement(O.default,{variant:"h1",message:L.connectionClosed});case h.statusCodeNames[h.CLIENT_UNAUTHORIZED]:return d.default.createElement(O.default,{variant:"h1",message:L.unableToLoadKeyTitle});case h.statusCodeNames[h.UPSTREAM_TIMEOUT]:return d.default.createElement(O.default,{variant:"h1",message:L.failedToConnectTitle});case h.statusCodeNames[h.CLIENT_TIMEOUT]:return d.default.createElement(O.default,{variant:"h1",message:L.connectionClosed});default:return d.default.createElement(O.default,{variant:"h1",message:L.unableToConnectTitle})}}(n),B(n)?d.default.createElement(d.default.Fragment,null,d.default.createElement(C.default,{textAlign:"left",margin:{top:"m"},message:u,messageValues:{protocol:o.toUpperCase(),thirdPartyClient:d.default.createElement(R.default,{message:o===h.PROTOCOL_RDP?L.remoteDesktopClient:L.puttyBrandName})},messageTags:{a:function(e){return d.default.createElement(_.default,{external:!0,href:(0,b.default)(v,{instanceName:i,region:l,metricName:g.DEFAULT_METRIC_NAME})},e)},docs:function(e){return d.default.createElement(I.default,{slug:p.ARTICLE_CONTAINER_HEALTH_METRICS},e)}}}),d.default.createElement(C.default,{textAlign:"left",message:L.learnMore,messageTags:{a:function(e){return d.default.createElement(I.default,{slug:c},e)}}}),K(n)&&d.default.createElement(C.default,{textAlign:"left",margin:{bottom:"m"},message:L.contactAWSSupport,messageTags:{a:function(e){return d.default.createElement(_.default,{external:!0,href:"https://console.aws.amazon.com/support/home"},e)}}})):d.default.createElement(w.Text,{message:u}),d.default.createElement(w.Text,{textAlign:B(n)?"left":"center",size:"small",marginBottom:0},h.statusCodeNames[n]," [",n,"]"),W(n)&&d.default.createElement(T.default,{float:"right"},d.default.createElement(S.default,{variant:"primary",onClick:a,message:P.messages.reconnect})))}H.propTypes={code:c.default.oneOf(Object.values(D)),reconnect:l.default}},6014:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.HOST_KEY_DIRECTIVES=t.DO_NOT_CONNECT=t.DELETE_KNOWN_HOST_KEYS=void 0,t.HostKeyMismatchContent=x,t.default=t.TRY_AGAIN=void 0,t.isValidHostKeyDirective=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.directive;return D.includes(t)},t.messages=void 0;var r=a(n(3)),o=a(n(0)),i=n(4),s=n(98),l=a(n(31)),u=n(91),c=n(683),d=n(152),f=n(288),p=n(2277),m=a(n(211)),h=a(n(294)),g=a(n(1189)),E=n(214),y=n(11),v=n(39),b=a(n(33)),T=a(n(131)),C=a(n(1186)),S=a(n(176)),O=a(n(194)),_=a(n(49)),w=a(n(6015)),I=n(213),R=a(n(5705)),P=t.messages=(0,i.defineMessages)({learnMoreStandalone:{id:"terminal.hostKeyMismatchContent.learnMoreAboutConnectionIssues",defaultMessage:"Learn more about connection issues"},title:{id:"terminal.hostKeyMismatchContent.title",defaultMessage:"Can't connect"},tryAgainTitle:{id:"terminal.hostKeyMismatchContent.tryAgainTitle",defaultMessage:"Can't connect right now"},unexpectedHostKey:{id:"terminal.hostKeyMismatchContent.unexpectedHostKey",defaultMessage:"Your instance presented a host key that does not match our records."},unexpectedCertificate:{id:"terminal.hostKeyMismatchContent.unexpectedCertificate",defaultMessage:"Your instance presented a certificate that does not match our records."},unexpectedHostKeyMITM:{id:"terminal.hostKeyMismatchContent.unexpectedHostKeyMITM",defaultMessage:"Your instance presented a host key that does not match our records. Please {linkContact}."},unexpectedHostKeyLine2:{id:"terminal.hostKeyMismatchContent.unexpectedHostKeyLine2",defaultMessage:"If you're expecting this, reset our record to connect to your instance."},unexpectedHostKeyLine3:{id:"terminal.hostKeyMismatchContent.unexpectedHostKeyLine3",defaultMessage:"If not, {linkLearnMore}"},inlineLinkLearnMore:{id:"terminal.hostKeyMismatchContent.unexpectedHostKeyLine3.linkLearnMore",defaultMessage:"learn more about connection issues."},contactCustomerSupport:{id:"terminal.hostKeyMismatchContent.contactCustomerSupport",defaultMessage:"Please {linkContactCustomerSupport}"},linkContactCustomerSupport:{id:"terminal.hostKeyMismatchContent.contactCustomerSupport.linkContactCustomerSupport",defaultMessage:"contact customer support"},disclosureTitleSSH:{id:"terminal.hostKeyMismatchContent.disclosureTitleSSH",defaultMessage:"View host key details"},disclosureTitleRDP:{id:"terminal.hostKeyMismatchContent.disclosureTitleRDP",defaultMessage:"View certificate details"},disclosureContentHostKeyExpectedLabel:{id:"terminal.hostKeyMismatchContent.disclosureContentHostKeyExpectedLabel",defaultMessage:"We expected a {hostKeyDescriptor} with the fingerprint:"},disclosureContentReceivedLabel:{id:"terminal.hostKeyMismatchContent.disclosureContentHostKeyReceivedLabel",defaultMessage:"But received:"},disclosureContentCertificateExpectedLabel:{id:"terminal.hostKeyMismatchContent.disclosureContentCertificateExpectedLabel",defaultMessage:"We expected a certificate with the fingerprint:"},hostKeyAlgorithmLabel:{id:"terminal.hostKeyMismatchContent.hostKeyLabel",defaultMessage:"{hostKeyAlgorithm} host key"},disclosureContentRDP:{id:"terminal.hostKeyMismatchContent.disclosureContentRDP",defaultMessage:"We expected the X.509 certificate with the {expectedFingerprint} fingerprint but saw the {observedFingerprint} fingerprint."},instanceSecurityProblem:{id:"terminal.hostKeyMismatchContent.instanceSecurityProblem",defaultMessage:"There may be a problem with your instance security."},resetRecordButton:{id:"terminal.hostKeyMismatchContent.resetRecordButton",defaultMessage:"Reset record"},tryAgainDescription:{id:"terminal.hostKeyMismatchContent.tryAgainDescription",defaultMessage:"Please wait a few minutes and try reconnecting."}}),M=t.DELETE_KNOWN_HOST_KEYS="deleteKnownHostKeys",A=t.DO_NOT_CONNECT="doNotConnect",N=t.TRY_AGAIN="tryAgain",D=t.HOST_KEY_DIRECTIVES=[M,A,N];var L=function(){return o.default.createElement(y.Text,{size:"small"},o.default.createElement(T.default,{slug:u.ARTICLE_HOST_VALIDATION,iconSize:v.iconSizeBody3,message:P.learnMoreStandalone}))},k=function(){return o.default.createElement(S.default,{href:(0,E.addRegionParamToURL)(d.CUSTOMER_SUPPORT_URL),message:P.linkContactCustomerSupport})};function x(e){var t=e.matchedErrors,n=e.clearApiErrorMessages,a=e.directive,r=e.expectedHostFingerprints,i=e.hostFingerprint,s=e.hostKeyAlgorithm,l=e.isPending,d=e.onResetHostKeys,f=e.protocol,p=e.reconnect,h=e.resetHostKeys,g=e.onResetFailure,E=f===c.PROTOCOL_RDP,v=l&&0===t.length;switch(a){case M:return o.default.createElement("div",null,o.default.createElement(y.DeprecatedHeading,{message:P.title,level:"2"}),o.default.createElement(y.Text,null,o.default.createElement(y.Text.Strong,{message:E?P.unexpectedCertificate:P.unexpectedHostKey}),o.default.createElement("br",null),o.default.createElement(_.default,{message:P.unexpectedHostKeyLine2}),o.default.createElement("br",null),o.default.createElement(_.default,{message:P.unexpectedHostKeyLine3,values:{linkLearnMore:o.default.createElement(T.default,{slug:u.ARTICLE_HOST_VALIDATION,message:P.inlineLinkLearnMore})}})),o.default.createElement(w.default,{title:E?P.disclosureTitleRDP:P.disclosureTitleSSH},o.default.createElement(I.InfoBox,null,o.default.createElement(y.Text,{size:"medium"},o.default.createElement(_.default,{message:E?P.disclosureContentCertificateExpectedLabel:P.disclosureContentHostKeyExpectedLabel,values:{hostKeyDescriptor:o.default.createElement(_.default,{message:P.hostKeyAlgorithmLabel,values:{hostKeyAlgorithm:o.default.createElement(y.Text.Strong,null,s)}})}}),o.default.createElement("br",null),o.default.createElement("strong",null,o.default.createElement(y.Text.Code,null,r[s]))),o.default.createElement(y.Text,{size:"medium"},o.default.createElement(_.default,{message:P.disclosureContentReceivedLabel}),o.default.createElement("br",null),o.default.createElement("strong",null,o.default.createElement(y.Text.Code,null,i))))),v?o.default.createElement(O.default,null):o.default.createElement(y.ButtonGroup,{marginY:"small",buttonGap:"standard"},o.default.createElement(b.default,{message:P.resetRecordButton,onClick:function(){(0,m.default)(n),d(),h({onSuccess:p,onFailure:g})}})),o.default.createElement(C.default,{errors:t}));case A:return o.default.createElement("div",null,o.default.createElement(y.DeprecatedHeading,{message:P.title,level:"2"}),o.default.createElement(y.Text,null,o.default.createElement(y.Text.Strong,{message:E?P.unexpectedCertificate:P.unexpectedHostKey}),o.default.createElement("br",null),o.default.createElement(_.default,{message:P.instanceSecurityProblem}),o.default.createElement("br",null),o.default.createElement(_.default,{message:P.contactCustomerSupport,values:{linkContactCustomerSupport:o.default.createElement(k,null)}})),o.default.createElement(L,null));default:return o.default.createElement("div",null,o.default.createElement(y.DeprecatedHeading,{message:P.tryAgainTitle,level:"2"}),o.default.createElement(y.Text,{message:P.tryAgainDescription,marginBottom:0}),o.default.createElement(y.ButtonGroup,{marginY:"small",buttonGap:"standard"},o.default.createElement(R.default,{reconnect:p})),o.default.createElement(L,null))}}x.propTypes={matchedErrors:f.apiErrorCollection,clearApiErrorMessages:r.default.func,directive:r.default.oneOf(D),expectedHostFingerprints:r.default.objectOf(r.default.string),hostFingerprint:r.default.string,hostKeyAlgorithm:r.default.string,isPending:r.default.bool,onResetHostKeys:r.default.func,protocol:p.protocolType,reconnect:r.default.func,resetHostKeys:r.default.func,onResetFailure:r.default.func};var U=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).defaultIsPending;return{isPending:void 0!==e&&e}},j={onResetHostKeys:function(){return{isPending:!0}},onResetFailure:function(){return U}};t.default=(0,s.compose)((0,g.default)(j,U),(0,h.default)({generateApiErrorPatterns:function(){return[{apiMethod:l.default.DeleteKnownHostKeys}]}}))(x)},6015:function(e,t,n){"use strict";var a=n(1),r=n(9);Object.defineProperty(t,"__esModule",{value:!0}),t.Disclosure=h,t.default=void 0;var o=a(n(2)),i=a(n(3)),s=a(n(0)),l=n(63),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=r(e)&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(a,i,s):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(n(1189)),c=n(11),d=n(39),f=a(n(1188)),p=a(n(5230));function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function h(e){var t=e.title,n=e.children,a=e.isOpen,r=e.setIsOpen;return s.default.createElement(f.default,{headingClassName:p.default.titleRow,iconSize:d.iconSizeSmall,isOpen:a,onClickToggle:function(){return r(!a)},title:s.default.createElement("div",{className:p.default.title},s.default.createElement(c.Text,{message:t,size:"medium",marginBottom:0}))},n)}h.propTypes={title:l.localizationDescriptorShape,children:i.default.node,isOpen:i.default.bool,setIsOpen:i.default.func},h.defaultProps={};var g="isOpen",E={setIsOpen:(0,u.generateSingleKeyUpdater)(g)};t.default=(0,u.default)(E,(function(e){var t=e.defaultIsOpen,n=void 0!==t&&t;return(0,o.default)({},g,n)}))(h)},6016:function(e,t,n){"use strict";var a=n(1),r=n(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=S;var o=a(n(24)),i=a(n(27)),s=a(n(146)),l=a(n(3)),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=r(e)&&"function"!=typeof e)return{default:e};var n=T(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(a,i,s):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(n(0)),c=n(4),d=n(28),f=n(179),p=n(91),m=n(11),h=n(39),g=a(n(131)),E=a(n(194)),y=a(n(337)),v=n(5761),b=a(n(5705));function T(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(T=function(e){return e?n:t})(e)}var C=(0,c.defineMessages)({title:{id:"ls.terminal.invalidPasswordTitle",defaultMessage:"Invalid password"},description:{id:"ls.terminal.invalidPasswordDescription",defaultMessage:"If you changed the administrator password, please enter the new password to sign in to your instance."},passwordStorage:{id:"ls.terminal.passwordStorageNotice",defaultMessage:"We do not store the administrator password, and cannot retrieve it from your instance after it is changed."},passwordInputAriaLabel:{id:"ls.terminal.passwordInputAriaLabel",defaultMessage:"Instance password input"},passwordInputPlaceholder:{id:"ls.terminal.passwordInputPlaceholder",defaultMessage:"Enter your password here"},loginTrouble:{id:"ls.terminal.loginTrouble",defaultMessage:"Having trouble logging in?"},learnMore:{id:"ls.terminal.learnMoreWindowsPassword",defaultMessage:"Learn more about your Windows password"}});function S(e){var t=e.incrementPasswordAttempts,n=e.passwordAttempts,a=e.reconnect,r=(0,d.useDispatch)(),s=(0,c.useIntl)(),l=(0,v.useInstance)()||{},T=l.arn,S=l.location,O=l.name,_=n>=2,w=(0,u.useState)(""),I=(0,i.default)(w,2),R=I[0],P=I[1],M=(0,u.useState)(!1),A=(0,i.default)(M,2),N=A[0],D=A[1];function L(){D(!0),r((0,f.submitInstancePassword)({arn:T,instancePassword:R,location:S,name:O,reconnect:function(){t(),D(!1),a()}}))}return u.default.createElement(u.default.Fragment,null,u.default.createElement(m.DeprecatedHeading,{level:"2",marginBottom:"standard",message:C.title}),u.default.createElement(m.Text,{size:"large",weight:_?"default":"bold",message:C.description}),_&&u.default.createElement(u.default.Fragment,null,u.default.createElement(m.Text,{color:"danger",size:"large",marginBottom:0,weight:"bold",message:C.loginTrouble}),u.default.createElement(m.Text,null,u.default.createElement(g.default,{slug:p.ARTICLE_WINDOWS_PASSWORD,message:C.learnMore}))),u.default.createElement(m.Box,{display:"flex",flexDirection:"column",marginX:"auto",maxWidth:3*h.columnStandardInt,paddingBottom:"standard"},u.default.createElement(m.Box,{paddingBottom:"small"},u.default.createElement(y.default,(0,o.default)({"aria-label":s.formatMessage(C.passwordInputAriaLabel),fullWidth:!0,placeholder:s.formatMessage(C.passwordInputPlaceholder),type:"password",value:R,onChangeText:P,onPressEnter:L},{autoComplete:"new-password"}))),u.default.createElement(m.Text,{size:"small",message:C.passwordStorage})),u.default.createElement(m.ButtonGroup,{marginBottom:"small",buttonGap:"standard"},N&&u.default.createElement(E.default,null)||u.default.createElement(b.default,{disabled:0===R.length,reconnect:L})))}S.propTypes={incrementPasswordAttempts:l.default.func,passwordAttempts:l.default.number,reconnect:l.default.func},S.defaultProps={incrementPasswordAttempts:s.default,passwordAttempts:0,reconnect:s.default}}}]);